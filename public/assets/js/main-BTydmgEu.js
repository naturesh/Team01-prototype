(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const Jr=!1;var Pt=Array.isArray,li=Array.prototype.indexOf,Dr=Array.from,bn=Object.defineProperty,tt=Object.getOwnPropertyDescriptor,wn=Object.getOwnPropertyDescriptors,di=Object.prototype,ci=Array.prototype,Mr=Object.getPrototypeOf,Xr=Object.isExtensible;function Tt(e){return typeof e=="function"}const rt=()=>{};function vi(e){return e()}function Et(e){for(var t=0;t<e.length;t++)e[t]()}const Fe=2,yn=4,tr=8,Or=16,Je=32,mt=64,zt=128,Ae=256,Gt=512,ye=1024,qe=2048,ut=4096,Qe=8192,rr=16384,hi=32768,nr=65536,pi=1<<17,mi=1<<19,_n=1<<20,Rr=1<<21,nt=Symbol("$state"),Rn=Symbol("legacy props"),gi=Symbol("");function Sn(e){return e===this.v}function xn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ur(e){return!xn(e,this.v)}function bi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function wi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function yi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ri(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Si(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function xi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ti(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ci(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let gt=!1,ki=!1;function Ai(){gt=!0}const Br=1,Pr=2,Tn=4,Li=8,Ei=16,Di=1,Mi=2,Oi=4,Ui=8,Bi=16,Pi=1,Ii=2,_e=Symbol(),Fi="http://www.w3.org/1999/xhtml";function ir(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ee=null;function Zr(e){ee=e}function bt(e,t=!1,n){var i=ee={p:ee,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};gt&&!t&&(ee.l={s:null,u:null,r1:[],r2:Ot(!1)}),Fr(()=>{i.d=!0})}function wt(e){const t=ee;if(t!==null){const c=t.e;if(c!==null){var n=ne,i=re;t.e=null;try{for(var o=0;o<c.length;o++){var a=c[o];st(a.effect),ze(a.reaction),Nr(a.fn)}}finally{st(n),ze(i)}}ee=t.p,t.m=!0}return{}}function It(){return!gt||ee!==null&&ee.l===null}function Ze(e){if(typeof e!="object"||e===null||nt in e)return e;const t=Mr(e);if(t!==di&&t!==ci)return e;var n=new Map,i=Pt(e),o=Ke(0),a=re,c=f=>{var v=re;ze(a);var g=f();return ze(v),g};return i&&n.set("length",Ke(e.length)),new Proxy(e,{defineProperty(f,v,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&xi();var _=n.get(v);return _===void 0?(_=c(()=>Ke(g.value)),n.set(v,_)):X(_,c(()=>Ze(g.value))),!0},deleteProperty(f,v){var g=n.get(v);if(g===void 0)v in f&&(n.set(v,c(()=>Ke(_e))),mr(o));else{if(i&&typeof v=="string"){var _=n.get("length"),x=Number(v);Number.isInteger(x)&&x<_.v&&X(_,x)}X(g,_e),mr(o)}return!0},get(f,v,g){var E;if(v===nt)return e;var _=n.get(v),x=v in f;if(_===void 0&&(!x||(E=tt(f,v))!=null&&E.writable)&&(_=c(()=>Ke(Ze(x?f[v]:_e))),n.set(v,_)),_!==void 0){var w=O(_);return w===_e?void 0:w}return Reflect.get(f,v,g)},getOwnPropertyDescriptor(f,v){var g=Reflect.getOwnPropertyDescriptor(f,v);if(g&&"value"in g){var _=n.get(v);_&&(g.value=O(_))}else if(g===void 0){var x=n.get(v),w=x==null?void 0:x.v;if(x!==void 0&&w!==_e)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return g},has(f,v){var w;if(v===nt)return!0;var g=n.get(v),_=g!==void 0&&g.v!==_e||Reflect.has(f,v);if(g!==void 0||ne!==null&&(!_||(w=tt(f,v))!=null&&w.writable)){g===void 0&&(g=c(()=>Ke(_?Ze(f[v]):_e)),n.set(v,g));var x=O(g);if(x===_e)return!1}return _},set(f,v,g,_){var N;var x=n.get(v),w=v in f;if(i&&v==="length")for(var E=g;E<x.v;E+=1){var C=n.get(E+"");C!==void 0?X(C,_e):E in f&&(C=c(()=>Ke(_e)),n.set(E+"",C))}x===void 0?(!w||(N=tt(f,v))!=null&&N.writable)&&(x=c(()=>Ke(void 0)),X(x,c(()=>Ze(g))),n.set(v,x)):(w=x.v!==_e,X(x,c(()=>Ze(g))));var H=Reflect.getOwnPropertyDescriptor(f,v);if(H!=null&&H.set&&H.set.call(_,g),!w){if(i&&typeof v=="string"){var Y=n.get("length"),K=Number(v);Number.isInteger(K)&&K>=Y.v&&X(Y,K+1)}mr(o)}return!0},ownKeys(f){O(o);var v=Reflect.ownKeys(f).filter(x=>{var w=n.get(x);return w===void 0||w.v!==_e});for(var[g,_]of n)_.v!==_e&&!(g in f)&&v.push(g);return v},setPrototypeOf(){Ti()}})}function mr(e,t=1){X(e,e.v+t)}function Dt(e){var t=Fe|qe,n=re!==null&&(re.f&Fe)!==0?re:null;return ne===null||n!==null&&(n.f&Ae)!==0?t|=Ae:ne.f|=_n,{ctx:ee,deps:null,effects:null,equals:Sn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ne}}function Cn(e){const t=Dt(e);return t.equals=Ur,t}function kn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)at(t[n])}}function Ni(e){for(var t=e.parent;t!==null;){if((t.f&Fe)===0)return t;t=t.parent}return null}function An(e){var t,n=ne;st(Ni(e));try{kn(e),t=$n(e)}finally{st(n)}return t}function Ln(e){var t=An(e),n=(et||(e.f&Ae)!==0)&&e.deps!==null?ut:ye;Be(e,n),e.equals(t)||(e.v=t,e.wv=zn())}const Mt=new Map;function Ot(e,t){var n={f:0,v:e,reactions:null,equals:Sn,rv:0,wv:0};return n}function Ke(e,t){const n=Ot(e);return Qi(n),n}function Ue(e,t=!1){var i;const n=Ot(e);return t||(n.equals=Ur),gt&&ee!==null&&ee.l!==null&&((i=ee.l).s??(i.s=[])).push(n),n}function gr(e,t){return X(e,Ne(()=>O(e))),t}function X(e,t,n=!1){re!==null&&!Ve&&It()&&(re.f&(Fe|Or))!==0&&!(we!=null&&we.includes(e))&&Ci();let i=n?Ze(t):t;return Sr(e,i)}function Sr(e,t){if(!e.equals(t)){var n=e.v;Ft?Mt.set(e,t):Mt.set(e,n),e.v=t,(e.f&Fe)!==0&&((e.f&qe)!==0&&An(e),Be(e,(e.f&Ae)===0?ye:ut)),e.wv=zn(),En(e,qe),It()&&ne!==null&&(ne.f&ye)!==0&&(ne.f&(Je|mt))===0&&(Oe===null?Ji([e]):Oe.push(e))}return t}function En(e,t){var n=e.reactions;if(n!==null)for(var i=It(),o=n.length,a=0;a<o;a++){var c=n[a],f=c.f;(f&qe)===0&&(!i&&c===ne||(Be(c,t),(f&(ye|Ae))!==0&&((f&Fe)!==0?En(c,ut):fr(c))))}}let ji=!1;var en,Dn,Mn,On;function Wi(){if(en===void 0){en=window,Dn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Mn=tt(t,"firstChild").get,On=tt(t,"nextSibling").get,Xr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Xr(n)&&(n.__t=void 0)}}function Ir(e=""){return document.createTextNode(e)}function $t(e){return Mn.call(e)}function or(e){return On.call(e)}function ae(e,t){return $t(e)}function kt(e,t){{var n=$t(e);return n instanceof Comment&&n.data===""?or(n):n}}function Re(e,t=1,n=!1){let i=e;for(;t--;)i=or(i);return i}function Vi(e){e.textContent=""}function Un(e){ne===null&&re===null&&yi(),re!==null&&(re.f&Ae)!==0&&ne===null&&wi(),Ft&&bi()}function qi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function yt(e,t,n,i=!0){var o=ne,a={ctx:ee,deps:null,nodes_start:null,nodes_end:null,f:e|qe,first:null,fn:t,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(n)try{ur(a),a.f|=hi}catch(v){throw at(a),v}else t!==null&&fr(a);var c=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(_n|zt))===0;if(!c&&i&&(o!==null&&qi(a,o),re!==null&&(re.f&Fe)!==0)){var f=re;(f.effects??(f.effects=[])).push(a)}return a}function Fr(e){const t=yt(tr,null,!1);return Be(t,ye),t.teardown=e,t}function xr(e){Un();var t=ne!==null&&(ne.f&Je)!==0&&ee!==null&&!ee.m;if(t){var n=ee;(n.e??(n.e=[])).push({fn:e,effect:ne,reaction:re})}else{var i=Nr(e);return i}}function zi(e){return Un(),_t(e)}function Gi(e){const t=yt(mt,e,!0);return(n={})=>new Promise(i=>{n.outro?Ut(t,()=>{at(t),i(void 0)}):(at(t),i(void 0))})}function Nr(e){return yt(yn,e,!1)}function Bn(e,t){var n=ee,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=_t(()=>{e(),!i.ran&&(i.ran=!0,X(n.l.r2,!0),Ne(t))})}function Pn(){var e=ee;_t(()=>{if(O(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&ye)!==0&&Be(n,ut),Rt(n)&&ur(n),t.ran=!1}e.l.r2.v=!1}})}function _t(e){return yt(tr,e,!0)}function lt(e,t=[],n=Dt){const i=t.map(n);return ar(()=>e(...i.map(O)))}function ar(e,t=0){return yt(tr|Or|t,e,!0)}function ht(e,t=!0){return yt(tr|Je,e,!0,t)}function In(e){var t=e.teardown;if(t!==null){const n=Ft,i=re;tn(!0),ze(null);try{t.call(null)}finally{tn(n),ze(i)}}}function Fn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;(n.f&mt)!==0?n.parent=null:at(n,t),n=i}}function $i(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Je)===0&&at(t),t=n}}function at(e,t=!0){var n=!1;(t||(e.f&mi)!==0)&&e.nodes_start!==null&&(Hi(e.nodes_start,e.nodes_end),n=!0),Fn(e,t&&!n),Jt(e,0),Be(e,rr);var i=e.transitions;if(i!==null)for(const a of i)a.stop();In(e);var o=e.parent;o!==null&&o.first!==null&&Nn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Hi(e,t){for(;e!==null;){var n=e===t?null:or(e);e.remove(),e=n}}function Nn(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Ut(e,t){var n=[];jr(e,n,!0),jn(n,()=>{at(e),t&&t()})}function jn(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var o of e)o.out(i)}else t()}function jr(e,t,n){if((e.f&Qe)===0){if(e.f^=Qe,e.transitions!==null)for(const c of e.transitions)(c.is_global||n)&&t.push(c);for(var i=e.first;i!==null;){var o=i.next,a=(i.f&nr)!==0||(i.f&Je)!==0;jr(i,t,a?n:!1),i=o}}}function Ht(e){Wn(e,!0)}function Wn(e,t){if((e.f&Qe)!==0){e.f^=Qe,(e.f&ye)===0&&(e.f^=ye),Rt(e)&&(Be(e,qe),fr(e));for(var n=e.first;n!==null;){var i=n.next,o=(n.f&nr)!==0||(n.f&Je)!==0;Wn(n,o?t:!1),n=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Bt=[],Tr=[];function Vn(){var e=Bt;Bt=[],Et(e)}function Yi(){var e=Tr;Tr=[],Et(e)}function Wr(e){Bt.length===0&&queueMicrotask(Vn),Bt.push(e)}function Ki(){Bt.length>0&&Vn(),Tr.length>0&&Yi()}let qt=!1,Yt=!1,Kt=null,dt=!1,Ft=!1;function tn(e){Ft=e}let At=[];let re=null,Ve=!1;function ze(e){re=e}let ne=null;function st(e){ne=e}let we=null;function Qi(e){re!==null&&re.f&Rr&&(we===null?we=[e]:we.push(e))}let be=null,ke=0,Oe=null;function Ji(e){Oe=e}let qn=1,Qt=0,et=!1;function zn(){return++qn}function Rt(e){var x;var t=e.f;if((t&qe)!==0)return!0;if((t&ut)!==0){var n=e.deps,i=(t&Ae)!==0;if(n!==null){var o,a,c=(t&Gt)!==0,f=i&&ne!==null&&!et,v=n.length;if(c||f){var g=e,_=g.parent;for(o=0;o<v;o++)a=n[o],(c||!((x=a==null?void 0:a.reactions)!=null&&x.includes(g)))&&(a.reactions??(a.reactions=[])).push(g);c&&(g.f^=Gt),f&&_!==null&&(_.f&Ae)===0&&(g.f^=Ae)}for(o=0;o<v;o++)if(a=n[o],Rt(a)&&Ln(a),a.wv>e.wv)return!0}(!i||ne!==null&&!et)&&Be(e,ye)}return!1}function Xi(e,t){for(var n=t;n!==null;){if((n.f&zt)!==0)try{n.fn(e);return}catch{n.f^=zt}n=n.parent}throw qt=!1,e}function rn(e){return(e.f&rr)===0&&(e.parent===null||(e.parent.f&zt)===0)}function sr(e,t,n,i){if(qt){if(n===null&&(qt=!1),rn(t))throw e;return}if(n!==null&&(qt=!0),Xi(e,t),rn(t))throw e}function Gn(e,t,n=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];we!=null&&we.includes(e)||((a.f&Fe)!==0?Gn(a,t,!1):t===a&&(n?Be(a,qe):(a.f&ye)!==0&&Be(a,ut),fr(a)))}}function $n(e){var E;var t=be,n=ke,i=Oe,o=re,a=et,c=we,f=ee,v=Ve,g=e.f;be=null,ke=0,Oe=null,et=(g&Ae)!==0&&(Ve||!dt||re===null),re=(g&(Je|mt))===0?e:null,we=null,Zr(e.ctx),Ve=!1,Qt++,e.f|=Rr;try{var _=(0,e.fn)(),x=e.deps;if(be!==null){var w;if(Jt(e,ke),x!==null&&ke>0)for(x.length=ke+be.length,w=0;w<be.length;w++)x[ke+w]=be[w];else e.deps=x=be;if(!et)for(w=ke;w<x.length;w++)((E=x[w]).reactions??(E.reactions=[])).push(e)}else x!==null&&ke<x.length&&(Jt(e,ke),x.length=ke);if(It()&&Oe!==null&&!Ve&&x!==null&&(e.f&(Fe|ut|qe))===0)for(w=0;w<Oe.length;w++)Gn(Oe[w],e);return o!==null&&o!==e&&(Qt++,Oe!==null&&(i===null?i=Oe:i.push(...Oe))),_}finally{be=t,ke=n,Oe=i,re=o,et=a,we=c,Zr(f),Ve=v,e.f^=Rr}}function Zi(e,t){let n=t.reactions;if(n!==null){var i=li.call(n,e);if(i!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[i]=n[o],n.pop())}}n===null&&(t.f&Fe)!==0&&(be===null||!be.includes(t))&&(Be(t,ut),(t.f&(Ae|Gt))===0&&(t.f^=Gt),kn(t),Jt(t,0))}function Jt(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Zi(e,n[i])}function ur(e){var t=e.f;if((t&rr)===0){Be(e,ye);var n=ne,i=ee,o=dt;ne=e,dt=!0;try{(t&Or)!==0?$i(e):Fn(e),In(e);var a=$n(e);e.teardown=typeof a=="function"?a:null,e.wv=qn;var c=e.deps,f;Jr&&ki&&e.f&qe}catch(v){sr(v,e,n,i||e.ctx)}finally{dt=o,ne=n}}}function eo(){try{_i()}catch(e){if(Kt!==null)sr(e,Kt,null);else throw e}}function Hn(){var e=dt;try{var t=0;for(dt=!0;At.length>0;){t++>1e3&&eo();var n=At,i=n.length;At=[];for(var o=0;o<i;o++){var a=ro(n[o]);to(a)}Mt.clear()}}finally{Yt=!1,dt=e,Kt=null}}function to(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if((i.f&(rr|Qe))===0)try{Rt(i)&&(ur(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Nn(i):i.fn=null))}catch(o){sr(o,i,null,i.ctx)}}}function fr(e){Yt||(Yt=!0,queueMicrotask(Hn));for(var t=Kt=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(mt|Je))!==0){if((n&ye)===0)return;t.f^=ye}}At.push(t)}function ro(e){for(var t=[],n=e;n!==null;){var i=n.f,o=(i&(Je|mt))!==0,a=o&&(i&ye)!==0;if(!a&&(i&Qe)===0){if((i&yn)!==0)t.push(n);else if(o)n.f^=ye;else try{Rt(n)&&ur(n)}catch(v){sr(v,n,null,n.ctx)}var c=n.first;if(c!==null){n=c;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}return t}function no(e){for(var t;;){if(Ki(),At.length===0)return t;Yt=!0,Hn()}}async function io(){await Promise.resolve(),no()}function O(e){var t=e.f,n=(t&Fe)!==0;if(re!==null&&!Ve){if(!(we!=null&&we.includes(e))){var i=re.deps;e.rv<Qt&&(e.rv=Qt,be===null&&i!==null&&i[ke]===e?ke++:be===null?be=[e]:(!et||!be.includes(e))&&be.push(e))}}else if(n&&e.deps===null&&e.effects===null){var o=e,a=o.parent;a!==null&&(a.f&Ae)===0&&(o.f^=Ae)}return n&&(o=e,Rt(o)&&Ln(o)),Ft&&Mt.has(e)?Mt.get(e):e.v}function Ne(e){var t=Ve;try{return Ve=!0,e()}finally{Ve=t}}const oo=-7169;function Be(e,t){e.f=e.f&oo|t}function Vr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(nt in e)Cr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&nt in n&&Cr(n)}}}function Cr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Cr(e[i],t)}catch{}const n=Mr(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=wn(n);for(let o in i){const a=i[o].get;if(a)try{a.call(e)}catch{}}}}}const ao=["touchstart","touchmove"];function so(e){return ao.includes(e)}let nn=!1;function uo(){nn||(nn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Yn(e){var t=re,n=ne;ze(null),st(null);try{return e()}finally{ze(t),st(n)}}function Kn(e,t,n,i=n){e.addEventListener(t,()=>Yn(n));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),uo()}const Qn=new Set,kr=new Set;function fo(e,t,n,i={}){function o(a){if(i.capture||Ct.call(t,a),!a.cancelBubble)return Yn(()=>n==null?void 0:n.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Wr(()=>{t.addEventListener(e,o,i)}):t.addEventListener(e,o,i),o}function Xt(e,t,n,i,o){var a={capture:i,passive:o},c=fo(e,t,n,a);(t===document.body||t===window||t===document)&&Fr(()=>{t.removeEventListener(e,c,a)})}function lo(e){for(var t=0;t<e.length;t++)Qn.add(e[t]);for(var n of kr)n(e)}function Ct(e){var N;var t=this,n=t.ownerDocument,i=e.type,o=((N=e.composedPath)==null?void 0:N.call(e))||[],a=o[0]||e.target,c=0,f=e.__root;if(f){var v=o.indexOf(f);if(v!==-1&&(t===document||t===window)){e.__root=t;return}var g=o.indexOf(t);if(g===-1)return;v<=g&&(c=v)}if(a=o[c]||e.target,a!==t){bn(e,"currentTarget",{configurable:!0,get(){return a||n}});var _=re,x=ne;ze(null),st(null);try{for(var w,E=[];a!==null;){var C=a.assignedSlot||a.parentNode||a.host||null;try{var H=a["__"+i];if(H!=null&&(!a.disabled||e.target===a))if(Pt(H)){var[Y,...K]=H;Y.apply(a,[e,...K])}else H.call(a,e)}catch(q){w?E.push(q):w=q}if(e.cancelBubble||C===t||C===null)break;a=C}if(w){for(let q of E)queueMicrotask(()=>{throw q});throw w}}finally{e.__root=t,delete e.currentTarget,ze(_),st(x)}}}function co(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Ar(e,t){var n=ne;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Se(e,t){var n=(t&Pi)!==0,i=(t&Ii)!==0,o,a=!e.startsWith("<!>");return()=>{o===void 0&&(o=co(a?e:"<!>"+e),n||(o=$t(o)));var c=i||Dn?document.importNode(o,!0):o.cloneNode(!0);if(n){var f=$t(c),v=c.lastChild;Ar(f,v)}else Ar(c,c);return c}}function br(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ir();return e.append(t,n),Ar(t,n),e}function ve(e,t){e!==null&&e.before(t)}function pt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function vo(e,t){return ho(e,t)}const ct=new Map;function ho(e,{target:t,anchor:n,props:i={},events:o,context:a,intro:c=!0}){Wi();var f=new Set,v=x=>{for(var w=0;w<x.length;w++){var E=x[w];if(!f.has(E)){f.add(E);var C=so(E);t.addEventListener(E,Ct,{passive:C});var H=ct.get(E);H===void 0?(document.addEventListener(E,Ct,{passive:C}),ct.set(E,1)):ct.set(E,H+1)}}};v(Dr(Qn)),kr.add(v);var g=void 0,_=Gi(()=>{var x=n??t.appendChild(Ir());return ht(()=>{if(a){bt({});var w=ee;w.c=a}o&&(i.$$events=o),g=e(x,i)||{},a&&wt()}),()=>{var C;for(var w of f){t.removeEventListener(w,Ct);var E=ct.get(w);--E===0?(document.removeEventListener(w,Ct),ct.delete(w)):ct.set(w,E)}kr.delete(v),x!==n&&((C=x.parentNode)==null||C.removeChild(x))}});return po.set(g,_),g}let po=new WeakMap;function it(e,t,[n,i]=[0,0]){var o=e,a=null,c=null,f=_e,v=n>0?nr:0,g=!1;const _=(w,E=!0)=>{g=!0,x(E,w)},x=(w,E)=>{f!==(f=w)&&(f?(a?Ht(a):E&&(a=ht(()=>E(o))),c&&Ut(c,()=>{c=null})):(c?Ht(c):E&&(c=ht(()=>E(o,[n+1,i]))),a&&Ut(a,()=>{a=null})))};ar(()=>{g=!1,t(_),g||x(null,null)},v)}function qr(e,t){return t}function mo(e,t,n,i){for(var o=[],a=t.length,c=0;c<a;c++)jr(t[c].e,o,!0);var f=a>0&&o.length===0&&n!==null;if(f){var v=n.parentNode;Vi(v),v.append(n),i.clear(),Xe(e,t[0].prev,t[a-1].next)}jn(o,()=>{for(var g=0;g<a;g++){var _=t[g];f||(i.delete(_.k),Xe(e,_.prev,_.next)),at(_.e,!f)}})}function zr(e,t,n,i,o,a=null){var c=e,f={flags:t,items:new Map,first:null},v=(t&Tn)!==0;if(v){var g=e;c=g.appendChild(Ir())}var _=null,x=!1,w=Cn(()=>{var E=n();return Pt(E)?E:E==null?[]:Dr(E)});ar(()=>{var E=O(w),C=E.length;x&&C===0||(x=C===0,go(E,f,c,o,t,i,n),a!==null&&(C===0?_?Ht(_):_=ht(()=>a(c)):_!==null&&Ut(_,()=>{_=null})),O(w))})}function go(e,t,n,i,o,a,c){var se,he,xe,Le;var f=(o&Li)!==0,v=(o&(Br|Pr))!==0,g=e.length,_=t.items,x=t.first,w=x,E,C=null,H,Y=[],K=[],N,q,L,M;if(f)for(M=0;M<g;M+=1)N=e[M],q=a(N,M),L=_.get(q),L!==void 0&&((se=L.a)==null||se.measure(),(H??(H=new Set)).add(L));for(M=0;M<g;M+=1){if(N=e[M],q=a(N,M),L=_.get(q),L===void 0){var V=w?w.e.nodes_start:n;C=wo(V,t,C,C===null?t.first:C.next,N,q,M,i,o,c),_.set(q,C),Y=[],K=[],w=C.next;continue}if(v&&bo(L,N,M,o),(L.e.f&Qe)!==0&&(Ht(L.e),f&&((he=L.a)==null||he.unfix(),(H??(H=new Set)).delete(L))),L!==w){if(E!==void 0&&E.has(L)){if(Y.length<K.length){var R=K[0],j;C=R.prev;var z=Y[0],te=Y[Y.length-1];for(j=0;j<Y.length;j+=1)on(Y[j],R,n);for(j=0;j<K.length;j+=1)E.delete(K[j]);Xe(t,z.prev,te.next),Xe(t,C,z),Xe(t,te,R),w=R,C=te,M-=1,Y=[],K=[]}else E.delete(L),on(L,w,n),Xe(t,L.prev,L.next),Xe(t,L,C===null?t.first:C.next),Xe(t,C,L),C=L;continue}for(Y=[],K=[];w!==null&&w.k!==q;)(w.e.f&Qe)===0&&(E??(E=new Set)).add(w),K.push(w),w=w.next;if(w===null)continue;L=w}Y.push(L),C=L,w=L.next}if(w!==null||E!==void 0){for(var oe=E===void 0?[]:Dr(E);w!==null;)(w.e.f&Qe)===0&&oe.push(w),w=w.next;var le=oe.length;if(le>0){var de=(o&Tn)!==0&&g===0?n:null;if(f){for(M=0;M<le;M+=1)(xe=oe[M].a)==null||xe.measure();for(M=0;M<le;M+=1)(Le=oe[M].a)==null||Le.fix()}mo(t,oe,de,_)}}f&&Wr(()=>{var Te;if(H!==void 0)for(L of H)(Te=L.a)==null||Te.apply()}),ne.first=t.first&&t.first.e,ne.last=C&&C.e}function bo(e,t,n,i){(i&Br)!==0&&Sr(e.v,t),(i&Pr)!==0?Sr(e.i,n):e.i=n}function wo(e,t,n,i,o,a,c,f,v,g){var _=(v&Br)!==0,x=(v&Ei)===0,w=_?x?Ue(o):Ot(o):o,E=(v&Pr)===0?c:Ot(c),C={i:E,v:w,k:a,a:null,e:null,prev:n,next:i};try{return C.e=ht(()=>f(e,w,E,g),ji),C.e.prev=n&&n.e,C.e.next=i&&i.e,n===null?t.first=C:(n.next=C,n.e.next=C.e),i!==null&&(i.prev=C,i.e.prev=C.e),C}finally{}}function on(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==i;){var c=or(a);o.before(a),a=c}}function Xe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function an(e,t,n){var i=e,o,a;ar(()=>{o!==(o=t())&&(a&&(Ut(a),a=null),o&&(a=ht(()=>n(i,o))))},nr)}function yo(e,t,n){var i=e==null?"":""+e;return i===""?null:i}function Jn(e,t,n,i,o,a){var c=e.__className;if(c!==n||c===void 0){var f=yo(n);f==null?e.removeAttribute("class"):e.className=f,e.__className=n}return a}const _o=Symbol("is custom element"),Ro=Symbol("is html");function sn(e,t,n,i){var o=So(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[gi]=n),n==null?e.removeAttribute(t):typeof n!="string"&&xo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function So(e){return e.__attributes??(e.__attributes={[_o]:e.nodeName.includes("-"),[Ro]:e.namespaceURI===Fi})}var un=new Map;function xo(e){var t=un.get(e.nodeName);if(t)return t;un.set(e.nodeName,t=[]);for(var n,i=e,o=Element.prototype;o!==i;){n=wn(i);for(var a in n)n[a].set&&t.push(a);i=Mr(i)}return t}function Lr(e,t,n=t){var i=It();Kn(e,"input",o=>{var a=o?e.defaultValue:e.value;if(a=wr(e)?yr(a):a,n(a),i&&a!==(a=t())){var c=e.selectionStart,f=e.selectionEnd;e.value=a??"",f!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(f,e.value.length))}}),Ne(t)==null&&e.value&&n(wr(e)?yr(e.value):e.value),_t(()=>{var o=t();wr(e)&&o===yr(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function To(e,t,n=t){Kn(e,"change",i=>{var o=i?e.defaultChecked:e.checked;n(o)}),Ne(t)==null&&n(e.checked),_t(()=>{var i=t();e.checked=!!i})}function wr(e){var t=e.type;return t==="number"||t==="range"}function yr(e){return e===""?null:+e}function fn(e,t){return e===t||(e==null?void 0:e[nt])===t}function Co(e={},t,n,i){return Nr(()=>{var o,a;return _t(()=>{o=a,a=[],Ne(()=>{e!==n(...a)&&(t(e,...a),o&&fn(n(...o),e)&&t(null,...o))})}),()=>{Wr(()=>{a&&fn(n(...a),e)&&t(null,...a)})}}),e}function ko(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function lr(e=!1){const t=ee,n=t.l.u;if(!n)return;let i=()=>Vr(t.s);if(e){let o=0,a={};const c=Dt(()=>{let f=!1;const v=t.s;for(const g in v)v[g]!==a[g]&&(a[g]=v[g],f=!0);return f&&o++,o});i=()=>O(c)}n.b.length&&zi(()=>{ln(t,i),Et(n.b)}),xr(()=>{const o=Ne(()=>n.m.map(vi));return()=>{for(const a of o)typeof a=="function"&&a()}}),n.a.length&&xr(()=>{ln(t,i),Et(n.a)})}function ln(e,t){if(e.l.s)for(const n of e.l.s)O(n);t()}function dn(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],i=Pt(n)?n.slice():n==null?[]:[n];for(var o of i)o.call(this,t)}function Gr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),rt;const i=Ne(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}const vt=[];function Xn(e,t){return{subscribe:dr(e,t).subscribe}}function dr(e,t=rt){let n=null;const i=new Set;function o(f){if(xn(e,f)&&(e=f,n)){const v=!vt.length;for(const g of i)g[1](),vt.push(g,e);if(v){for(let g=0;g<vt.length;g+=2)vt[g][0](vt[g+1]);vt.length=0}}}function a(f){o(f(e))}function c(f,v=rt){const g=[f,v];return i.add(g),i.size===1&&(n=t(o,a)||rt),f(e),()=>{i.delete(g),i.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:c}}function Zn(e,t,n){const i=!Array.isArray(e),o=i?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Xn(n,(c,f)=>{let v=!1;const g=[];let _=0,x=rt;const w=()=>{if(_)return;x();const C=t(i?g[0]:g,c,f);a?c(C):x=typeof C=="function"?C:rt},E=o.map((C,H)=>Gr(C,Y=>{g[H]=Y,_&=~(1<<H),v&&w()},()=>{_|=1<<H}));return v=!0,w(),function(){Et(E),x(),v=!1}})}function Ao(e){let t;return Gr(e,n=>t=n)(),t}let Vt=!1,Er=Symbol();function Zt(e,t,n){const i=n[t]??(n[t]={store:null,source:Ue(void 0),unsubscribe:rt});if(i.store!==e&&!(Er in n))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=rt;else{var o=!0;i.unsubscribe=Gr(e,a=>{o?i.source.v=a:X(i.source,a)}),o=!1}return e&&Er in n?Ao(e):O(i.source)}function $r(){const e={};function t(){Fr(()=>{for(var n in e)e[n].unsubscribe();bn(e,Er,{enumerable:!1,value:!0})})}return[e,t]}function Lo(e){var t=Vt;try{return Vt=!1,[e(),Vt]}finally{Vt=t}}const Eo={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Tt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let o=e.props[i];Tt(o)&&(o=o());const a=tt(o,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Tt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const o=tt(i,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===nt||t===Rn)return!1;for(let n of e.props)if(Tt(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Tt(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function cn(...e){return new Proxy({props:e},Eo)}function vn(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function ot(e,t,n,i){var V;var o=(n&Di)!==0,a=!gt||(n&Mi)!==0,c=(n&Ui)!==0,f=(n&Bi)!==0,v=!1,g;c?[g,v]=Lo(()=>e[t]):g=e[t];var _=nt in e||Rn in e,x=c&&(((V=tt(e,t))==null?void 0:V.set)??(_&&t in e&&(R=>e[t]=R)))||void 0,w=i,E=!0,C=!1,H=()=>(C=!0,E&&(E=!1,f?w=Ne(i):w=i),w);g===void 0&&i!==void 0&&(x&&a&&Si(),g=H(),x&&x(g));var Y;if(a)Y=()=>{var R=e[t];return R===void 0?H():(E=!0,C=!1,R)};else{var K=(o?Dt:Cn)(()=>e[t]);K.f|=pi,Y=()=>{var R=O(K);return R!==void 0&&(w=void 0),R===void 0?w:R}}if((n&Oi)===0)return Y;if(x){var N=e.$$legacy;return function(R,j){return arguments.length>0?((!a||!j||N||v)&&x(j?Y():R),R):Y()}}var q=!1,L=Ue(g),M=Dt(()=>{var R=Y(),j=O(L);return q?(q=!1,j):L.v=R});return c&&O(M),o||(M.equals=Ur),function(R,j){if(arguments.length>0){const z=j?O(M):a&&c?Ze(R):R;if(!M.equals(z)){if(q=!0,X(L,z),C&&w!==void 0&&(w=z),vn(M))return R;Ne(()=>O(M))}return R}return vn(M)?M.v:O(M)}}function Hr(e){ee===null&&ir(),gt&&ee.l!==null?ti(ee).m.push(e):xr(()=>{const t=Ne(e);if(typeof t=="function")return t})}function ei(e){ee===null&&ir(),Hr(()=>()=>Ne(e))}function Do(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function Mo(){const e=ee;return e===null&&ir(),(t,n,i)=>{var a;const o=(a=e.s.$$events)==null?void 0:a[t];if(o){const c=Pt(o)?o.slice():[o],f=Do(t,n,i);for(const v of c)v.call(e.x,f);return!f.defaultPrevented}return!0}}function Oo(e){ee===null&&ir(),ee.l===null&&Ri(),ti(ee).a.push(e)}function ti(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Uo="5";var gn;typeof window<"u"&&((gn=window.__svelte??(window.__svelte={})).v??(gn.v=new Set)).add(Uo);Ai();function Bo(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,i,o,a,c=[],f="",v=e.split("/");for(v[0]||v.shift();o=v.shift();)n=o[0],n==="*"?(c.push("wild"),f+="/(.*)"):n===":"?(i=o.indexOf("?",1),a=o.indexOf(".",1),c.push(o.substring(1,~i?i:~a?a:o.length)),f+=~i&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(f+=(~i?"?":"")+"\\"+o.substring(a))):f+="/"+o;return{keys:c,pattern:new RegExp("^"+f+"/?$","i")}}function hn(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let i="";return n>-1&&(i=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:i}}const Yr=Xn(null,function(t){t(hn());const n=()=>{t(hn())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Zn(Yr,e=>e.location);Zn(Yr,e=>e.querystring);const pn=dr(void 0);function Po(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Io(e,t){bt(t,!1);let n=ot(t,"routes",24,()=>({})),i=ot(t,"prefix",8,""),o=ot(t,"restoreScrollState",8,!1);class a{constructor(V,R){if(!R||typeof R!="function"&&(typeof R!="object"||R._sveltesparouter!==!0))throw Error("Invalid component object");if(!V||typeof V=="string"&&(V.length<1||V.charAt(0)!="/"&&V.charAt(0)!="*")||typeof V=="object"&&!(V instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:j,keys:z}=Bo(V);this.path=V,typeof R=="object"&&R._sveltesparouter===!0?(this.component=R.component,this.conditions=R.conditions||[],this.userData=R.userData,this.props=R.props||{}):(this.component=()=>Promise.resolve(R),this.conditions=[],this.props={}),this._pattern=j,this._keys=z}match(V){if(i()){if(typeof i()=="string")if(V.startsWith(i()))V=V.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const te=V.match(i());if(te&&te[0])V=V.substr(te[0].length)||"/";else return null}}const R=this._pattern.exec(V);if(R===null)return null;if(this._keys===!1)return R;const j={};let z=0;for(;z<this._keys.length;){try{j[this._keys[z]]=decodeURIComponent(R[z+1]||"")||null}catch{j[this._keys[z]]=null}z++}return j}async checkConditions(V){for(let R=0;R<this.conditions.length;R++)if(!await this.conditions[R](V))return!1;return!0}}const c=[];n()instanceof Map?n().forEach((M,V)=>{c.push(new a(V,M))}):Object.keys(n()).forEach(M=>{c.push(new a(M,n()[M]))});let f=Ue(null),v=Ue(null),g=Ue({});const _=Mo();async function x(M,V){await io(),_(M,V)}let w=null,E=null;o()&&(E=M=>{M.state&&(M.state.__svelte_spa_router_scrollY||M.state.__svelte_spa_router_scrollX)?w=M.state:w=null},window.addEventListener("popstate",E),Oo(()=>{Po(w)}));let C=null,H=null;const Y=Yr.subscribe(async M=>{C=M;let V=0;for(;V<c.length;){const R=c[V].match(M.location);if(!R){V++;continue}const j={route:c[V].path,location:M.location,querystring:M.querystring,userData:c[V].userData,params:R&&typeof R=="object"&&Object.keys(R).length?R:null};if(!await c[V].checkConditions(j)){X(f,null),H=null,x("conditionsFailed",j);return}x("routeLoading",Object.assign({},j));const z=c[V].component;if(H!=z){z.loading?(X(f,z.loading),H=z,X(v,z.loadingParams),X(g,{}),x("routeLoaded",Object.assign({},j,{component:O(f),name:O(f).name,params:O(v)}))):(X(f,null),H=null);const te=await z();if(M!=C)return;X(f,te&&te.default||te),H=z}R&&typeof R=="object"&&Object.keys(R).length?X(v,R):X(v,null),X(g,c[V].props),x("routeLoaded",Object.assign({},j,{component:O(f),name:O(f).name,params:O(v)})).then(()=>{pn.set(O(v))});return}X(f,null),H=null,pn.set(void 0)});ei(()=>{Y(),E&&window.removeEventListener("popstate",E)}),Bn(()=>Vr(o()),()=>{history.scrollRestoration=o()?"manual":"auto"}),Pn(),lr();var K=br(),N=kt(K);{var q=M=>{var V=br(),R=kt(V);an(R,()=>O(f),(j,z)=>{z(j,cn({get params(){return O(v)}},()=>O(g),{$$events:{routeEvent(te){dn.call(this,t,te)}}}))}),ve(M,V)},L=M=>{var V=br(),R=kt(V);an(R,()=>O(f),(j,z)=>{z(j,cn(()=>O(g),{$$events:{routeEvent(te){dn.call(this,t,te)}}}))}),ve(M,V)};it(N,M=>{O(v)?M(q):M(L,!1)})}ve(e,K),wt()}const Lt=dr(null);async function Fo(e,t){return new Promise(n=>{Lt.set({name:e,parameters:{...t},resolver:i=>n(i)})})}const er=dr(null);async function No(e,t,n){return new Promise(i=>{er.set({name:e,parameters:{...t},exceedLimit:n,resolver:o=>i(o)})})}var jo=Se('<input type="checkbox" class="h-5 w-5">'),Wo=Se('<input type="number" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),Vo=Se('<input type="text" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),qo=Se('<div class="mb-4"><span class="block mb-2 font-medium"> </span> <!></div>'),zo=Se('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-8 min-w-[320px] max-w-[90vw] shadow-lg"><h2 class="text-xl font-bold mb-6"> </h2> <form><!> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">Ï∑®ÏÜå</button> <button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">ÌôïÏù∏</button></div></form></div></div>');function Go(e,t){bt(t,!1);const[n,i]=$r(),o=()=>Zt(Lt,"$ApprovalModalStore",n);let a=ot(t,"name",8),c=ot(t,"parameters",8),f=Ue({});Hr(()=>{X(f,{...c()})});function v(){var q,L;const N={};for(const M in O(f)){const V=c()[M],R=O(f)[M];switch(typeof V){case"number":N[M]=Number(R);break;case"boolean":N[M]=!!R;break;default:N[M]=R}}(L=(q=o())==null?void 0:q.resolver)==null||L.call(q,N),Lt.set(null)}function g(){var N,q;(q=(N=o())==null?void 0:N.resolver)==null||q.call(N,null),Lt.set(null)}lr();var _=zo(),x=ae(_),w=ae(x),E=ae(w),C=Re(w,2),H=ae(C);zr(H,1,()=>Object.entries(O(f)),qr,(N,q)=>{let L=()=>O(q)[0];var M=qo(),V=ae(M),R=ae(V),j=Re(V,2);{var z=oe=>{var le=jo();To(le,()=>O(f)[L()],de=>gr(f,O(f)[L()]=de)),ve(oe,le)},te=(oe,le)=>{{var de=he=>{var xe=Wo();Lr(xe,()=>O(f)[L()],Le=>gr(f,O(f)[L()]=Le)),ve(he,xe)},se=he=>{var xe=Vo();Lr(xe,()=>O(f)[L()],Le=>gr(f,O(f)[L()]=Le)),ve(he,xe)};it(oe,he=>{typeof c()[L()]=="number"?he(de):he(se,!1)},le)}};it(j,oe=>{typeof c()[L()]=="boolean"?oe(z):oe(te,!1)})}lt(()=>pt(R,L())),ve(N,M)});var Y=Re(H,2),K=ae(Y);lt(()=>pt(E,a())),Xt("click",K,g),Xt("submit",C,ko(v)),ve(e,_),wt(),i()}var $o=Se('<div class="mb-4 text-red-600 font-semibold"> </div>'),Ho=Se('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-8 min-w-[320px] max-w-[90vw] shadow-lg"><h2 class="text-xl font-bold mb-6">ÎπÑÏ†ïÏÉÅÏ†Å ÏÜ°Í∏à Í∏àÏï°ÏûÖÎãàÎã§.</h2> <div class="mb-4"><!></div> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">ÌôïÏù∏</button></div></div></div>');function Yo(e,t){bt(t,!1);const[n,i]=$r(),o=()=>Zt(er,"$DepositWarningModalStore",n);ot(t,"name",8);let a=ot(t,"parameters",8),c=ot(t,"exceedLimit",8),f=Ue({});Hr(()=>{X(f,{...a()})});let v=Ue("");function g(){var K,N;(N=(K=o())==null?void 0:K.resolver)==null||N.call(K,null),er.set(null)}Bn(()=>(O(f),Vr(c())),()=>{O(f).amount!=null&&O(f).balance!=null&&O(f).amount>O(f).balance?X(v,`üí∏ ÌòÑÏû¨ Î≥¥Ïú† Í∏àÏï°(${O(f).balance.toLocaleString()}Ïõê)ÏùÑ Ï¥àÍ≥ºÌïòÏó¨ ${O(f).amount.toLocaleString()}ÏõêÏùÑ ÏÜ°Í∏àÌïòÎ†§Í≥† Ìï©ÎãàÎã§.`):O(f).amount!=null&&O(f).amount>=c()?X(v,`üí∏ Ï†úÌïú Í∏àÏï°(${c().toLocaleString()}Ïõê)ÏùÑ Ï¥àÍ≥ºÌïòÏó¨ ${O(f).amount.toLocaleString()}ÏõêÏùÑ ÏÜ°Í∏àÌïòÎ†§Í≥† Ìï©ÎãàÎã§.`):X(v,"")}),Pn(),lr();var _=Ho(),x=ae(_),w=Re(ae(x),2),E=ae(w);{var C=K=>{var N=$o(),q=ae(N);lt(()=>pt(q,O(v))),ve(K,N)};it(E,K=>{O(v)&&K(C)})}var H=Re(w,2),Y=ae(H);Xt("click",Y,g),ve(e,_),wt(),i()}const Ko=(e,t)=>e.key==="Enter"&&t();var Qo=Se('<span class="text-xs text-gray-500">[ÏãúÏä§ÌÖú]</span><br>',1),Jo=Se("<div><!> </div>"),Xo=Se('<div class="h-screen flex flex-col max-w-md mx-auto"><div class="flex-1 overflow-auto p-2 space-y-2"></div> <div class="flex gap-2 p-2 border-t"><input class="flex-1 px-3 py-2 border text-sm" placeholder="Î©îÏãúÏßÄ ÏûÖÎ†•"> <button class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200">Ï†ÑÏÜ°</button></div></div> <!> <!>',1);function Zo(e,t){bt(t,!0);const[n,i]=$r(),o=()=>Zt(Lt,"$ApprovalModalStore",n),a=()=>Zt(er,"$DepositWarningModalStore",n);let c=crypto.randomUUID(),f=Ze([{role:"assistant",content:"ÏïàÎÖïÌïòÏÑ∏Ïöî!"}]),v=Ke(""),g;async function _(R,j,z=!0){typeof R=="string"?f.push({role:"user",content:R}):f.push({role:"user",content:"APPROVAL_REQUIRED"});const te=await fetch("/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:j,query:R})});if(!te.body)return;const oe=te.body.getReader(),le=new TextDecoder;let de=null;for(;;){const{value:se,done:he}=await oe.read();if(he)break;const xe=le.decode(se);for(let Le of xe.split(`

`)){if(!Le.startsWith("data: "))continue;const Te=Le.slice(6);if(Te!=="[DONE]")if(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/.test(Te)){const je=Te.match(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/)[1];f.push({role:"assistant",content:je,type:"tool"})}else if(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/.test(Te))if(z){const[je,u,r]=Te.match(/\[APPROVAL_REQUIRED\](.*?):\s*(\{.*\})\[\/APPROVAL_REQUIRED\]/)||[];if(u&&r)return{name:u,parameters:JSON.parse(r)}}else{const je=Te.match(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/)[1];f.push({role:"assistant",content:je,type:"tool"})}else de?f[f.length-1].content=f[f.length-1].content+Te:(de={role:"assistant",content:Te},f.push(de))}}return setTimeout(()=>g==null?void 0:g.scrollTo({top:g.scrollHeight}),0),null}let x=5e4;async function w(){const R=O(v).trim(),j=await _(R,c);if(j)if(j.parameters.amount>=x)await No(j.name,j.parameters,x),await _({cancel:!0,tool_call_id:j.tool_call_id},c,!1);else{const z=await Fo(j.name,j.parameters);z?await _(z,c,!1):await _({cancel:!0,tool_call_id:j.tool_call_id},c,!1)}}var E=Xo(),C=kt(E),H=ae(C);zr(H,21,()=>f,qr,(R,j)=>{var z=Jo(),te=ae(z);{var oe=de=>{var se=Qo();ve(de,se)};it(te,de=>{O(j).type=="tool"&&de(oe)})}var le=Re(te);lt(()=>{Jn(z,1,`max-w-[85%] px-3 py-2 text-sm break-words
		${O(j).role==="user"?"ml-auto bg-gray-100":"mr-auto"}`),pt(le,` ${O(j).content??""}`)}),ve(R,z)}),Co(H,R=>g=R,()=>g);var Y=Re(H,2),K=ae(Y);K.__keydown=[Ko,w];var N=Re(K,2);N.__click=w;var q=Re(C,2);{var L=R=>{Go(R,{get name(){return o().name},get parameters(){return o().parameters}})};it(q,R=>{o()&&R(L)})}var M=Re(q,2);{var V=R=>{Yo(R,{get name(){return a().name},get parameters(){return a().parameters},exceedLimit:x})};it(M,R=>{a()&&R(V)})}Lr(K,()=>O(v),R=>X(v,R)),ve(e,E),wt(),i()}lo(["keydown","click"]);var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _r={exports:{}},mn;function ta(){return mn||(mn=1,function(e){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function t(u,r){if(!u)throw"First parameter is required.";r=r||{type:"video"},r=new n(u,r);var s=this;function p(h){return r.disableLogs||console.log("RecordRTC version: ",s.version),h&&(r=new n(u,h)),r.disableLogs||console.log("started recording "+r.type+" stream."),k?(k.clearRecordedData(),k.record(),P("recording"),s.recordingDuration&&T(),s):(b(function(){s.recordingDuration&&T()}),s)}function b(h){h&&(r.initCallback=function(){h(),h=r.initCallback=null});var B=new i(u,r);k=new B(u,r),k.record(),P("recording"),r.disableLogs||console.log("Initialized recorderType:",k.constructor.name,"for output-type:",r.type)}function m(h){if(h=h||function(){},!k){U();return}if(s.state==="paused"){s.resumeRecording(),setTimeout(function(){m(h)},1);return}s.state!=="recording"&&!r.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',s.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),r.type!=="gif"?k.stop(B):(k.stop(),B()),P("stopped");function B(G){if(!k){typeof h.call=="function"?h.call(s,""):h("");return}Object.keys(k).forEach(function(F){typeof k[F]!="function"&&(s[F]=k[F])});var d=k.blob;if(!d)if(G)k.blob=d=G;else throw"Recording failed.";if(d&&!r.disableLogs&&console.log(d.type,"->",K(d.size)),h){var y;try{y=_.createObjectURL(d)}catch{}typeof h.call=="function"?h.call(s,y):h(y)}r.autoWriteToDisk&&I(function(F){var W={};W[r.type+"Blob"]=F,se.Store(W)})}}function S(){if(!k){U();return}if(s.state!=="recording"){r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",s.state);return}P("paused"),k.pause(),r.disableLogs||console.log("Paused recording.")}function l(){if(!k){U();return}if(s.state!=="paused"){r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",s.state);return}P("recording"),k.resume(),r.disableLogs||console.log("Resumed recording.")}function A(h){postMessage(new FileReaderSync().readAsDataURL(h))}function I(h,B){if(!h)throw"Pass a callback function over getDataURL.";var G=B?B.blob:(k||{}).blob;if(!G){r.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){I(h,B)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var d=F(A);d.onmessage=function(W){h(W.data)},d.postMessage(G)}else{var y=new FileReader;y.readAsDataURL(G),y.onload=function(W){h(W.target.result)}}function F(W){try{var Z=_.createObjectURL(new Blob([W.toString(),"this.onmessage =  function (eee) {"+W.name+"(eee.data);}"],{type:"application/javascript"})),Q=new Worker(Z);return _.revokeObjectURL(Z),Q}catch{}}}function T(h){if(h=h||0,s.state==="paused"){setTimeout(function(){T(h)},1e3);return}if(s.state!=="stopped"){if(h>=s.recordingDuration){m(s.onRecordingStopped);return}h+=1e3,setTimeout(function(){T(h)},1e3)}}function P(h){s&&(s.state=h,typeof s.onStateChanged.call=="function"?s.onStateChanged.call(s,h):s.onStateChanged(h))}var D='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function U(){r.disableLogs!==!0&&console.warn(D)}var k,$={startRecording:p,stopRecording:m,pauseRecording:S,resumeRecording:l,initRecorder:b,setRecordingDuration:function(h,B){if(typeof h>"u")throw"recordingDuration is required.";if(typeof h!="number")throw"recordingDuration must be a number.";return s.recordingDuration=h,s.onRecordingStopped=B||function(){},{onRecordingStopped:function(G){s.onRecordingStopped=G}}},clearRecordedData:function(){if(!k){U();return}k.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!k){U();return}return k.blob},getDataURL:I,toURL:function(){if(!k){U();return}return _.createObjectURL(k.blob)},getInternalRecorder:function(){return k},save:function(h){if(!k){U();return}N(k.blob,h)},getFromDisk:function(h){if(!k){U();return}t.getFromDisk(r.type,h)},setAdvertisementArray:function(h){r.advertisement=[];for(var B=h.length,G=0;G<B;G++)r.advertisement.push({duration:G,image:h[G]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){s.state==="recording"&&!r.disableLogs&&console.warn("Stop an active recorder."),k&&typeof k.clearRecordedData=="function"&&k.clearRecordedData(),k=null,P("inactive"),s.blob=null},onStateChanged:function(h){r.disableLogs||console.log("Recorder state changed:",h)},state:"inactive",getState:function(){return s.state},destroy:function(){var h=r.disableLogs;r={disableLogs:!0},s.reset(),P("destroyed"),$=s=null,R.AudioContextConstructor&&(R.AudioContextConstructor.close(),R.AudioContextConstructor=null),r.disableLogs=h,r.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return s=$,$;for(var J in $)this[J]=$[J];return s=this,$}t.version="5.6.2",e.exports=t,t.getFromDisk=function(u,r){if(!r)throw"callback is mandatory.";console.log("Getting recorded "+(u==="all"?"blobs":u+" blob ")+" from disk!"),se.Fetch(function(s,p){u!=="all"&&p===u+"Blob"&&r&&r(s),u==="all"&&r&&r(s,p.replace("Blob",""))})},t.writeToDisk=function(u){console.log("Writing recorded blob(s) to disk!"),u=u||{},u.audio&&u.video&&u.gif?u.audio.getDataURL(function(r){u.video.getDataURL(function(s){u.gif.getDataURL(function(p){se.Store({audioBlob:r,videoBlob:s,gifBlob:p})})})}):u.audio&&u.video?u.audio.getDataURL(function(r){u.video.getDataURL(function(s){se.Store({audioBlob:r,videoBlob:s})})}):u.audio&&u.gif?u.audio.getDataURL(function(r){u.gif.getDataURL(function(s){se.Store({audioBlob:r,gifBlob:s})})}):u.video&&u.gif?u.video.getDataURL(function(r){u.gif.getDataURL(function(s){se.Store({videoBlob:r,gifBlob:s})})}):u.audio?u.audio.getDataURL(function(r){se.Store({audioBlob:r})}):u.video?u.video.getDataURL(function(r){se.Store({videoBlob:r})}):u.gif&&u.gif.getDataURL(function(r){se.Store({gifBlob:r})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(u,r){return!r.recorderType&&!r.type&&(r.audio&&r.video?r.type="video":r.audio&&!r.video&&(r.type="audio")),r.recorderType&&!r.type&&(r.recorderType===le||r.recorderType===oe||typeof je<"u"&&r.recorderType===je?r.type="video":r.recorderType===he?r.type="gif":r.recorderType===te?r.type="audio":r.recorderType===z&&(L(u,"audio").length&&L(u,"video").length||!L(u,"audio").length&&L(u,"video").length?r.type="video":L(u,"audio").length&&!L(u,"video").length&&(r.type="audio"))),typeof z<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(r.mimeType||(r.mimeType="video/webm"),r.type||(r.type=r.mimeType.split("/")[0]),r.bitsPerSecond),r.type||(r.mimeType&&(r.type=r.mimeType.split("/")[0]),r.type||(r.type="audio")),r}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(u,r){var s;return(C||x||w)&&(s=te),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!C&&(s=z),r.type==="video"&&(C||w)&&(s=le,typeof je<"u"&&typeof ReadableStream<"u"&&(s=je)),r.type==="gif"&&(s=he),r.type==="canvas"&&(s=oe),j()&&s!==oe&&s!==he&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(L(u,"video").length||L(u,"audio").length)&&(r.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(s=z):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(s=z)),u instanceof Array&&u.length&&(s=Le),r.recorderType&&(s=r.recorderType),!r.disableLogs&&s&&s.name&&console.log("Using recorderType:",s.name||s.constructor.name),!s&&H&&(s=z),s}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function o(u){this.addStream=function(r){r&&(u=r)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r=this.mediaType,s,p=this.mimeType||{audio:null,video:null,gif:null};if(typeof r.audio!="function"&&j()&&!L(u,"audio").length&&(r.audio=!1),typeof r.video!="function"&&j()&&!L(u,"video").length&&(r.video=!1),typeof r.gif!="function"&&j()&&!L(u,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(s=null,typeof r.audio=="function"&&(s=r.audio),this.audioRecorder=new t(u,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:s,mimeType:p.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){s=null,typeof r.video=="function"&&(s=r.video);var b=u;if(j()&&r.audio&&typeof r.audio=="function"){var m=L(u,"video")[0];E?(b=new Y,b.addTrack(m),s&&s===le&&(s=z)):(b=new Y,b.addTrack(m))}this.videoRecorder=new t(b,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:s,mimeType:p.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var S=this,l=j()===!0;(r.audio instanceof te&&r.video||r.audio!==!0&&r.video!==!0&&r.audio!==r.video)&&(l=!1),l===!0?(S.audioRecorder=null,S.videoRecorder.startRecording()):S.videoRecorder.initRecorder(function(){S.audioRecorder.initRecorder(function(){S.videoRecorder.startRecording(),S.audioRecorder.startRecording()})})}r.gif&&(s=null,typeof r.gif=="function"&&(s=r.gif),this.gifRecorder=new t(u,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:s,mimeType:p.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(r){r=r||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(s){r(s,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(s){r(s,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(s){r(s,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(r){var s={};return this.audioRecorder&&(s.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(s.video=this.videoRecorder.getBlob()),this.gifRecorder&&(s.gif=this.gifRecorder.getBlob()),r&&r(s),s},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(r){this.getBlob(function(b){b.audio&&b.video?s(b.audio,function(m){s(b.video,function(S){r({audio:m,video:S})})}):b.audio?s(b.audio,function(m){r({audio:m})}):b.video&&s(b.video,function(m){r({video:m})})});function s(b,m){if(typeof Worker<"u"){var S=p(function(I){postMessage(new FileReaderSync().readAsDataURL(I))});S.onmessage=function(A){m(A.data)},S.postMessage(b)}else{var l=new FileReader;l.readAsDataURL(b),l.onload=function(A){m(A.target.result)}}}function p(b){var m=_.createObjectURL(new Blob([b.toString(),"this.onmessage =  function (eee) {"+b.name+"(eee.data);}"],{type:"application/javascript"})),S=new Worker(m),l;if(typeof _<"u")l=_;else if(typeof webkitURL<"u")l=webkitURL;else throw"Neither URL nor webkitURL detected.";return l.revokeObjectURL(m),S}},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(r){r=r||{audio:!0,video:!0,gif:!0},r.audio&&this.audioRecorder&&this.audioRecorder.save(typeof r.audio=="string"?r.audio:""),r.video&&this.videoRecorder&&this.videoRecorder.save(typeof r.video=="string"?r.video:""),r.gif&&this.gifRecorder&&this.gifRecorder.save(typeof r.gif=="string"?r.gif:"")}}o.getFromDisk=t.getFromDisk,o.writeToDisk=t.writeToDisk,typeof t<"u"&&(t.MRecordRTC=o);var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(u){u&&(typeof window<"u"||typeof ie>"u"||(ie.navigator={userAgent:a,getUserMedia:function(){}},ie.console||(ie.console={}),(typeof ie.console.log>"u"||typeof ie.console.error>"u")&&(ie.console.error=ie.console.log=ie.console.log||function(){console.log(arguments)}),typeof document>"u"&&(u.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var r={getContext:function(){return r},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return r},u.HTMLVideoElement=function(){}),typeof location>"u"&&(u.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(u.screen={width:0,height:0}),typeof _>"u"&&(u.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),u.window=ie))})(typeof ie<"u"?ie:null);var c=window.requestAnimationFrame;if(typeof c>"u"){if(typeof webkitRequestAnimationFrame<"u")c=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")c=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")c=msRequestAnimationFrame;else if(typeof c>"u"){var f=0;c=function(u,r){var s=new Date().getTime(),p=Math.max(0,16-(s-f)),b=setTimeout(function(){u(s+p)},p);return f=s+p,b}}}var v=window.cancelAnimationFrame;typeof v>"u"&&(typeof webkitCancelAnimationFrame<"u"?v=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?v=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?v=msCancelAnimationFrame:typeof v>"u"&&(v=function(u){clearTimeout(u)}));var g=window.AudioContext;typeof g>"u"&&(typeof webkitAudioContext<"u"&&(g=webkitAudioContext),typeof mozAudioContext<"u"&&(g=mozAudioContext));var _=window.URL;typeof _>"u"&&typeof webkitURL<"u"&&(_=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var x=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),w=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,E=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),C=!w&&!x&&!!navigator.webkitGetUserMedia||q()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,H=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);H&&!C&&navigator.userAgent.indexOf("CriOS")!==-1&&(H=!1,C=!0);var Y=window.MediaStream;typeof Y>"u"&&typeof webkitMediaStream<"u"&&(Y=webkitMediaStream),typeof Y<"u"&&typeof Y.prototype.stop>"u"&&(Y.prototype.stop=function(){this.getTracks().forEach(function(u){u.stop()})});function K(u){var r=1e3,s=["Bytes","KB","MB","GB","TB"];if(u===0)return"0 Bytes";var p=parseInt(Math.floor(Math.log(u)/Math.log(r)),10);return(u/Math.pow(r,p)).toPrecision(3)+" "+s[p]}function N(u,r){if(!u)throw"Blob object is required.";if(!u.type)try{u.type="video/webm"}catch{}var s=(u.type||"video/webm").split("/")[1];if(s.indexOf(";")!==-1&&(s=s.split(";")[0]),r&&r.indexOf(".")!==-1){var p=r.split(".");r=p[0],s=p[1]}var b=(r||Math.round(Math.random()*9999999999)+888888888)+"."+s;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(u,b);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(u,b);var m=document.createElement("a");m.href=_.createObjectURL(u),m.download=b,m.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(m),typeof m.click=="function"?m.click():(m.target="_blank",m.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),_.revokeObjectURL(m.href)}function q(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function L(u,r){return!u||!u.getTracks?[]:u.getTracks().filter(function(s){return s.kind===(r||"audio")})}function M(u,r){"srcObject"in r?r.srcObject=u:"mozSrcObject"in r?r.mozSrcObject=u:r.srcObject=u}function V(u,r){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var s=new EBML.Reader,p=new EBML.Decoder,b=EBML.tools,m=new FileReader;m.onload=function(S){var l=p.decode(this.result);l.forEach(function(P){s.read(P)}),s.stop();var A=b.makeMetadataSeekable(s.metadatas,s.duration,s.cues),I=this.result.slice(s.metadataSize),T=new Blob([A,I],{type:"video/webm"});r(T)},m.readAsArrayBuffer(u)}typeof t<"u"&&(t.invokeSaveAsDialog=N,t.getTracks=L,t.getSeekableBlob=V,t.bytesToSize=K,t.isElectron=q);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var R={};typeof g<"u"?R.AudioContext=g:typeof webkitAudioContext<"u"&&(R.AudioContext=webkitAudioContext),typeof t<"u"&&(t.Storage=R);function j(){if(E||H||x)return!0;var u=navigator.userAgent,r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10),p,b;return(C||w)&&(p=u.indexOf("Chrome"),r=u.substring(p+7)),(b=r.indexOf(";"))!==-1&&(r=r.substring(0,b)),(b=r.indexOf(" "))!==-1&&(r=r.substring(0,b)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),s>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function z(u,r){var T=this;if(typeof u>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(r=r||{mimeType:"video/webm"},r.type==="audio"){if(L(u,"video").length&&L(u,"audio").length){var s;navigator.mozGetUserMedia?(s=new Y,s.addTrack(L(u,"audio")[0])):s=new Y(L(u,"audio")),u=s}(!r.mimeType||r.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(r.mimeType=C?"audio/webm":"audio/ogg"),r.mimeType&&r.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(r.mimeType="audio/ogg")}var p=[];this.getArrayOfBlobs=function(){return p},this.record=function(){T.blob=null,T.clearRecordedData(),T.timestamps=[],I=[],p=[];var P=r;r.disableLogs||console.log("Passing following config over MediaRecorder API.",P),l&&(l=null),C&&!j()&&(P="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&P.mimeType&&(MediaRecorder.isTypeSupported(P.mimeType)||(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",P.mimeType),P.mimeType=r.type==="audio"?"audio/webm":"video/webm"));try{l=new MediaRecorder(u,P),r.mimeType=P.mimeType}catch{l=new MediaRecorder(u)}P.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in l&&l.canRecordMimeType(P.mimeType)===!1&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",P.mimeType)),l.ondataavailable=function(D){if(D.data&&I.push("ondataavailable: "+K(D.data.size)),typeof r.timeSlice=="number"){if(D.data&&D.data.size&&(p.push(D.data),b(),typeof r.ondataavailable=="function")){var U=r.getNativeBlob?D.data:new Blob([D.data],{type:m(P)});r.ondataavailable(U)}return}if(!D.data||!D.data.size||D.data.size<100||T.blob){T.recordingCallback&&(T.recordingCallback(new Blob([],{type:m(P)})),T.recordingCallback=null);return}T.blob=r.getNativeBlob?D.data:new Blob([D.data],{type:m(P)}),T.recordingCallback&&(T.recordingCallback(T.blob),T.recordingCallback=null)},l.onstart=function(){I.push("started")},l.onpause=function(){I.push("paused")},l.onresume=function(){I.push("resumed")},l.onstop=function(){I.push("stopped")},l.onerror=function(D){D&&(D.name||(D.name="UnknownError"),I.push("error: "+D),r.disableLogs||(D.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",D):D.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",P.mimeType,") is not supported.",D):D.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",D):D.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",D):D.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",D):D.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",D):D.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",D):console.error("MediaRecorder Error",D)),function(U){if(!T.manuallyStopped&&l&&l.state==="inactive"){delete r.timeslice,l.start(10*60*1e3);return}setTimeout(U,1e3)}(),l.state!=="inactive"&&l.state!=="stopped"&&l.stop())},typeof r.timeSlice=="number"?(b(),l.start(r.timeSlice)):l.start(36e5),r.initCallback&&r.initCallback()},this.timestamps=[];function b(){T.timestamps.push(new Date().getTime()),typeof r.onTimeStamp=="function"&&r.onTimeStamp(T.timestamps[T.timestamps.length-1],T.timestamps)}function m(P){return l&&l.mimeType?l.mimeType:P.mimeType||"video/webm"}this.stop=function(P){P=P||function(){},T.manuallyStopped=!0,l&&(this.recordingCallback=P,l.state==="recording"&&l.stop(),typeof r.timeSlice=="number"&&setTimeout(function(){T.blob=new Blob(p,{type:m(r)}),T.recordingCallback(T.blob)},100))},this.pause=function(){l&&l.state==="recording"&&l.pause()},this.resume=function(){l&&l.state==="paused"&&l.resume()},this.clearRecordedData=function(){l&&l.state==="recording"&&T.stop(S),S()};function S(){p=[],l=null,T.timestamps=[]}var l;this.getInternalRecorder=function(){return l};function A(){if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.blob=null,this.getState=function(){return l&&l.state||"inactive"};var I=[];this.getAllStates=function(){return I},typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!1);var T=this;(function P(){if(!(!l||r.checkForInactiveTracks===!1)){if(A()===!1){r.disableLogs||console.log("MediaStream seems stopped."),T.stop();return}setTimeout(P,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MediaStreamRecorder=z);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function te(u,r){if(!L(u,"audio").length)throw"Your stream has no audio tracks.";r=r||{};var s=this,p=[],b=[],m=!1,S=0,l,A=2,I=r.desiredSampRate;r.leftChannel===!0&&(A=1),r.numberOfAudioChannels===1&&(A=1),(!A||A<1)&&(A=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+A),typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!0);function T(){if(r.checkForInactiveTracks===!1)return!0;if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.record=function(){if(T()===!1)throw"Please make sure MediaStream is active.";G(),y=B=!1,m=!0,typeof r.timeSlice<"u"&&Z()};function P(Q,ce){function pe(ue,St){var Pe=ue.numberOfAudioChannels,Ce=ue.leftBuffers.slice(0),$e=ue.rightBuffers.slice(0),Ee=ue.sampleRate,He=ue.internalInterleavedLength,Ie=ue.desiredSampRate;Pe===2&&(Ce=cr(Ce,He),$e=cr($e,He),Ie&&(Ce=xt(Ce,Ie,Ee),$e=xt($e,Ie,Ee))),Pe===1&&(Ce=cr(Ce,He),Ie&&(Ce=xt(Ce,Ie,Ee))),Ie&&(Ee=Ie);function xt(fe,We,De){var Me=Math.round(fe.length*(We/De)),ge=[],Ye=Number((fe.length-1)/(Me-1));ge[0]=fe[0];for(var ft=1;ft<Me-1;ft++){var pr=ft*Ye,Qr=Number(Math.floor(pr)).toFixed(),ui=Number(Math.ceil(pr)).toFixed(),fi=pr-Qr;ge[ft]=ni(fe[Qr],fe[ui],fi)}return ge[Me-1]=fe[fe.length-1],ge}function ni(fe,We,De){return fe+(We-fe)*De}function cr(fe,We){for(var De=new Float64Array(We),Me=0,ge=fe.length,Ye=0;Ye<ge;Ye++){var ft=fe[Ye];De.set(ft,Me),Me+=ft.length}return De}function ii(fe,We){for(var De=fe.length+We.length,Me=new Float64Array(De),ge=0,Ye=0;Ye<De;)Me[Ye++]=fe[ge],Me[Ye++]=We[ge],ge++;return Me}function Nt(fe,We,De){for(var Me=De.length,ge=0;ge<Me;ge++)fe.setUint8(We+ge,De.charCodeAt(ge))}var jt;Pe===2&&(jt=ii(Ce,$e)),Pe===1&&(jt=Ce);var Wt=jt.length,oi=44+Wt*2,vr=new ArrayBuffer(oi),me=new DataView(vr);Nt(me,0,"RIFF"),me.setUint32(4,36+Wt*2,!0),Nt(me,8,"WAVE"),Nt(me,12,"fmt "),me.setUint32(16,16,!0),me.setUint16(20,1,!0),me.setUint16(22,Pe,!0),me.setUint32(24,Ee,!0),me.setUint32(28,Ee*Pe*2,!0),me.setUint16(32,Pe*2,!0),me.setUint16(34,16,!0),Nt(me,36,"data"),me.setUint32(40,Wt*2,!0);for(var ai=Wt,Kr=44,si=1,hr=0;hr<ai;hr++)me.setInt16(Kr,jt[hr]*(32767*si),!0),Kr+=2;if(St)return St({buffer:vr,view:me});postMessage({buffer:vr,view:me})}if(Q.noWorker){pe(Q,function(ue){ce(ue.buffer,ue.view)});return}var Ge=D(pe);Ge.onmessage=function(ue){ce(ue.data.buffer,ue.data.view),_.revokeObjectURL(Ge.workerURL),Ge.terminate()},Ge.postMessage(Q)}function D(Q){var ce=_.createObjectURL(new Blob([Q.toString(),";this.onmessage =  function (eee) {"+Q.name+"(eee.data);}"],{type:"application/javascript"})),pe=new Worker(ce);return pe.workerURL=ce,pe}this.stop=function(Q){Q=Q||function(){},m=!1,P({desiredSampRate:I,sampleRate:h,numberOfAudioChannels:A,internalInterleavedLength:S,leftBuffers:p,rightBuffers:A===1?[]:b,noWorker:r.noWorker},function(ce,pe){s.blob=new Blob([pe],{type:"audio/wav"}),s.buffer=new ArrayBuffer(pe.buffer.byteLength),s.view=pe,s.sampleRate=I||h,s.bufferSize=J,s.length=S,y=!1,Q&&Q(s.blob)})},typeof t.Storage>"u"&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!t.Storage.AudioContextConstructor||t.Storage.AudioContextConstructor.state==="closed")&&(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var U=t.Storage.AudioContextConstructor,k=U.createMediaStreamSource(u),$=[0,256,512,1024,2048,4096,8192,16384],J=typeof r.bufferSize>"u"?4096:r.bufferSize;if($.indexOf(J)===-1&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify($,null,"	"))),U.createJavaScriptNode)l=U.createJavaScriptNode(J,A,A);else if(U.createScriptProcessor)l=U.createScriptProcessor(J,A,A);else throw"WebAudio API has no support on this browser.";k.connect(l),r.bufferSize||(J=l.bufferSize);var h=typeof r.sampleRate<"u"?r.sampleRate:U.sampleRate||44100;(h<22050||h>96e3)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var B=!1;this.pause=function(){B=!0},this.resume=function(){if(T()===!1)throw"Please make sure MediaStream is active.";if(!m){r.disableLogs||console.log("Seems recording has been restarted."),this.record();return}B=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,m&&this.stop(d),d()};function G(){p=[],b=[],S=0,y=!1,m=!1,B=!1,U=null,s.leftchannel=p,s.rightchannel=b,s.numberOfAudioChannels=A,s.desiredSampRate=I,s.sampleRate=h,s.recordingLength=S,W={left:[],right:[],recordingLength:0}}function d(){l&&(l.onaudioprocess=null,l.disconnect(),l=null),k&&(k.disconnect(),k=null),G()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var y=!1;function F(Q){if(!B){if(T()===!1&&(r.disableLogs||console.log("MediaStream seems stopped."),l.disconnect(),m=!1),!m){k&&(k.disconnect(),k=null);return}y||(y=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var ce=Q.inputBuffer.getChannelData(0),pe=new Float32Array(ce);if(p.push(pe),A===2){var Ge=Q.inputBuffer.getChannelData(1),ue=new Float32Array(Ge);b.push(ue)}S+=J,s.recordingLength=S,typeof r.timeSlice<"u"&&(W.recordingLength+=J,W.left.push(pe),A===2&&W.right.push(ue))}}l.onaudioprocess=F,U.createMediaStreamDestination?l.connect(U.createMediaStreamDestination()):l.connect(U.destination),this.leftchannel=p,this.rightchannel=b,this.numberOfAudioChannels=A,this.desiredSampRate=I,this.sampleRate=h,s.recordingLength=S;var W={left:[],right:[],recordingLength:0};function Z(){!m||typeof r.ondataavailable!="function"||typeof r.timeSlice>"u"||(W.left.length?(P({desiredSampRate:I,sampleRate:h,numberOfAudioChannels:A,internalInterleavedLength:W.recordingLength,leftBuffers:W.left,rightBuffers:A===1?[]:W.right},function(Q,ce){var pe=new Blob([ce],{type:"audio/wav"});r.ondataavailable(pe),setTimeout(Z,r.timeSlice)}),W={left:[],right:[],recordingLength:0}):setTimeout(Z,r.timeSlice))}}typeof t<"u"&&(t.StereoAudioRecorder=te);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function oe(u,r){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";r=r||{},r.frameInterval||(r.frameInterval=10);var s=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function($){$ in document.createElement("canvas")&&(s=!0)});var p=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,b=50,m=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);p&&m&&m[2]&&(b=parseInt(m[2],10)),p&&b<52&&(s=!1),r.useWhammyRecorder&&(s=!1);var S,l;if(s)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),u instanceof HTMLCanvasElement)S=u;else if(u instanceof CanvasRenderingContext2D)S=u.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var A;this.record=function(){if(A=!0,s&&!r.useWhammyRecorder){var $;"captureStream"in S?$=S.captureStream(25):"mozCaptureStream"in S?$=S.mozCaptureStream(25):"webkitCaptureStream"in S&&($=S.webkitCaptureStream(25));try{var J=new Y;J.addTrack(L($,"video")[0]),$=J}catch{}if(!$)throw"captureStream API are NOT available.";l=new z($,{mimeType:r.mimeType||"video/webm"}),l.record()}else k.frames=[],U=new Date().getTime(),D();r.initCallback&&r.initCallback()},this.getWebPImages=function($){if(u.nodeName.toLowerCase()!=="canvas"){$();return}var J=k.frames.length;k.frames.forEach(function(h,B){var G=J-B;r.disableLogs||console.log(G+"/"+J+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(G,J);var d=h.image.toDataURL("image/webp",1);k.frames[B].image=d}),r.disableLogs||console.log("Generating WebM"),$()},this.stop=function($){A=!1;var J=this;if(s&&l){l.stop($);return}this.getWebPImages(function(){k.compile(function(h){r.disableLogs||console.log("Recording finished!"),J.blob=h,J.blob.forEach&&(J.blob=new Blob([],{type:"video/webm"})),$&&$(J.blob),k.frames=[]})})};var I=!1;this.pause=function(){if(I=!0,l instanceof z){l.pause();return}},this.resume=function(){if(I=!1,l instanceof z){l.resume();return}A||this.record()},this.clearRecordedData=function(){A&&this.stop(T),T()};function T(){k.frames=[],A=!1,I=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function P(){var $=document.createElement("canvas"),J=$.getContext("2d");return $.width=u.width,$.height=u.height,J.drawImage(u,0,0),$}function D(){if(I)return U=new Date().getTime(),setTimeout(D,500);if(u.nodeName.toLowerCase()==="canvas"){var $=new Date().getTime()-U;U=new Date().getTime(),k.frames.push({image:P(),duration:$}),A&&setTimeout(D,r.frameInterval);return}html2canvas(u,{grabMouse:typeof r.showMousePointer>"u"||r.showMousePointer,onrendered:function(J){var h=new Date().getTime()-U;if(!h)return setTimeout(D,r.frameInterval);U=new Date().getTime(),k.frames.push({image:J.toDataURL("image/webp",1),duration:h}),A&&setTimeout(D,r.frameInterval)}})}var U=new Date().getTime(),k=new de.Video(100)}typeof t<"u"&&(t.CanvasRecorder=oe);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function le(u,r){r=r||{},r.frameInterval||(r.frameInterval=10),r.disableLogs||console.log("Using frames-interval:",r.frameInterval),this.record=function(){r.width||(r.width=320),r.height||(r.height=240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),A.width=r.canvas.width||320,A.height=r.canvas.height||240,I=A.getContext("2d"),r.video&&r.video instanceof HTMLVideoElement?(T=r.video.cloneNode(),r.initCallback&&r.initCallback()):(T=document.createElement("video"),M(u,T),T.onloadedmetadata=function(){r.initCallback&&r.initCallback()},T.width=r.video.width,T.height=r.video.height),T.muted=!0,T.play(),P=new Date().getTime(),D=new de.Video,r.disableLogs||(console.log("canvas resolutions",A.width,"*",A.height),console.log("video width/height",T.width||A.width,"*",T.height||A.height)),s(r.frameInterval)};function s(U){U=typeof U<"u"?U:10;var k=new Date().getTime()-P;if(!k)return setTimeout(s,U,U);if(S)return P=new Date().getTime(),setTimeout(s,100);P=new Date().getTime(),T.paused&&T.play(),I.drawImage(T,0,0,A.width,A.height),D.frames.push({duration:k,image:A.toDataURL("image/webp")}),m||setTimeout(s,U,U)}function p(U){var k=-1,$=U.length;(function J(){if(k++,k===$){U.callback();return}setTimeout(function(){U.functionToLoop(J,k)},1)})()}function b(U,k,$,J,h){var B=document.createElement("canvas");B.width=A.width,B.height=A.height;var G=B.getContext("2d"),d=[],y=U.length,F={r:0,g:0,b:0},W=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),Z=0,Q=0,ce=!1;p({length:y,functionToLoop:function(pe,Ge){var ue,St,Pe,Ce=function(){!ce&&Pe-ue<=Pe*Q||(ce=!0,d.push(U[Ge])),pe()};if(ce)Ce();else{var $e=new Image;$e.onload=function(){G.drawImage($e,0,0,A.width,A.height);var Ee=G.getImageData(0,0,A.width,A.height);ue=0,St=Ee.data.length,Pe=Ee.data.length/4;for(var He=0;He<St;He+=4){var Ie={r:Ee.data[He],g:Ee.data[He+1],b:Ee.data[He+2]},xt=Math.sqrt(Math.pow(Ie.r-F.r,2)+Math.pow(Ie.g-F.g,2)+Math.pow(Ie.b-F.b,2));xt<=W*Z&&ue++}Ce()},$e.src=U[Ge].image}},callback:function(){d=d.concat(U.slice(y)),d.length<=0&&d.push(U[U.length-1]),h(d)}})}var m=!1;this.stop=function(U){U=U||function(){},m=!0;var k=this;setTimeout(function(){b(D.frames,-1,null,null,function($){D.frames=$,r.advertisement&&r.advertisement.length&&(D.frames=r.advertisement.concat(D.frames)),D.compile(function(J){k.blob=J,k.blob.forEach&&(k.blob=new Blob([],{type:"video/webm"})),U&&U(k.blob)})})},10)};var S=!1;this.pause=function(){S=!0},this.resume=function(){S=!1,m&&this.record()},this.clearRecordedData=function(){m||this.stop(l),l()};function l(){D.frames=[],m=!0,S=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var A=document.createElement("canvas"),I=A.getContext("2d"),T,P,D}typeof t<"u"&&(t.WhammyRecorder=le);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var de=function(){function u(p){this.frames=[],this.duration=p||1,this.quality=.8}u.prototype.add=function(p,b){if("canvas"in p&&(p=p.canvas),"toDataURL"in p&&(p=p.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(p))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:p,duration:b||this.duration})};function r(p){var b=_.createObjectURL(new Blob([p.toString(),"this.onmessage =  function (eee) {"+p.name+"(eee.data);}"],{type:"application/javascript"})),m=new Worker(b);return _.revokeObjectURL(b),m}function s(p){function b(h){var B=S(h);if(!B)return[];for(var G=3e4,d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:$(B.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:B.width,id:176},{data:B.height,id:186}]}]}]}]}],y=0,F=0;y<h.length;){var W=[],Z=0;do W.push(h[y]),Z+=h[y].duration,y++;while(y<h.length&&Z<G);var Q=0,ce={id:524531317,data:m(F,Q,W)};d[1].data.push(ce),F+=Z}return T(d)}function m(h,B,G){return[{data:h,id:231}].concat(G.map(function(d){var y=P({frame:d.data.slice(4),trackNum:1,timecode:Math.round(B)});return B+=d.duration,{data:y,id:163}}))}function S(h){if(!h[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var B=h[0].width,G=h[0].height,d=h[0].duration,y=1;y<h.length;y++)d+=h[y].duration;return{duration:d,width:B,height:G}}function l(h){for(var B=[];h>0;)B.push(h&255),h=h>>8;return new Uint8Array(B.reverse())}function A(h){return new Uint8Array(h.split("").map(function(B){return B.charCodeAt(0)}))}function I(h){var B=[],G=h.length%8?new Array(9-h.length%8).join("0"):"";h=G+h;for(var d=0;d<h.length;d+=8)B.push(parseInt(h.substr(d,8),2));return new Uint8Array(B)}function T(h){for(var B=[],G=0;G<h.length;G++){var d=h[G].data;typeof d=="object"&&(d=T(d)),typeof d=="number"&&(d=I(d.toString(2))),typeof d=="string"&&(d=A(d));var y=d.size||d.byteLength||d.length,F=Math.ceil(Math.ceil(Math.log(y)/Math.log(2))/8),W=y.toString(2),Z=new Array(F*7+7+1-W.length).join("0")+W,Q=new Array(F).join("0")+"1"+Z;B.push(l(h[G].id)),B.push(I(Q)),B.push(d)}return new Blob(B,{type:"video/webm"})}function P(h){var B=0;B|=128;var G=[h.trackNum|128,h.timecode>>8,h.timecode&255,B].map(function(d){return String.fromCharCode(d)}).join("")+h.frame;return G}function D(h){for(var B=h.RIFF[0].WEBP[0],G=B.indexOf("¬ù*"),d=0,y=[];d<4;d++)y[d]=B.charCodeAt(G+3+d);var F,W,Z;return Z=y[1]<<8|y[0],F=Z&16383,Z=y[3]<<8|y[2],W=Z&16383,{width:F,height:W,data:B,riff:h}}function U(h,B){return parseInt(h.substr(B+4,4).split("").map(function(G){var d=G.charCodeAt(0).toString(2);return new Array(8-d.length+1).join("0")+d}).join(""),2)}function k(h){for(var B=0,G={};B<h.length;){var d=h.substr(B,4),y=U(h,B),F=h.substr(B+4+4,y);B+=8+y,G[d]=G[d]||[],d==="RIFF"||d==="LIST"?G[d].push(k(F)):G[d].push(F)}return G}function $(h){return[].slice.call(new Uint8Array(new Float64Array([h]).buffer),0).map(function(B){return String.fromCharCode(B)}).reverse().join("")}var J=new b(p.map(function(h){var B=D(k(atob(h.image.slice(23))));return B.duration=h.duration,B}));postMessage(J)}return u.prototype.compile=function(p){var b=r(s);b.onmessage=function(m){if(m.data.error){console.error(m.data.error);return}p(m.data)},b.postMessage(this.frames)},{Video:u}}();typeof t<"u"&&(t.Whammy=de);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var se={init:function(){var u=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var r=1,s=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),p,b=indexedDB.open(s,r);function m(l){l.createObjectStore(u.dataStoreName)}function S(){var l=p.transaction([u.dataStoreName],"readwrite");u.videoBlob&&l.objectStore(u.dataStoreName).put(u.videoBlob,"videoBlob"),u.gifBlob&&l.objectStore(u.dataStoreName).put(u.gifBlob,"gifBlob"),u.audioBlob&&l.objectStore(u.dataStoreName).put(u.audioBlob,"audioBlob");function A(I){l.objectStore(u.dataStoreName).get(I).onsuccess=function(T){u.callback&&u.callback(T.target.result,I)}}A("audioBlob"),A("videoBlob"),A("gifBlob")}b.onerror=u.onError,b.onsuccess=function(){if(p=b.result,p.onerror=u.onError,p.setVersion)if(p.version!==r){var l=p.setVersion(r);l.onsuccess=function(){m(p),S()}}else S();else S()},b.onupgradeneeded=function(l){m(l.target.result)}},Fetch:function(u){return this.callback=u,this.init(),this},Store:function(u){return this.audioBlob=u.audioBlob,this.videoBlob=u.videoBlob,this.gifBlob=u.gifBlob,this.init(),this},onError:function(u){console.error(JSON.stringify(u,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof t<"u"&&(t.DiskStorage=se);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function he(u,r){if(typeof GIFEncoder>"u"){var s=document.createElement("script");s.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(s)}r=r||{};var p=u instanceof CanvasRenderingContext2D||u instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(U.record,1e3);return}if(!A){setTimeout(U.record,1e3);return}p||(r.width||(r.width=I.offsetWidth||320),r.height||(r.height=I.offsetHeight||240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),S.width=r.canvas.width||320,S.height=r.canvas.height||240,I.width=r.video.width||320,I.height=r.video.height||240),D=new GIFEncoder,D.setRepeat(0),D.setDelay(r.frameRate||200),D.setQuality(r.quality||10),D.start(),typeof r.onGifRecordingStarted=="function"&&r.onGifRecordingStarted();function k($){if(U.clearedRecordedData!==!0){if(b)return setTimeout(function(){k($)},100);T=c(k),typeof P===void 0&&(P=$),!($-P<90)&&(!p&&I.paused&&I.play(),p||l.drawImage(I,0,0,S.width,S.height),r.onGifPreview&&r.onGifPreview(S.toDataURL("image/png")),D.addFrame(l),P=$)}}T=c(k),r.initCallback&&r.initCallback()},this.stop=function(k){k=k||function(){},T&&v(T),this.blob=new Blob([new Uint8Array(D.stream().bin)],{type:"image/gif"}),k(this.blob),D.stream().bin=[]};var b=!1;this.pause=function(){b=!0},this.resume=function(){b=!1},this.clearRecordedData=function(){U.clearedRecordedData=!0,m()};function m(){D&&(D.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var S=document.createElement("canvas"),l=S.getContext("2d");p&&(u instanceof CanvasRenderingContext2D?(l=u,S=l.canvas):u instanceof HTMLCanvasElement&&(l=u.getContext("2d"),S=u));var A=!0;if(!p){var I=document.createElement("video");I.muted=!0,I.autoplay=!0,I.playsInline=!0,A=!1,I.onloadedmetadata=function(){A=!0},M(u,I),I.play()}var T=null,P,D,U=this}typeof t<"u"&&(t.GifRecorder=he);function xe(u,r){var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(d){typeof t<"u"||d&&(typeof window<"u"||typeof ie>"u"||(ie.navigator={userAgent:s,getUserMedia:function(){}},ie.console||(ie.console={}),(typeof ie.console.log>"u"||typeof ie.console.error>"u")&&(ie.console.error=ie.console.log=ie.console.log||function(){console.log(arguments)}),typeof document>"u"&&(d.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var y={getContext:function(){return y},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return y},d.HTMLVideoElement=function(){}),typeof location>"u"&&(d.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(d.screen={width:0,height:0}),typeof I>"u"&&(d.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),d.window=ie))})(typeof ie<"u"?ie:null),r=r||"multi-streams-mixer";var p=[],b=!1,m=document.createElement("canvas"),S=m.getContext("2d");m.style.opacity=0,m.style.position="absolute",m.style.zIndex=-1,m.style.top="-1000em",m.style.left="-1000em",m.className=r,(document.body||document.documentElement).appendChild(m),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var l=this,A=window.AudioContext;typeof A>"u"&&(typeof webkitAudioContext<"u"&&(A=webkitAudioContext),typeof mozAudioContext<"u"&&(A=mozAudioContext));var I=window.URL;typeof I>"u"&&typeof webkitURL<"u"&&(I=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var T=window.MediaStream;typeof T>"u"&&typeof webkitMediaStream<"u"&&(T=webkitMediaStream),typeof T<"u"&&typeof T.prototype.stop>"u"&&(T.prototype.stop=function(){this.getTracks().forEach(function(d){d.stop()})});var P={};typeof A<"u"?P.AudioContext=A:typeof webkitAudioContext<"u"&&(P.AudioContext=webkitAudioContext);function D(d,y){"srcObject"in y?y.srcObject=d:"mozSrcObject"in y?y.mozSrcObject=d:y.srcObject=d}this.startDrawingFrames=function(){U()};function U(){if(!b){var d=p.length,y=!1,F=[];if(p.forEach(function(Z){Z.stream||(Z.stream={}),Z.stream.fullcanvas?y=Z:F.push(Z)}),y)m.width=y.stream.width,m.height=y.stream.height;else if(F.length){m.width=d>1?F[0].width*2:F[0].width;var W=1;(d===3||d===4)&&(W=2),(d===5||d===6)&&(W=3),(d===7||d===8)&&(W=4),(d===9||d===10)&&(W=5),m.height=F[0].height*W}else m.width=l.width||360,m.height=l.height||240;y&&y instanceof HTMLVideoElement&&k(y),F.forEach(function(Z,Q){k(Z,Q)}),setTimeout(U,l.frameInterval)}}function k(d,y){if(!b){var F=0,W=0,Z=d.width,Q=d.height;y===1&&(F=d.width),y===2&&(W=d.height),y===3&&(F=d.width,W=d.height),y===4&&(W=d.height*2),y===5&&(F=d.width,W=d.height*2),y===6&&(W=d.height*3),y===7&&(F=d.width,W=d.height*3),typeof d.stream.left<"u"&&(F=d.stream.left),typeof d.stream.top<"u"&&(W=d.stream.top),typeof d.stream.width<"u"&&(Z=d.stream.width),typeof d.stream.height<"u"&&(Q=d.stream.height),S.drawImage(d,F,W,Z,Q),typeof d.stream.onRender=="function"&&d.stream.onRender(S,F,W,Z,Q,y)}}function $(){b=!1;var d=J(),y=h();return y&&y.getTracks().filter(function(F){return F.kind==="audio"}).forEach(function(F){d.addTrack(F)}),u.forEach(function(F){F.fullcanvas}),d}function J(){G();var d;"captureStream"in m?d=m.captureStream():"mozCaptureStream"in m?d=m.mozCaptureStream():l.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var y=new T;return d.getTracks().filter(function(F){return F.kind==="video"}).forEach(function(F){y.addTrack(F)}),m.stream=y,y}function h(){P.AudioContextConstructor||(P.AudioContextConstructor=new P.AudioContext),l.audioContext=P.AudioContextConstructor,l.audioSources=[],l.useGainNode===!0&&(l.gainNode=l.audioContext.createGain(),l.gainNode.connect(l.audioContext.destination),l.gainNode.gain.value=0);var d=0;if(u.forEach(function(y){if(y.getTracks().filter(function(W){return W.kind==="audio"}).length){d++;var F=l.audioContext.createMediaStreamSource(y);l.useGainNode===!0&&F.connect(l.gainNode),l.audioSources.push(F)}}),!!d)return l.audioDestination=l.audioContext.createMediaStreamDestination(),l.audioSources.forEach(function(y){y.connect(l.audioDestination)}),l.audioDestination.stream}function B(d){var y=document.createElement("video");return D(d,y),y.className=r,y.muted=!0,y.volume=0,y.width=d.width||l.width||360,y.height=d.height||l.height||240,y.play(),y}this.appendStreams=function(d){if(!d)throw"First parameter is required.";d instanceof Array||(d=[d]),d.forEach(function(y){var F=new T;if(y.getTracks().filter(function(Q){return Q.kind==="video"}).length){var W=B(y);W.stream=y,p.push(W),F.addTrack(y.getTracks().filter(function(Q){return Q.kind==="video"})[0])}if(y.getTracks().filter(function(Q){return Q.kind==="audio"}).length){var Z=l.audioContext.createMediaStreamSource(y);l.audioDestination=l.audioContext.createMediaStreamDestination(),Z.connect(l.audioDestination),F.addTrack(l.audioDestination.stream.getTracks().filter(function(Q){return Q.kind==="audio"})[0])}u.push(F)})},this.releaseStreams=function(){p=[],b=!0,l.gainNode&&(l.gainNode.disconnect(),l.gainNode=null),l.audioSources.length&&(l.audioSources.forEach(function(d){d.disconnect()}),l.audioSources=[]),l.audioDestination&&(l.audioDestination.disconnect(),l.audioDestination=null),l.audioContext&&l.audioContext.close(),l.audioContext=null,S.clearRect(0,0,m.width,m.height),m.stream&&(m.stream.stop(),m.stream=null)},this.resetVideoStreams=function(d){d&&!(d instanceof Array)&&(d=[d]),G(d)};function G(d){p=[],d=d||u,d.forEach(function(y){if(y.getTracks().filter(function(W){return W.kind==="video"}).length){var F=B(y);F.stream=y,p.push(F)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=$}typeof t>"u"&&(e.exports=xe);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Le(u,r){u=u||[];var s=this,p,b;r=r||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},r.frameInterval||(r.frameInterval=10),r.video||(r.video={}),r.video.width||(r.video.width=360),r.video.height||(r.video.height=240),this.record=function(){p=new xe(u,r.elementClass||"multi-streams-mixer"),m().length&&(p.frameInterval=r.frameInterval||10,p.width=r.video.width||360,p.height=r.video.height||240,p.startDrawingFrames()),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(p.getMixedStream()),b=new z(p.getMixedStream(),r),b.record()};function m(){var S=[];return u.forEach(function(l){L(l,"video").forEach(function(A){S.push(A)})}),S}this.stop=function(S){b&&b.stop(function(l){s.blob=l,S(l),s.clearRecordedData()})},this.pause=function(){b&&b.pause()},this.resume=function(){b&&b.resume()},this.clearRecordedData=function(){b&&(b.clearRecordedData(),b=null),p&&(p.releaseStreams(),p=null)},this.addStreams=function(S){if(!S)throw"First parameter is required.";S instanceof Array||(S=[S]),u.concat(S),!(!b||!p)&&(p.appendStreams(S),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(p.getMixedStream()))},this.resetVideoStreams=function(S){p&&(S&&!(S instanceof Array)&&(S=[S]),p.resetVideoStreams(S))},this.getMixer=function(){return p},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MultiStreamRecorder=Le);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function Te(u,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof u>"u")throw'First argument "MediaStream" is required.';var s=this;s.recordRTC=new t(u,r),this.startRecording=function(){return new Promise(function(p,b){try{s.recordRTC.startRecording(),p()}catch(m){b(m)}})},this.stopRecording=function(){return new Promise(function(p,b){try{s.recordRTC.stopRecording(function(m){if(s.blob=s.recordRTC.getBlob(),!s.blob||!s.blob.size){b("Empty blob.",s.blob);return}p(m)})}catch(m){b(m)}})},this.pauseRecording=function(){return new Promise(function(p,b){try{s.recordRTC.pauseRecording(),p()}catch(m){b(m)}})},this.resumeRecording=function(){return new Promise(function(p,b){try{s.recordRTC.resumeRecording(),p()}catch(m){b(m)}})},this.getDataURL=function(p){return new Promise(function(b,m){try{s.recordRTC.getDataURL(function(S){b(S)})}catch(S){m(S)}})},this.getBlob=function(){return new Promise(function(p,b){try{p(s.recordRTC.getBlob())}catch(m){b(m)}})},this.getInternalRecorder=function(){return new Promise(function(p,b){try{p(s.recordRTC.getInternalRecorder())}catch(m){b(m)}})},this.reset=function(){return new Promise(function(p,b){try{p(s.recordRTC.reset())}catch(m){b(m)}})},this.destroy=function(){return new Promise(function(p,b){try{p(s.recordRTC.destroy())}catch(m){b(m)}})},this.getState=function(){return new Promise(function(p,b){try{p(s.recordRTC.getState())}catch(m){b(m)}})},this.blob=null,this.version="5.6.2"}typeof t<"u"&&(t.RecordRTCPromisesHandler=Te);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function je(u,r){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),r=r||{},r.width=r.width||640,r.height=r.height||480,r.frameRate=r.frameRate||30,r.bitrate=r.bitrate||1200,r.realtime=r.realtime||!0;var s;function p(){return new ReadableStream({start:function(I){var T=document.createElement("canvas"),P=document.createElement("video"),D=!0;P.srcObject=u,P.muted=!0,P.height=r.height,P.width=r.width,P.volume=0,P.onplaying=function(){T.width=r.width,T.height=r.height;var U=T.getContext("2d"),k=1e3/r.frameRate,$=setInterval(function(){if(s&&(clearInterval($),I.close()),D&&(D=!1,r.onVideoProcessStarted&&r.onVideoProcessStarted()),U.drawImage(P,0,0),I._controlledReadableStream.state!=="closed")try{I.enqueue(U.getImageData(0,0,r.width,r.height))}catch{}},k)},P.play()}})}var b;function m(I,T){if(!r.workerPath&&!T){s=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(D){D.arrayBuffer().then(function(U){m(I,U)})});return}if(!r.workerPath&&T instanceof ArrayBuffer){var P=new Blob([T],{type:"text/javascript"});r.workerPath=_.createObjectURL(P)}r.workerPath||console.error("workerPath parameter is missing."),b=new Worker(r.workerPath),b.postMessage(r.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),b.addEventListener("message",function(D){D.data==="READY"?(b.postMessage({width:r.width,height:r.height,bitrate:r.bitrate||1200,timebaseDen:r.frameRate||30,realtime:r.realtime}),p().pipeTo(new WritableStream({write:function(U){if(s){console.error("Got image, but recorder is finished!");return}b.postMessage(U.data.buffer,[U.data.buffer])}}))):D.data&&(S||A.push(D.data))})}this.record=function(){A=[],S=!1,this.blob=null,m(u),typeof r.initCallback=="function"&&r.initCallback()};var S;this.pause=function(){S=!0},this.resume=function(){S=!1};function l(I){if(!b){I&&I();return}b.addEventListener("message",function(T){T.data===null&&(b.terminate(),b=null,I&&I())}),b.postMessage(null)}var A=[];this.stop=function(I){s=!0;var T=this;l(function(){T.blob=new Blob(A,{type:"video/webm"}),I(T.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){A=[],S=!1,this.blob=null},this.blob=null}typeof t<"u"&&(t.WebAssemblyRecorder=je)}(_r)),_r.exports}var ri=ta();const ra=ea(ri);var na=Se("<div> </div>"),ia=Se('<audio controls></audio> <a download="test.wav" class="px-2 text-xs text-blue-500 underline">WAV Îã§Ïö¥Î°úÎìú</a>',1),oa=Se('<div class="h-screen flex flex-col max-w-md mx-auto"><div class="flex-1 overflow-auto p-2 space-y-2"></div> <div class="flex gap-2 p-2 border-t"><button class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200"> </button> <!></div></div>');function aa(e,t){bt(t,!1);let n=null,i=null,o=Ue(null),a=Ue(!1),c=null,f=Ue([]);async function v(){if(!O(a))try{i=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}}),n=new ra(i,{type:"audio",mimeType:"audio/wav",recorderType:ri.StereoAudioRecorder,desiredSampRate:16e3,numberOfAudioChannels:1,timeSlice:5e3}),n.startRecording(),X(a,!0),c=setTimeout(()=>g(),5e3)}catch(N){X(f,[...O(f),{role:"system",content:"ÎÖπÏùå Ïò§Î•ò: "+N}])}}async function g(){!n||!O(a)||n.stopRecording(async()=>{const N=n.getBlob();X(o,URL.createObjectURL(N)),await _(N),X(a,!1),c&&clearTimeout(c),i&&(i.getTracks().forEach(q=>q.stop()),i=null)})}async function _(N){const q=new FormData;q.append("file",N,"recording.wav");try{(await fetch("/set-voice-reference",{method:"POST",body:q})).ok?X(f,[...O(f),{role:"system",content:"ÏùåÏÑ± ÏóÖÎ°úÎìú ÏÑ±Í≥µ"}]):X(f,[...O(f),{role:"system",content:"ÏóÖÎ°úÎìú Ïã§Ìå®"}])}catch{X(f,[...O(f),{role:"system",content:"ÏóÖÎ°úÎìú Ïò§Î•ò"}])}}ei(()=>{i&&i.getTracks().forEach(N=>N.stop())}),lr();var x=oa(),w=ae(x);zr(w,5,()=>O(f),qr,(N,q)=>{var L=na(),M=ae(L);lt(()=>{Jn(L,1,`max-w-[85%] px-3 py-2 text-sm break-words
        ${O(q).role==="user"?"ml-auto bg-gray-100":"mr-auto"}`),pt(M,O(q).content)}),ve(N,L)});var E=Re(w,2),C=ae(E),H=ae(C),Y=Re(C,2);{var K=N=>{var q=ia(),L=kt(q),M=Re(L,2);lt(()=>{sn(L,"src",O(o)),sn(M,"href",O(o))}),ve(N,q)};it(Y,N=>{O(o)&&N(K)})}lt(()=>{C.disabled=O(a),pt(H,O(a)?"ÎÖπÏùå Ï§ë... (5Ï¥à)":"ÎÖπÏùå ÏãúÏûë")}),Xt("click",C,function(...N){var q;(q=O(a)?g:v)==null||q.apply(this,N)}),ve(e,x),wt()}var sa=Se('<main><a href="#/">Ìôà</a> <a href="#/voice_reference">voice_reference</a> <!></main>');function ua(e){const t={"/":Zo,"/voice_reference":aa};var n=sa(),i=Re(ae(n),4);Io(i,{routes:t}),ve(e,n)}vo(ua,{target:document.getElementById("app")});
