(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const v of a.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const en=!1;var Ft=Array.isArray,di=Array.prototype.indexOf,Ur=Array.from,yn=Object.defineProperty,it=Object.getOwnPropertyDescriptor,_n=Object.getOwnPropertyDescriptors,ci=Object.prototype,vi=Array.prototype,Br=Object.getPrototypeOf,tn=Object.isExtensible;function Lt(e){return typeof e=="function"}const ot=()=>{};function hi(e){return e()}function Dt(e){for(var t=0;t<e.length;t++)e[t]()}const Fe=2,Rn=4,or=8,Pr=16,et=32,_t=64,Kt=128,Le=256,Qt=512,xe=1024,ze=2048,ft=4096,Je=8192,ar=16384,pi=32768,sr=65536,mi=1<<17,gi=1<<19,xn=1<<20,Sr=1<<21,at=Symbol("$state"),Sn=Symbol("legacy props"),bi=Symbol("");function Tn(e){return e===this.v}function Cn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ir(e){return!Cn(e,this.v)}function wi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _i(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ri(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xi(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Si(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ti(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ci(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ki(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Rt=!1,Li=!1;function Ai(){Rt=!0}const Fr=1,Nr=2,kn=4,Ei=8,Mi=16,Di=1,Oi=2,Ui=4,Bi=8,Pi=16,Ii=1,Fi=2,Te=Symbol(),Ni="http://www.w3.org/1999/xhtml";function ji(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function ur(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let re=null;function rn(e){re=e}function vt(e,t=!1,n){var i=re={p:re,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Rt&&!t&&(re.l={s:null,u:null,r1:[],r2:Bt(!1)}),Vr(()=>{i.d=!0})}function ht(e){const t=re;if(t!==null){const v=t.e;if(v!==null){var n=ie,i=ne;t.e=null;try{for(var o=0;o<v.length;o++){var a=v[o];ut(a.effect),qe(a.reaction),zr(a.fn)}}finally{ut(n),qe(i)}}re=t.p,t.m=!0}return{}}function Nt(){return!Rt||re!==null&&re.l===null}function rt(e){if(typeof e!="object"||e===null||at in e)return e;const t=Br(e);if(t!==ci&&t!==vi)return e;var n=new Map,i=Ft(e),o=Qe(0),a=ne,v=l=>{var c=ne;qe(a);var g=l();return qe(c),g};return i&&n.set("length",Qe(e.length)),new Proxy(e,{defineProperty(l,c,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&Ti();var y=n.get(c);return y===void 0?(y=v(()=>Qe(g.value)),n.set(c,y)):Z(y,v(()=>rt(g.value))),!0},deleteProperty(l,c){var g=n.get(c);if(g===void 0)c in l&&(n.set(c,v(()=>Qe(Te))),wr(o));else{if(i&&typeof c=="string"){var y=n.get("length"),R=Number(c);Number.isInteger(R)&&R<y.v&&Z(y,R)}Z(g,Te),wr(o)}return!0},get(l,c,g){var C;if(c===at)return e;var y=n.get(c),R=c in l;if(y===void 0&&(!R||(C=it(l,c))!=null&&C.writable)&&(y=v(()=>Qe(rt(R?l[c]:Te))),n.set(c,y)),y!==void 0){var w=E(y);return w===Te?void 0:w}return Reflect.get(l,c,g)},getOwnPropertyDescriptor(l,c){var g=Reflect.getOwnPropertyDescriptor(l,c);if(g&&"value"in g){var y=n.get(c);y&&(g.value=E(y))}else if(g===void 0){var R=n.get(c),w=R==null?void 0:R.v;if(R!==void 0&&w!==Te)return{enumerable:!0,configurable:!0,value:w,writable:!0}}return g},has(l,c){var w;if(c===at)return!0;var g=n.get(c),y=g!==void 0&&g.v!==Te||Reflect.has(l,c);if(g!==void 0||ie!==null&&(!y||(w=it(l,c))!=null&&w.writable)){g===void 0&&(g=v(()=>Qe(y?rt(l[c]):Te)),n.set(c,g));var R=E(g);if(R===Te)return!1}return y},set(l,c,g,y){var N;var R=n.get(c),w=c in l;if(i&&c==="length")for(var C=g;C<R.v;C+=1){var S=n.get(C+"");S!==void 0?Z(S,Te):C in l&&(S=v(()=>Qe(Te)),n.set(C+"",S))}R===void 0?(!w||(N=it(l,c))!=null&&N.writable)&&(R=v(()=>Qe(void 0)),Z(R,v(()=>rt(g))),n.set(c,R)):(w=R.v!==Te,Z(R,v(()=>rt(g))));var H=Reflect.getOwnPropertyDescriptor(l,c);if(H!=null&&H.set&&H.set.call(y,g),!w){if(i&&typeof c=="string"){var G=n.get("length"),Q=Number(c);Number.isInteger(Q)&&Q>=G.v&&Z(G,Q+1)}wr(o)}return!0},ownKeys(l){E(o);var c=Reflect.ownKeys(l).filter(R=>{var w=n.get(R);return w===void 0||w.v!==Te});for(var[g,y]of n)y.v!==Te&&!(g in l)&&c.push(g);return c},setPrototypeOf(){Ci()}})}function wr(e,t=1){Z(e,e.v+t)}function Ot(e){var t=Fe|ze,n=ne!==null&&(ne.f&Fe)!==0?ne:null;return ie===null||n!==null&&(n.f&Le)!==0?t|=Le:ie.f|=xn,{ctx:re,deps:null,effects:null,equals:Tn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ie}}function jr(e){const t=Ot(e);return t.equals=Ir,t}function Ln(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)st(t[n])}}function Wi(e){for(var t=e.parent;t!==null;){if((t.f&Fe)===0)return t;t=t.parent}return null}function An(e){var t,n=ie;ut(Wi(e));try{Ln(e),t=Hn(e)}finally{ut(n)}return t}function En(e){var t=An(e),n=(nt||(e.f&Le)!==0)&&e.deps!==null?ft:xe;Ue(e,n),e.equals(t)||(e.v=t,e.wv=Gn())}const Ut=new Map;function Bt(e,t){var n={f:0,v:e,reactions:null,equals:Tn,rv:0,wv:0};return n}function Qe(e,t){const n=Bt(e);return Xi(n),n}function Oe(e,t=!1){var i;const n=Bt(e);return t||(n.equals=Ir),Rt&&re!==null&&re.l!==null&&((i=re.l).s??(i.s=[])).push(n),n}function yr(e,t){return Z(e,Ne(()=>E(e))),t}function Z(e,t,n=!1){ne!==null&&!We&&Nt()&&(ne.f&(Fe|Pr))!==0&&!(Re!=null&&Re.includes(e))&&ki();let i=n?rt(t):t;return Tr(e,i)}function Tr(e,t){if(!e.equals(t)){var n=e.v;jt?Ut.set(e,t):Ut.set(e,n),e.v=t,(e.f&Fe)!==0&&((e.f&ze)!==0&&An(e),Ue(e,(e.f&Le)===0?xe:ft)),e.wv=Gn(),Mn(e,ze),Nt()&&ie!==null&&(ie.f&xe)!==0&&(ie.f&(et|_t))===0&&(De===null?Zi([e]):De.push(e))}return t}function Mn(e,t){var n=e.reactions;if(n!==null)for(var i=Nt(),o=n.length,a=0;a<o;a++){var v=n[a],l=v.f;(l&ze)===0&&(!i&&v===ie||(Ue(v,t),(l&(xe|Le))!==0&&((l&Fe)!==0?Mn(v,ft):vr(v))))}}let Vi=!1;var nn,Dn,On,Un;function zi(){if(nn===void 0){nn=window,Dn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;On=it(t,"firstChild").get,Un=it(t,"nextSibling").get,tn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),tn(n)&&(n.__t=void 0)}}function Wr(e=""){return document.createTextNode(e)}function Jt(e){return On.call(e)}function lr(e){return Un.call(e)}function oe(e,t){return Jt(e)}function gt(e,t){{var n=Jt(e);return n instanceof Comment&&n.data===""?lr(n):n}}function ge(e,t=1,n=!1){let i=e;for(;t--;)i=lr(i);return i}function qi(e){e.textContent=""}function Bn(e){ie===null&&ne===null&&_i(),ne!==null&&(ne.f&Le)!==0&&ie===null&&yi(),jt&&wi()}function Gi(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function xt(e,t,n,i=!0){var o=ie,a={ctx:re,deps:null,nodes_start:null,nodes_end:null,f:e|ze,first:null,fn:t,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(n)try{cr(a),a.f|=pi}catch(c){throw st(a),c}else t!==null&&vr(a);var v=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(xn|Kt))===0;if(!v&&i&&(o!==null&&Gi(a,o),ne!==null&&(ne.f&Fe)!==0)){var l=ne;(l.effects??(l.effects=[])).push(a)}return a}function Vr(e){const t=xt(or,null,!1);return Ue(t,xe),t.teardown=e,t}function Cr(e){Bn();var t=ie!==null&&(ie.f&et)!==0&&re!==null&&!re.m;if(t){var n=re;(n.e??(n.e=[])).push({fn:e,effect:ie,reaction:ne})}else{var i=zr(e);return i}}function $i(e){return Bn(),St(e)}function Hi(e){const t=xt(_t,e,!0);return(n={})=>new Promise(i=>{n.outro?Pt(t,()=>{st(t),i(void 0)}):(st(t),i(void 0))})}function zr(e){return xt(Rn,e,!1)}function Pn(e,t){var n=re,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=St(()=>{e(),!i.ran&&(i.ran=!0,Z(n.l.r2,!0),Ne(t))})}function In(){var e=re;St(()=>{if(E(e.l.r2)){for(var t of e.l.r1){var n=t.effect;(n.f&xe)!==0&&Ue(n,ft),Tt(n)&&cr(n),t.ran=!1}e.l.r2.v=!1}})}function St(e){return xt(or,e,!0)}function Xe(e,t=[],n=Ot){const i=t.map(n);return fr(()=>e(...i.map(E)))}function fr(e,t=0){return xt(or|Pr|t,e,!0)}function wt(e,t=!0){return xt(or|et,e,!0,t)}function Fn(e){var t=e.teardown;if(t!==null){const n=jt,i=ne;on(!0),qe(null);try{t.call(null)}finally{on(n),qe(i)}}}function Nn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;(n.f&_t)!==0?n.parent=null:st(n,t),n=i}}function Yi(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&et)===0&&st(t),t=n}}function st(e,t=!0){var n=!1;(t||(e.f&gi)!==0)&&e.nodes_start!==null&&(Ki(e.nodes_start,e.nodes_end),n=!0),Nn(e,t&&!n),rr(e,0),Ue(e,ar);var i=e.transitions;if(i!==null)for(const a of i)a.stop();Fn(e);var o=e.parent;o!==null&&o.first!==null&&jn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Ki(e,t){for(;e!==null;){var n=e===t?null:lr(e);e.remove(),e=n}}function jn(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Pt(e,t){var n=[];qr(e,n,!0),Wn(n,()=>{st(e),t&&t()})}function Wn(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var o of e)o.out(i)}else t()}function qr(e,t,n){if((e.f&Je)===0){if(e.f^=Je,e.transitions!==null)for(const v of e.transitions)(v.is_global||n)&&t.push(v);for(var i=e.first;i!==null;){var o=i.next,a=(i.f&sr)!==0||(i.f&et)!==0;qr(i,t,a?n:!1),i=o}}}function Xt(e){Vn(e,!0)}function Vn(e,t){if((e.f&Je)!==0){e.f^=Je,(e.f&xe)===0&&(e.f^=xe),Tt(e)&&(Ue(e,ze),vr(e));for(var n=e.first;n!==null;){var i=n.next,o=(n.f&sr)!==0||(n.f&et)!==0;Vn(n,o?t:!1),n=i}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let It=[],kr=[];function zn(){var e=It;It=[],Dt(e)}function Qi(){var e=kr;kr=[],Dt(e)}function Gr(e){It.length===0&&queueMicrotask(zn),It.push(e)}function Ji(){It.length>0&&zn(),kr.length>0&&Qi()}let Ht=!1,Zt=!1,er=null,ct=!1,jt=!1;function on(e){jt=e}let Et=[];let ne=null,We=!1;function qe(e){ne=e}let ie=null;function ut(e){ie=e}let Re=null;function Xi(e){ne!==null&&ne.f&Sr&&(Re===null?Re=[e]:Re.push(e))}let _e=null,ke=0,De=null;function Zi(e){De=e}let qn=1,tr=0,nt=!1;function Gn(){return++qn}function Tt(e){var R;var t=e.f;if((t&ze)!==0)return!0;if((t&ft)!==0){var n=e.deps,i=(t&Le)!==0;if(n!==null){var o,a,v=(t&Qt)!==0,l=i&&ie!==null&&!nt,c=n.length;if(v||l){var g=e,y=g.parent;for(o=0;o<c;o++)a=n[o],(v||!((R=a==null?void 0:a.reactions)!=null&&R.includes(g)))&&(a.reactions??(a.reactions=[])).push(g);v&&(g.f^=Qt),l&&y!==null&&(y.f&Le)===0&&(g.f^=Le)}for(o=0;o<c;o++)if(a=n[o],Tt(a)&&En(a),a.wv>e.wv)return!0}(!i||ie!==null&&!nt)&&Ue(e,xe)}return!1}function eo(e,t){for(var n=t;n!==null;){if((n.f&Kt)!==0)try{n.fn(e);return}catch{n.f^=Kt}n=n.parent}throw Ht=!1,e}function an(e){return(e.f&ar)===0&&(e.parent===null||(e.parent.f&Kt)===0)}function dr(e,t,n,i){if(Ht){if(n===null&&(Ht=!1),an(t))throw e;return}if(n!==null&&(Ht=!0),eo(e,t),an(t))throw e}function $n(e,t,n=!0){var i=e.reactions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];Re!=null&&Re.includes(e)||((a.f&Fe)!==0?$n(a,t,!1):t===a&&(n?Ue(a,ze):(a.f&xe)!==0&&Ue(a,ft),vr(a)))}}function Hn(e){var C;var t=_e,n=ke,i=De,o=ne,a=nt,v=Re,l=re,c=We,g=e.f;_e=null,ke=0,De=null,nt=(g&Le)!==0&&(We||!ct||ne===null),ne=(g&(et|_t))===0?e:null,Re=null,rn(e.ctx),We=!1,tr++,e.f|=Sr;try{var y=(0,e.fn)(),R=e.deps;if(_e!==null){var w;if(rr(e,ke),R!==null&&ke>0)for(R.length=ke+_e.length,w=0;w<_e.length;w++)R[ke+w]=_e[w];else e.deps=R=_e;if(!nt)for(w=ke;w<R.length;w++)((C=R[w]).reactions??(C.reactions=[])).push(e)}else R!==null&&ke<R.length&&(rr(e,ke),R.length=ke);if(Nt()&&De!==null&&!We&&R!==null&&(e.f&(Fe|ft|ze))===0)for(w=0;w<De.length;w++)$n(De[w],e);return o!==null&&o!==e&&(tr++,De!==null&&(i===null?i=De:i.push(...De))),y}finally{_e=t,ke=n,De=i,ne=o,nt=a,Re=v,rn(l),We=c,e.f^=Sr}}function to(e,t){let n=t.reactions;if(n!==null){var i=di.call(n,e);if(i!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[i]=n[o],n.pop())}}n===null&&(t.f&Fe)!==0&&(_e===null||!_e.includes(t))&&(Ue(t,ft),(t.f&(Le|Qt))===0&&(t.f^=Qt),Ln(t),rr(t,0))}function rr(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)to(e,n[i])}function cr(e){var t=e.f;if((t&ar)===0){Ue(e,xe);var n=ie,i=re,o=ct;ie=e,ct=!0;try{(t&Pr)!==0?Yi(e):Nn(e),Fn(e);var a=Hn(e);e.teardown=typeof a=="function"?a:null,e.wv=qn;var v=e.deps,l;en&&Li&&e.f&ze}catch(c){dr(c,e,n,i||e.ctx)}finally{ct=o,ie=n}}}function ro(){try{Ri()}catch(e){if(er!==null)dr(e,er,null);else throw e}}function Yn(){var e=ct;try{var t=0;for(ct=!0;Et.length>0;){t++>1e3&&ro();var n=Et,i=n.length;Et=[];for(var o=0;o<i;o++){var a=io(n[o]);no(a)}Ut.clear()}}finally{Zt=!1,ct=e,er=null}}function no(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if((i.f&(ar|Je))===0)try{Tt(i)&&(cr(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?jn(i):i.fn=null))}catch(o){dr(o,i,null,i.ctx)}}}function vr(e){Zt||(Zt=!0,queueMicrotask(Yn));for(var t=er=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(_t|et))!==0){if((n&xe)===0)return;t.f^=xe}}Et.push(t)}function io(e){for(var t=[],n=e;n!==null;){var i=n.f,o=(i&(et|_t))!==0,a=o&&(i&xe)!==0;if(!a&&(i&Je)===0){if((i&Rn)!==0)t.push(n);else if(o)n.f^=xe;else try{Tt(n)&&cr(n)}catch(c){dr(c,n,null,n.ctx)}var v=n.first;if(v!==null){n=v;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return t}function oo(e){for(var t;;){if(Ji(),Et.length===0)return t;Zt=!0,Yn()}}async function ao(){await Promise.resolve(),oo()}function E(e){var t=e.f,n=(t&Fe)!==0;if(ne!==null&&!We){if(!(Re!=null&&Re.includes(e))){var i=ne.deps;e.rv<tr&&(e.rv=tr,_e===null&&i!==null&&i[ke]===e?ke++:_e===null?_e=[e]:(!nt||!_e.includes(e))&&_e.push(e))}}else if(n&&e.deps===null&&e.effects===null){var o=e,a=o.parent;a!==null&&(a.f&Le)===0&&(o.f^=Le)}return n&&(o=e,Tt(o)&&En(o)),jt&&Ut.has(e)?Ut.get(e):e.v}function Ne(e){var t=We;try{return We=!0,e()}finally{We=t}}const so=-7169;function Ue(e,t){e.f=e.f&so|t}function $r(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(at in e)Lr(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&at in n&&Lr(n)}}}function Lr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Lr(e[i],t)}catch{}const n=Br(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=_n(n);for(let o in i){const a=i[o].get;if(a)try{a.call(e)}catch{}}}}}const uo=["touchstart","touchmove"];function lo(e){return uo.includes(e)}let sn=!1;function fo(){sn||(sn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Kn(e){var t=ne,n=ie;qe(null),ut(null);try{return e()}finally{qe(t),ut(n)}}function Qn(e,t,n,i=n){e.addEventListener(t,()=>Kn(n));const o=e.__on_r;o?e.__on_r=()=>{o(),i(!0)}:e.__on_r=()=>i(!0),fo()}const Jn=new Set,Ar=new Set;function co(e,t,n,i={}){function o(a){if(i.capture||At.call(t,a),!a.cancelBubble)return Kn(()=>n==null?void 0:n.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Gr(()=>{t.addEventListener(e,o,i)}):t.addEventListener(e,o,i),o}function yt(e,t,n,i,o){var a={capture:i,passive:o},v=co(e,t,n,a);(t===document.body||t===window||t===document)&&Vr(()=>{t.removeEventListener(e,v,a)})}function vo(e){for(var t=0;t<e.length;t++)Jn.add(e[t]);for(var n of Ar)n(e)}function At(e){var N;var t=this,n=t.ownerDocument,i=e.type,o=((N=e.composedPath)==null?void 0:N.call(e))||[],a=o[0]||e.target,v=0,l=e.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var g=o.indexOf(t);if(g===-1)return;c<=g&&(v=c)}if(a=o[v]||e.target,a!==t){yn(e,"currentTarget",{configurable:!0,get(){return a||n}});var y=ne,R=ie;qe(null),ut(null);try{for(var w,C=[];a!==null;){var S=a.assignedSlot||a.parentNode||a.host||null;try{var H=a["__"+i];if(H!=null&&(!a.disabled||e.target===a))if(Ft(H)){var[G,...Q]=H;G.apply(a,[e,...Q])}else H.call(a,e)}catch(z){w?C.push(z):w=z}if(e.cancelBubble||S===t||S===null)break;a=S}if(w){for(let z of C)queueMicrotask(()=>{throw z});throw w}}finally{e.__root=t,delete e.currentTarget,qe(y),ut(R)}}}function ho(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Er(e,t){var n=ie;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function pe(e,t){var n=(t&Ii)!==0,i=(t&Fi)!==0,o,a=!e.startsWith("<!>");return()=>{o===void 0&&(o=ho(a?e:"<!>"+e),n||(o=Jt(o)));var v=i||Dn?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Jt(v),c=v.lastChild;Er(l,c)}else Er(v,v);return v}}function Yt(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Wr();return e.append(t,n),Er(t,n),e}function ue(e,t){e!==null&&e.before(t)}function lt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function po(e,t){return mo(e,t)}const pt=new Map;function mo(e,{target:t,anchor:n,props:i={},events:o,context:a,intro:v=!0}){zi();var l=new Set,c=R=>{for(var w=0;w<R.length;w++){var C=R[w];if(!l.has(C)){l.add(C);var S=lo(C);t.addEventListener(C,At,{passive:S});var H=pt.get(C);H===void 0?(document.addEventListener(C,At,{passive:S}),pt.set(C,1)):pt.set(C,H+1)}}};c(Ur(Jn)),Ar.add(c);var g=void 0,y=Hi(()=>{var R=n??t.appendChild(Wr());return wt(()=>{if(a){vt({});var w=re;w.c=a}o&&(i.$$events=o),g=e(R,i)||{},a&&ht()}),()=>{var S;for(var w of l){t.removeEventListener(w,At);var C=pt.get(w);--C===0?(document.removeEventListener(w,At),pt.delete(w)):pt.set(w,C)}Ar.delete(c),R!==n&&((S=R.parentNode)==null||S.removeChild(R))}});return go.set(g,y),g}let go=new WeakMap;function Ve(e,t,[n,i]=[0,0]){var o=e,a=null,v=null,l=Te,c=n>0?sr:0,g=!1;const y=(w,C=!0)=>{g=!0,R(C,w)},R=(w,C)=>{l!==(l=w)&&(l?(a?Xt(a):C&&(a=wt(()=>C(o))),v&&Pt(v,()=>{v=null})):(v?Xt(v):C&&(v=wt(()=>C(o,[n+1,i]))),a&&Pt(a,()=>{a=null})))};fr(()=>{g=!1,t(y),g||R(null,null)},c)}function Hr(e,t){return t}function bo(e,t,n,i){for(var o=[],a=t.length,v=0;v<a;v++)qr(t[v].e,o,!0);var l=a>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;qi(c),c.append(n),i.clear(),tt(e,t[0].prev,t[a-1].next)}Wn(o,()=>{for(var g=0;g<a;g++){var y=t[g];l||(i.delete(y.k),tt(e,y.prev,y.next)),st(y.e,!l)}})}function Yr(e,t,n,i,o,a=null){var v=e,l={flags:t,items:new Map,first:null},c=(t&kn)!==0;if(c){var g=e;v=g.appendChild(Wr())}var y=null,R=!1,w=jr(()=>{var C=n();return Ft(C)?C:C==null?[]:Ur(C)});fr(()=>{var C=E(w),S=C.length;R&&S===0||(R=S===0,wo(C,l,v,o,t,i,n),a!==null&&(S===0?y?Xt(y):y=wt(()=>a(v)):y!==null&&Pt(y,()=>{y=null})),E(w))})}function wo(e,t,n,i,o,a,v){var fe,ce,se,ve;var l=(o&Ei)!==0,c=(o&(Fr|Nr))!==0,g=e.length,y=t.items,R=t.first,w=R,C,S=null,H,G=[],Q=[],N,z,L,D;if(l)for(D=0;D<g;D+=1)N=e[D],z=a(N,D),L=y.get(z),L!==void 0&&((fe=L.a)==null||fe.measure(),(H??(H=new Set)).add(L));for(D=0;D<g;D+=1){if(N=e[D],z=a(N,D),L=y.get(z),L===void 0){var j=w?w.e.nodes_start:n;S=_o(j,t,S,S===null?t.first:S.next,N,z,D,i,o,v),y.set(z,S),G=[],Q=[],w=S.next;continue}if(c&&yo(L,N,D,o),(L.e.f&Je)!==0&&(Xt(L.e),l&&((ce=L.a)==null||ce.unfix(),(H??(H=new Set)).delete(L))),L!==w){if(C!==void 0&&C.has(L)){if(G.length<Q.length){var O=Q[0],Y;S=O.prev;var K=G[0],$=G[G.length-1];for(Y=0;Y<G.length;Y+=1)un(G[Y],O,n);for(Y=0;Y<Q.length;Y+=1)C.delete(Q[Y]);tt(t,K.prev,$.next),tt(t,S,K),tt(t,$,O),w=O,S=$,D-=1,G=[],Q=[]}else C.delete(L),un(L,w,n),tt(t,L.prev,L.next),tt(t,L,S===null?t.first:S.next),tt(t,S,L),S=L;continue}for(G=[],Q=[];w!==null&&w.k!==z;)(w.e.f&Je)===0&&(C??(C=new Set)).add(w),Q.push(w),w=w.next;if(w===null)continue;L=w}G.push(L),S=L,w=L.next}if(w!==null||C!==void 0){for(var ee=C===void 0?[]:Ur(C);w!==null;)(w.e.f&Je)===0&&ee.push(w),w=w.next;var le=ee.length;if(le>0){var Se=(o&kn)!==0&&g===0?n:null;if(l){for(D=0;D<le;D+=1)(se=ee[D].a)==null||se.measure();for(D=0;D<le;D+=1)(ve=ee[D].a)==null||ve.fix()}bo(t,ee,Se,y)}}l&&Gr(()=>{var Be;if(H!==void 0)for(L of H)(Be=L.a)==null||Be.apply()}),ie.first=t.first&&t.first.e,ie.last=S&&S.e}function yo(e,t,n,i){(i&Fr)!==0&&Tr(e.v,t),(i&Nr)!==0?Tr(e.i,n):e.i=n}function _o(e,t,n,i,o,a,v,l,c,g){var y=(c&Fr)!==0,R=(c&Mi)===0,w=y?R?Oe(o):Bt(o):o,C=(c&Nr)===0?v:Bt(v),S={i:C,v:w,k:a,a:null,e:null,prev:n,next:i};try{return S.e=wt(()=>l(e,w,C,g),Vi),S.e.prev=n&&n.e,S.e.next=i&&i.e,n===null?t.first=S:(n.next=S,n.e.next=S.e),i!==null&&(i.prev=S,i.e.prev=S.e),S}finally{}}function un(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==i;){var v=lr(a);o.before(a),a=v}}function tt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Mr(e,t,n){var i=e,o,a;fr(()=>{o!==(o=t())&&(a&&(Pt(a),a=null),o&&(a=wt(()=>n(i,o))))},sr)}function Ro(e,t,n){var i=e==null?"":""+e;return i===""?null:i}function Xn(e,t,n,i,o,a){var v=e.__className;if(v!==n||v===void 0){var l=Ro(n);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}return a}const xo=Symbol("is custom element"),So=Symbol("is html");function ln(e,t,n,i){var o=To(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[bi]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Co(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function To(e){return e.__attributes??(e.__attributes={[xo]:e.nodeName.includes("-"),[So]:e.namespaceURI===Ni})}var fn=new Map;function Co(e){var t=fn.get(e.nodeName);if(t)return t;fn.set(e.nodeName,t=[]);for(var n,i=e,o=Element.prototype;o!==i;){n=_n(i);for(var a in n)n[a].set&&t.push(a);i=Br(i)}return t}function Dr(e,t,n=t){var i=Nt();Qn(e,"input",o=>{var a=o?e.defaultValue:e.value;if(a=_r(e)?Rr(a):a,n(a),i&&a!==(a=t())){var v=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(l,e.value.length))}}),Ne(t)==null&&e.value&&n(_r(e)?Rr(e.value):e.value),St(()=>{var o=t();_r(e)&&o===Rr(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ko(e,t,n=t){Qn(e,"change",i=>{var o=i?e.defaultChecked:e.checked;n(o)}),Ne(t)==null&&n(e.checked),St(()=>{var i=t();e.checked=!!i})}function _r(e){var t=e.type;return t==="number"||t==="range"}function Rr(e){return e===""?null:+e}function dn(e,t){return e===t||(e==null?void 0:e[at])===t}function Lo(e={},t,n,i){return zr(()=>{var o,a;return St(()=>{o=a,a=[],Ne(()=>{e!==n(...a)&&(t(e,...a),o&&dn(n(...o),e)&&t(null,...o))})}),()=>{Gr(()=>{a&&dn(n(...a),e)&&t(null,...a)})}}),e}function Ao(e){return function(...t){var n=t[0];return n.preventDefault(),e==null?void 0:e.apply(this,t)}}function Wt(e=!1){const t=re,n=t.l.u;if(!n)return;let i=()=>$r(t.s);if(e){let o=0,a={};const v=Ot(()=>{let l=!1;const c=t.s;for(const g in c)c[g]!==a[g]&&(a[g]=c[g],l=!0);return l&&o++,o});i=()=>E(v)}n.b.length&&$i(()=>{cn(t,i),Dt(n.b)}),Cr(()=>{const o=Ne(()=>n.m.map(hi));return()=>{for(const a of o)typeof a=="function"&&a()}}),n.a.length&&Cr(()=>{cn(t,i),Dt(n.a)})}function cn(e,t){if(e.l.s)for(const n of e.l.s)E(n);t()}function vn(e,t){var a;var n=(a=e.$$events)==null?void 0:a[t.type],i=Ft(n)?n.slice():n==null?[]:[n];for(var o of i)o.call(this,t)}function Kr(e,t,n){if(e==null)return t(void 0),n&&n(void 0),ot;const i=Ne(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}const mt=[];function Zn(e,t){return{subscribe:Vt(e,t).subscribe}}function Vt(e,t=ot){let n=null;const i=new Set;function o(l){if(Cn(e,l)&&(e=l,n)){const c=!mt.length;for(const g of i)g[1](),mt.push(g,e);if(c){for(let g=0;g<mt.length;g+=2)mt[g][0](mt[g+1]);mt.length=0}}}function a(l){o(l(e))}function v(l,c=ot){const g=[l,c];return i.add(g),i.size===1&&(n=t(o,a)||ot),l(e),()=>{i.delete(g),i.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:v}}function ei(e,t,n){const i=!Array.isArray(e),o=i?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Zn(n,(v,l)=>{let c=!1;const g=[];let y=0,R=ot;const w=()=>{if(y)return;R();const S=t(i?g[0]:g,v,l);a?v(S):R=typeof S=="function"?S:ot},C=o.map((S,H)=>Kr(S,G=>{g[H]=G,y&=~(1<<H),c&&w()},()=>{y|=1<<H}));return c=!0,w(),function(){Dt(C),R(),c=!1}})}function Eo(e){let t;return Kr(e,n=>t=n)(),t}let $t=!1,Or=Symbol();function bt(e,t,n){const i=n[t]??(n[t]={store:null,source:Oe(void 0),unsubscribe:ot});if(i.store!==e&&!(Or in n))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=ot;else{var o=!0;i.unsubscribe=Kr(e,a=>{o?i.source.v=a:Z(i.source,a)}),o=!1}return e&&Or in n?Eo(e):E(i.source)}function hr(){const e={};function t(){Vr(()=>{for(var n in e)e[n].unsubscribe();yn(e,Or,{enumerable:!1,value:!0})})}return[e,t]}function Mo(e){var t=$t;try{return $t=!1,[e(),$t]}finally{$t=t}}const Do={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Lt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let o=e.props[i];Lt(o)&&(o=o());const a=it(o,t);if(a&&a.set)return a.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Lt(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const o=it(i,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===at||t===Sn)return!1;for(let n of e.props)if(Lt(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Lt(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function hn(...e){return new Proxy({props:e},Do)}function pn(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function Ze(e,t,n,i){var j;var o=(n&Di)!==0,a=!Rt||(n&Oi)!==0,v=(n&Bi)!==0,l=(n&Pi)!==0,c=!1,g;v?[g,c]=Mo(()=>e[t]):g=e[t];var y=at in e||Sn in e,R=v&&(((j=it(e,t))==null?void 0:j.set)??(y&&t in e&&(O=>e[t]=O)))||void 0,w=i,C=!0,S=!1,H=()=>(S=!0,C&&(C=!1,l?w=Ne(i):w=i),w);g===void 0&&i!==void 0&&(R&&a&&Si(),g=H(),R&&R(g));var G;if(a)G=()=>{var O=e[t];return O===void 0?H():(C=!0,S=!1,O)};else{var Q=(o?Ot:jr)(()=>e[t]);Q.f|=mi,G=()=>{var O=E(Q);return O!==void 0&&(w=void 0),O===void 0?w:O}}if((n&Ui)===0)return G;if(R){var N=e.$$legacy;return function(O,Y){return arguments.length>0?((!a||!Y||N||c)&&R(Y?G():O),O):G()}}var z=!1,L=Oe(g),D=Ot(()=>{var O=G(),Y=E(L);return z?(z=!1,Y):L.v=O});return v&&E(D),o||(D.equals=Ir),function(O,Y){if(arguments.length>0){const K=Y?E(D):a&&v?rt(O):O;if(!D.equals(K)){if(z=!0,Z(L,K),S&&w!==void 0&&(w=K),pn(D))return O;Ne(()=>E(D))}return O}return pn(D)?D.v:E(D)}}function Qr(e){re===null&&ur(),Rt&&re.l!==null?ri(re).m.push(e):Cr(()=>{const t=Ne(e);if(typeof t=="function")return t})}function ti(e){re===null&&ur(),Qr(()=>()=>Ne(e))}function Oo(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function Uo(){const e=re;return e===null&&ur(),(t,n,i)=>{var a;const o=(a=e.s.$$events)==null?void 0:a[t];if(o){const v=Ft(o)?o.slice():[o],l=Oo(t,n,i);for(const c of v)c.call(e.x,l);return!l.defaultPrevented}return!0}}function Bo(e){re===null&&ur(),re.l===null&&xi(),ri(re).a.push(e)}function ri(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Po="5";var wn;typeof window<"u"&&((wn=window.__svelte??(window.__svelte={})).v??(wn.v=new Set)).add(Po);Ai();function Io(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,i,o,a,v=[],l="",c=e.split("/");for(c[0]||c.shift();o=c.shift();)n=o[0],n==="*"?(v.push("wild"),l+="/(.*)"):n===":"?(i=o.indexOf("?",1),a=o.indexOf(".",1),v.push(o.substring(1,~i?i:~a?a:o.length)),l+=~i&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~i?"?":"")+"\\"+o.substring(a))):l+="/"+o;return{keys:v,pattern:new RegExp("^"+l+"/?$","i")}}function mn(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let i="";return n>-1&&(i=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:i}}const Jr=Zn(null,function(t){t(mn());const n=()=>{t(mn())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ei(Jr,e=>e.location);ei(Jr,e=>e.querystring);const gn=Vt(void 0);function Fo(e){e?window.scrollTo(e.__svelte_spa_router_scrollX,e.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function No(e,t){vt(t,!1);let n=Ze(t,"routes",24,()=>({})),i=Ze(t,"prefix",8,""),o=Ze(t,"restoreScrollState",8,!1);class a{constructor(j,O){if(!O||typeof O!="function"&&(typeof O!="object"||O._sveltesparouter!==!0))throw Error("Invalid component object");if(!j||typeof j=="string"&&(j.length<1||j.charAt(0)!="/"&&j.charAt(0)!="*")||typeof j=="object"&&!(j instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:Y,keys:K}=Io(j);this.path=j,typeof O=="object"&&O._sveltesparouter===!0?(this.component=O.component,this.conditions=O.conditions||[],this.userData=O.userData,this.props=O.props||{}):(this.component=()=>Promise.resolve(O),this.conditions=[],this.props={}),this._pattern=Y,this._keys=K}match(j){if(i()){if(typeof i()=="string")if(j.startsWith(i()))j=j.substr(i().length)||"/";else return null;else if(i()instanceof RegExp){const $=j.match(i());if($&&$[0])j=j.substr($[0].length)||"/";else return null}}const O=this._pattern.exec(j);if(O===null)return null;if(this._keys===!1)return O;const Y={};let K=0;for(;K<this._keys.length;){try{Y[this._keys[K]]=decodeURIComponent(O[K+1]||"")||null}catch{Y[this._keys[K]]=null}K++}return Y}async checkConditions(j){for(let O=0;O<this.conditions.length;O++)if(!await this.conditions[O](j))return!1;return!0}}const v=[];n()instanceof Map?n().forEach((D,j)=>{v.push(new a(j,D))}):Object.keys(n()).forEach(D=>{v.push(new a(D,n()[D]))});let l=Oe(null),c=Oe(null),g=Oe({});const y=Uo();async function R(D,j){await ao(),y(D,j)}let w=null,C=null;o()&&(C=D=>{D.state&&(D.state.__svelte_spa_router_scrollY||D.state.__svelte_spa_router_scrollX)?w=D.state:w=null},window.addEventListener("popstate",C),Bo(()=>{Fo(w)}));let S=null,H=null;const G=Jr.subscribe(async D=>{S=D;let j=0;for(;j<v.length;){const O=v[j].match(D.location);if(!O){j++;continue}const Y={route:v[j].path,location:D.location,querystring:D.querystring,userData:v[j].userData,params:O&&typeof O=="object"&&Object.keys(O).length?O:null};if(!await v[j].checkConditions(Y)){Z(l,null),H=null,R("conditionsFailed",Y);return}R("routeLoading",Object.assign({},Y));const K=v[j].component;if(H!=K){K.loading?(Z(l,K.loading),H=K,Z(c,K.loadingParams),Z(g,{}),R("routeLoaded",Object.assign({},Y,{component:E(l),name:E(l).name,params:E(c)}))):(Z(l,null),H=null);const $=await K();if(D!=S)return;Z(l,$&&$.default||$),H=K}O&&typeof O=="object"&&Object.keys(O).length?Z(c,O):Z(c,null),Z(g,v[j].props),R("routeLoaded",Object.assign({},Y,{component:E(l),name:E(l).name,params:E(c)})).then(()=>{gn.set(E(c))});return}Z(l,null),H=null,gn.set(void 0)});ti(()=>{G(),C&&window.removeEventListener("popstate",C)}),Pn(()=>$r(o()),()=>{history.scrollRestoration=o()?"manual":"auto"}),In(),Wt();var Q=Yt(),N=gt(Q);{var z=D=>{var j=Yt(),O=gt(j);Mr(O,()=>E(l),(Y,K)=>{K(Y,hn({get params(){return E(c)}},()=>E(g),{$$events:{routeEvent($){vn.call(this,t,$)}}}))}),ue(D,j)},L=D=>{var j=Yt(),O=gt(j);Mr(O,()=>E(l),(Y,K)=>{K(Y,hn(()=>E(g),{$$events:{routeEvent($){vn.call(this,t,$)}}}))}),ue(D,j)};Ve(N,D=>{E(c)?D(z):D(L,!1)})}ue(e,Q),ht()}var jo=pe(`<div class="h-full w-full flex flex-col mx-auto border p-5 rounded-3xl items-center justify-center space-y-4"><h1 class="text-2xl font-bold">ğŸ‘‹ Welcome Home!</h1> <p class="text-center px-4">ì´ê³³ì€ Home í˜ì´ì§€ì…ë‹ˆë‹¤.  
    ì•± ë„¤ë¹„ì—ì„œ â€œì±„íŒ…â€ ë˜ëŠ” â€œìŒì„±ì°¸ì¡°â€ë¡œ ì´ë™í•´ ë³´ì„¸ìš”.</p> <a href="#/LLM" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">ì±„íŒ… ì‹œì‘</a> <a href="#/voice_reference" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">ìŒì„± ì°¸ì¡° ì‹œì‘</a></div>`);function Wo(e){var t=jo();ue(e,t)}const Mt=Vt(null);async function Vo(e,t){return new Promise(n=>{Mt.set({name:e,parameters:{...t},resolver:i=>n(i)})})}const nr=Vt(null);async function zo(e,t,n){return new Promise(i=>{nr.set({name:e,parameters:{...t},exceedLimit:n,resolver:o=>i(o)})})}const ir=Vt(null);async function qo(e){return new Promise(t=>{ir.set({name:e,resolver:n=>t(n)})})}var Go=pe('<input type="checkbox" class="h-5 w-5">'),$o=pe('<input type="number" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),Ho=pe('<input type="text" class="w-full px-3 py-2 border rounded focus:outline-none focus:ring">'),Yo=pe('<div class="mb-4"><span class="block mb-2 font-medium"> </span> <!></div>'),Ko=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-8 min-w-[320px] max-w-[90vw] shadow-lg"><h2 class="text-xl font-bold mb-6"> </h2> <form><!> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">ì·¨ì†Œ</button> <button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">í™•ì¸</button></div></form></div></div>');function Qo(e,t){vt(t,!1);const[n,i]=hr(),o=()=>bt(Mt,"$ApprovalModalStore",n);let a=Ze(t,"name",8),v=Ze(t,"parameters",8),l=Oe({});Qr(()=>{Z(l,{...v()})});function c(){var z,L;const N={};for(const D in E(l)){const j=v()[D],O=E(l)[D];switch(typeof j){case"number":N[D]=Number(O);break;case"boolean":N[D]=!!O;break;default:N[D]=O}}(L=(z=o())==null?void 0:z.resolver)==null||L.call(z,N),Mt.set(null)}function g(){var N,z;(z=(N=o())==null?void 0:N.resolver)==null||z.call(N,null),Mt.set(null)}Wt();var y=Ko(),R=oe(y),w=oe(R),C=oe(w),S=ge(w,2),H=oe(S);Yr(H,1,()=>Object.entries(E(l)),Hr,(N,z)=>{let L=()=>E(z)[0];var D=Yo(),j=oe(D),O=oe(j),Y=ge(j,2);{var K=ee=>{var le=Go();ko(le,()=>E(l)[L()],Se=>yr(l,E(l)[L()]=Se)),ue(ee,le)},$=(ee,le)=>{{var Se=ce=>{var se=$o();Dr(se,()=>E(l)[L()],ve=>yr(l,E(l)[L()]=ve)),ue(ce,se)},fe=ce=>{var se=Ho();Dr(se,()=>E(l)[L()],ve=>yr(l,E(l)[L()]=ve)),ue(ce,se)};Ve(ee,ce=>{typeof v()[L()]=="number"?ce(Se):ce(fe,!1)},le)}};Ve(Y,ee=>{typeof v()[L()]=="boolean"?ee(K):ee($,!1)})}Xe(()=>lt(O,L())),ue(N,D)});var G=ge(H,2),Q=oe(G);Xe(()=>lt(C,a())),yt("click",Q,g),yt("submit",S,Ao(c)),ue(e,y),ht(),i()}var Jo=pe('<div class="mb-4 text-red-600 font-semibold"> </div>'),Xo=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-8 min-w-[320px] max-w-[90vw] shadow-lg"><h2 class="text-xl font-bold mb-6">ë¹„ì •ìƒì  ì†¡ê¸ˆ ê¸ˆì•¡ì…ë‹ˆë‹¤.</h2> <div class="mb-4"><!></div> <div class="flex gap-3 justify-end mt-6"><button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">í™•ì¸</button></div></div></div>');function Zo(e,t){vt(t,!1);const[n,i]=hr(),o=()=>bt(nr,"$DepositWarningModalStore",n);Ze(t,"name",8);let a=Ze(t,"parameters",8),v=Ze(t,"exceedLimit",8),l=Oe({});Qr(()=>{Z(l,{...a()})});let c=Oe("");function g(){var Q,N;(N=(Q=o())==null?void 0:Q.resolver)==null||N.call(Q,null),nr.set(null)}Pn(()=>(E(l),$r(v())),()=>{E(l).amount!=null&&E(l).balance!=null&&E(l).amount>E(l).balance?Z(c,`ğŸ’¸ í˜„ì¬ ë³´ìœ  ê¸ˆì•¡(${E(l).balance.toLocaleString()}ì›)ì„ ì´ˆê³¼í•˜ì—¬ ${E(l).amount.toLocaleString()}ì›ì„ ì†¡ê¸ˆí•˜ë ¤ê³  í•©ë‹ˆë‹¤.`):E(l).amount!=null&&E(l).amount>=v()?Z(c,`ğŸ’¸ ì œí•œ ê¸ˆì•¡(${v().toLocaleString()}ì›)ì„ ì´ˆê³¼í•˜ì—¬ ${E(l).amount.toLocaleString()}ì›ì„ ì†¡ê¸ˆí•˜ë ¤ê³  í•©ë‹ˆë‹¤.`):Z(c,"")}),In(),Wt();var y=Xo(),R=oe(y),w=ge(oe(R),2),C=oe(w);{var S=Q=>{var N=Jo(),z=oe(N);Xe(()=>lt(z,E(c))),ue(Q,N)};Ve(C,Q=>{E(c)&&Q(S)})}var H=ge(w,2),G=oe(H);yt("click",G,g),ue(e,y),ht(),i()}var ea=pe('<div class="fixed inset-0 bg-black/10 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-8 min-w-[320px] max-w-[90vw] shadow-lg"><h2 class="text-xl font-bold mb-6"> </h2> <button type="button" class="px-4 py-2 rounded border bg-gray-100 hover:bg-gray-200">ì·¨ì†Œ</button> <button type="submit" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">í™•ì¸</button></div></div>');function ta(e,t){vt(t,!1);const[n,i]=hr(),o=()=>bt(ir,"$ToolModalStore",n);let a=Ze(t,"name",8);function v(){var C,S;(S=(C=o())==null?void 0:C.resolver)==null||S.call(C,null),ir.set(null)}setTimeout(()=>{v()},3e3),Wt();var l=ea(),c=oe(l),g=oe(c),y=oe(g),R=ge(g,2),w=ge(R,2);Xe(()=>lt(y,a())),yt("click",R,v),yt("click",w,v),ue(e,l),ht(),i()}const ra=(e,t)=>e.key==="Enter"&&t();var na=pe('<div class="w-full bg-amber-50 rounded-xl  px-3 py-2 text-sm break-words"> </div>'),ia=pe('<span class="text-xs text-gray-500">Bella</span><br>',1),oa=pe("<div><!> </div>"),aa=pe('<div class="h-full w-full flex flex-col mx-auto border p-5 rounded-3xl"><div class="flex-1 overflow-auto p-2 space-y-2"></div> <div class="flex gap-2 p-2 border-t"><input class="flex-1 px-3 py-2 border text-sm" placeholder="ë©”ì‹œì§€ ì…ë ¥"> <button class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200">ì „ì†¡</button></div></div> <!> <!> <!>',1);function sa(e,t){vt(t,!0);const[n,i]=hr(),o=()=>bt(Mt,"$ApprovalModalStore",n),a=()=>bt(nr,"$DepositWarningModalStore",n),v=()=>bt(ir,"$ToolModalStore",n);let l=crypto.randomUUID(),c=rt([{role:"assistant",content:"ì•ˆë…•í•˜ì„¸ìš”!"},{role:"user",content:"ì•ˆë…•í•˜ì„¸ìš”!"}]),g=Qe(""),y;async function R($,ee,le=!0){typeof $=="string"?c.push({role:"user",content:$}):c.push({role:"user",content:"APPROVAL_REQUIRED"});const Se=await fetch("/stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:ee,query:$})});if(!Se.body)return;const fe=Se.body.getReader(),ce=new TextDecoder;let se=null;for(;;){const{value:ve,done:Be}=await fe.read();if(Be)break;const Ge=ce.decode(ve);for(let u of Ge.split(`

`)){if(!u.startsWith("data: "))continue;const r=u.slice(6);if(r!=="[DONE]")if(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/.test(r)){const s=JSON.parse(r.match(/^\[TOOL_END\](.*)\[\/TOOL_END\]$/)[1]);c.push({role:"assistant",content:s.name,type:"tool"}),await qo(s.name)}else if(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/.test(r))if(le){const[s,h,m]=r.match(/\[APPROVAL_REQUIRED\](.*?):\s*(\{.*\})\[\/APPROVAL_REQUIRED\]/)||[];if(h&&m)return{name:h,parameters:JSON.parse(m)}}else{const s=r.match(/^\[APPROVAL_REQUIRED\](.*)\[\/APPROVAL_REQUIRED\]$/)[1];c.push({role:"assistant",content:s,type:"tool"})}else se?c[c.length-1].content=c[c.length-1].content+r:(se={role:"assistant",content:r},c.push(se))}}return setTimeout(()=>y==null?void 0:y.scrollTo({top:y.scrollHeight}),0),null}let w=5e4;async function C(){const $=E(g).trim(),ee=await R($,l);if(ee){ee.parameters.amount>=w&&await zo(ee.name,ee.parameters,w);const le=await Vo(ee.name,ee.parameters);await R(le||{address:"",amount:0},l,!1)}}var S=aa(),H=gt(S),G=oe(H);Yr(G,21,()=>c,Hr,($,ee)=>{var le=Yt(),Se=gt(le);{var fe=se=>{var ve=na(),Be=oe(ve);Xe(()=>lt(Be,`ì‹¤í–‰ : ${E(ee).content??""}`)),ue(se,ve)},ce=se=>{var ve=oa(),Be=oe(ve);{var Ge=r=>{var s=ia();ue(r,s)};Ve(Be,r=>{E(ee).role=="assistant"&&E(ee).type!="tool"&&r(Ge)})}var u=ge(Be);Xe(()=>{Xn(ve,1,`max-w-[85%] px-3 py-2 text-sm break-words rounded-xl
			${E(ee).role==="user"?"ml-auto bg-gray-100":"mr-auto bg-amber-100"}`),lt(u,` ${E(ee).content??""}`)}),ue(se,ve)};Ve(Se,se=>{E(ee).type=="tool"?se(fe):se(ce,!1)})}ue($,le)}),Lo(G,$=>y=$,()=>y);var Q=ge(G,2),N=oe(Q);N.__keydown=[ra,C];var z=ge(N,2);z.__click=C;var L=ge(H,2);{var D=$=>{Qo($,{get name(){return o().name},get parameters(){return o().parameters}})};Ve(L,$=>{o()&&$(D)})}var j=ge(L,2);{var O=$=>{Zo($,{get name(){return a().name},get parameters(){return a().parameters},exceedLimit:w})};Ve(j,$=>{a()&&$(O)})}var Y=ge(j,2);{var K=$=>{ta($,{get name(){return v().name}})};Ve(Y,$=>{v()&&$(K)})}Dr(N,()=>E(g),$=>Z(g,$)),ue(e,S),ht(),i()}vo(["keydown","click"]);var ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ua(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xr={exports:{}},bn;function la(){return bn||(bn=1,function(e){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function t(u,r){if(!u)throw"First parameter is required.";r=r||{type:"video"},r=new n(u,r);var s=this;function h(p){return r.disableLogs||console.log("RecordRTC version: ",s.version),p&&(r=new n(u,p)),r.disableLogs||console.log("started recording "+r.type+" stream."),k?(k.clearRecordedData(),k.record(),P("recording"),s.recordingDuration&&T(),s):(m(function(){s.recordingDuration&&T()}),s)}function m(p){p&&(r.initCallback=function(){p(),p=r.initCallback=null});var B=new i(u,r);k=new B(u,r),k.record(),P("recording"),r.disableLogs||console.log("Initialized recorderType:",k.constructor.name,"for output-type:",r.type)}function b(p){if(p=p||function(){},!k){U();return}if(s.state==="paused"){s.resumeRecording(),setTimeout(function(){b(p)},1);return}s.state!=="recording"&&!r.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',s.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),r.type!=="gif"?k.stop(B):(k.stop(),B()),P("stopped");function B(V){if(!k){typeof p.call=="function"?p.call(s,""):p("");return}Object.keys(k).forEach(function(F){typeof k[F]!="function"&&(s[F]=k[F])});var d=k.blob;if(!d)if(V)k.blob=d=V;else throw"Recording failed.";if(d&&!r.disableLogs&&console.log(d.type,"->",Q(d.size)),p){var _;try{_=y.createObjectURL(d)}catch{}typeof p.call=="function"?p.call(s,_):p(_)}r.autoWriteToDisk&&I(function(F){var W={};W[r.type+"Blob"]=F,fe.Store(W)})}}function x(){if(!k){U();return}if(s.state!=="recording"){r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",s.state);return}P("paused"),k.pause(),r.disableLogs||console.log("Paused recording.")}function f(){if(!k){U();return}if(s.state!=="paused"){r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",s.state);return}P("recording"),k.resume(),r.disableLogs||console.log("Resumed recording.")}function A(p){postMessage(new FileReaderSync().readAsDataURL(p))}function I(p,B){if(!p)throw"Pass a callback function over getDataURL.";var V=B?B.blob:(k||{}).blob;if(!V){r.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){I(p,B)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var d=F(A);d.onmessage=function(W){p(W.data)},d.postMessage(V)}else{var _=new FileReader;_.readAsDataURL(V),_.onload=function(W){p(W.target.result)}}function F(W){try{var te=y.createObjectURL(new Blob([W.toString(),"this.onmessage =  function (eee) {"+W.name+"(eee.data);}"],{type:"application/javascript"})),J=new Worker(te);return y.revokeObjectURL(te),J}catch{}}}function T(p){if(p=p||0,s.state==="paused"){setTimeout(function(){T(p)},1e3);return}if(s.state!=="stopped"){if(p>=s.recordingDuration){b(s.onRecordingStopped);return}p+=1e3,setTimeout(function(){T(p)},1e3)}}function P(p){s&&(s.state=p,typeof s.onStateChanged.call=="function"?s.onStateChanged.call(s,p):s.onStateChanged(p))}var M='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function U(){r.disableLogs!==!0&&console.warn(M)}var k,q={startRecording:h,stopRecording:b,pauseRecording:x,resumeRecording:f,initRecorder:m,setRecordingDuration:function(p,B){if(typeof p>"u")throw"recordingDuration is required.";if(typeof p!="number")throw"recordingDuration must be a number.";return s.recordingDuration=p,s.onRecordingStopped=B||function(){},{onRecordingStopped:function(V){s.onRecordingStopped=V}}},clearRecordedData:function(){if(!k){U();return}k.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!k){U();return}return k.blob},getDataURL:I,toURL:function(){if(!k){U();return}return y.createObjectURL(k.blob)},getInternalRecorder:function(){return k},save:function(p){if(!k){U();return}N(k.blob,p)},getFromDisk:function(p){if(!k){U();return}t.getFromDisk(r.type,p)},setAdvertisementArray:function(p){r.advertisement=[];for(var B=p.length,V=0;V<B;V++)r.advertisement.push({duration:V,image:p[V]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){s.state==="recording"&&!r.disableLogs&&console.warn("Stop an active recorder."),k&&typeof k.clearRecordedData=="function"&&k.clearRecordedData(),k=null,P("inactive"),s.blob=null},onStateChanged:function(p){r.disableLogs||console.log("Recorder state changed:",p)},state:"inactive",getState:function(){return s.state},destroy:function(){var p=r.disableLogs;r={disableLogs:!0},s.reset(),P("destroyed"),q=s=null,O.AudioContextConstructor&&(O.AudioContextConstructor.close(),O.AudioContextConstructor=null),r.disableLogs=p,r.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return s=q,q;for(var X in q)this[X]=q[X];return s=this,q}t.version="5.6.2",e.exports=t,t.getFromDisk=function(u,r){if(!r)throw"callback is mandatory.";console.log("Getting recorded "+(u==="all"?"blobs":u+" blob ")+" from disk!"),fe.Fetch(function(s,h){u!=="all"&&h===u+"Blob"&&r&&r(s),u==="all"&&r&&r(s,h.replace("Blob",""))})},t.writeToDisk=function(u){console.log("Writing recorded blob(s) to disk!"),u=u||{},u.audio&&u.video&&u.gif?u.audio.getDataURL(function(r){u.video.getDataURL(function(s){u.gif.getDataURL(function(h){fe.Store({audioBlob:r,videoBlob:s,gifBlob:h})})})}):u.audio&&u.video?u.audio.getDataURL(function(r){u.video.getDataURL(function(s){fe.Store({audioBlob:r,videoBlob:s})})}):u.audio&&u.gif?u.audio.getDataURL(function(r){u.gif.getDataURL(function(s){fe.Store({audioBlob:r,gifBlob:s})})}):u.video&&u.gif?u.video.getDataURL(function(r){u.gif.getDataURL(function(s){fe.Store({videoBlob:r,gifBlob:s})})}):u.audio?u.audio.getDataURL(function(r){fe.Store({audioBlob:r})}):u.video?u.video.getDataURL(function(r){fe.Store({videoBlob:r})}):u.gif&&u.gif.getDataURL(function(r){fe.Store({gifBlob:r})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(u,r){return!r.recorderType&&!r.type&&(r.audio&&r.video?r.type="video":r.audio&&!r.video&&(r.type="audio")),r.recorderType&&!r.type&&(r.recorderType===le||r.recorderType===ee||typeof Ge<"u"&&r.recorderType===Ge?r.type="video":r.recorderType===ce?r.type="gif":r.recorderType===$?r.type="audio":r.recorderType===K&&(L(u,"audio").length&&L(u,"video").length||!L(u,"audio").length&&L(u,"video").length?r.type="video":L(u,"audio").length&&!L(u,"video").length&&(r.type="audio"))),typeof K<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(r.mimeType||(r.mimeType="video/webm"),r.type||(r.type=r.mimeType.split("/")[0]),r.bitsPerSecond),r.type||(r.mimeType&&(r.type=r.mimeType.split("/")[0]),r.type||(r.type="audio")),r}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(u,r){var s;return(S||R||w)&&(s=$),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!S&&(s=K),r.type==="video"&&(S||w)&&(s=le,typeof Ge<"u"&&typeof ReadableStream<"u"&&(s=Ge)),r.type==="gif"&&(s=ce),r.type==="canvas"&&(s=ee),Y()&&s!==ee&&s!==ce&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(L(u,"video").length||L(u,"audio").length)&&(r.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(s=K):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(s=K)),u instanceof Array&&u.length&&(s=ve),r.recorderType&&(s=r.recorderType),!r.disableLogs&&s&&s.name&&console.log("Using recorderType:",s.name||s.constructor.name),!s&&H&&(s=K),s}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function o(u){this.addStream=function(r){r&&(u=r)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r=this.mediaType,s,h=this.mimeType||{audio:null,video:null,gif:null};if(typeof r.audio!="function"&&Y()&&!L(u,"audio").length&&(r.audio=!1),typeof r.video!="function"&&Y()&&!L(u,"video").length&&(r.video=!1),typeof r.gif!="function"&&Y()&&!L(u,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(s=null,typeof r.audio=="function"&&(s=r.audio),this.audioRecorder=new t(u,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:s,mimeType:h.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){s=null,typeof r.video=="function"&&(s=r.video);var m=u;if(Y()&&r.audio&&typeof r.audio=="function"){var b=L(u,"video")[0];C?(m=new G,m.addTrack(b),s&&s===le&&(s=K)):(m=new G,m.addTrack(b))}this.videoRecorder=new t(m,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:s,mimeType:h.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var x=this,f=Y()===!0;(r.audio instanceof $&&r.video||r.audio!==!0&&r.video!==!0&&r.audio!==r.video)&&(f=!1),f===!0?(x.audioRecorder=null,x.videoRecorder.startRecording()):x.videoRecorder.initRecorder(function(){x.audioRecorder.initRecorder(function(){x.videoRecorder.startRecording(),x.audioRecorder.startRecording()})})}r.gif&&(s=null,typeof r.gif=="function"&&(s=r.gif),this.gifRecorder=new t(u,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:s,mimeType:h.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(r){r=r||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(s){r(s,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(s){r(s,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(s){r(s,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(r){var s={};return this.audioRecorder&&(s.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(s.video=this.videoRecorder.getBlob()),this.gifRecorder&&(s.gif=this.gifRecorder.getBlob()),r&&r(s),s},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(r){this.getBlob(function(m){m.audio&&m.video?s(m.audio,function(b){s(m.video,function(x){r({audio:b,video:x})})}):m.audio?s(m.audio,function(b){r({audio:b})}):m.video&&s(m.video,function(b){r({video:b})})});function s(m,b){if(typeof Worker<"u"){var x=h(function(I){postMessage(new FileReaderSync().readAsDataURL(I))});x.onmessage=function(A){b(A.data)},x.postMessage(m)}else{var f=new FileReader;f.readAsDataURL(m),f.onload=function(A){b(A.target.result)}}}function h(m){var b=y.createObjectURL(new Blob([m.toString(),"this.onmessage =  function (eee) {"+m.name+"(eee.data);}"],{type:"application/javascript"})),x=new Worker(b),f;if(typeof y<"u")f=y;else if(typeof webkitURL<"u")f=webkitURL;else throw"Neither URL nor webkitURL detected.";return f.revokeObjectURL(b),x}},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(r){r=r||{audio:!0,video:!0,gif:!0},r.audio&&this.audioRecorder&&this.audioRecorder.save(typeof r.audio=="string"?r.audio:""),r.video&&this.videoRecorder&&this.videoRecorder.save(typeof r.video=="string"?r.video:""),r.gif&&this.gifRecorder&&this.gifRecorder.save(typeof r.gif=="string"?r.gif:"")}}o.getFromDisk=t.getFromDisk,o.writeToDisk=t.writeToDisk,typeof t<"u"&&(t.MRecordRTC=o);var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(u){u&&(typeof window<"u"||typeof ae>"u"||(ae.navigator={userAgent:a,getUserMedia:function(){}},ae.console||(ae.console={}),(typeof ae.console.log>"u"||typeof ae.console.error>"u")&&(ae.console.error=ae.console.log=ae.console.log||function(){console.log(arguments)}),typeof document>"u"&&(u.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var r={getContext:function(){return r},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return r},u.HTMLVideoElement=function(){}),typeof location>"u"&&(u.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(u.screen={width:0,height:0}),typeof y>"u"&&(u.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),u.window=ae))})(typeof ae<"u"?ae:null);var v=window.requestAnimationFrame;if(typeof v>"u"){if(typeof webkitRequestAnimationFrame<"u")v=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")v=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")v=msRequestAnimationFrame;else if(typeof v>"u"){var l=0;v=function(u,r){var s=new Date().getTime(),h=Math.max(0,16-(s-l)),m=setTimeout(function(){u(s+h)},h);return l=s+h,m}}}var c=window.cancelAnimationFrame;typeof c>"u"&&(typeof webkitCancelAnimationFrame<"u"?c=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?c=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?c=msCancelAnimationFrame:typeof c>"u"&&(c=function(u){clearTimeout(u)}));var g=window.AudioContext;typeof g>"u"&&(typeof webkitAudioContext<"u"&&(g=webkitAudioContext),typeof mozAudioContext<"u"&&(g=mozAudioContext));var y=window.URL;typeof y>"u"&&typeof webkitURL<"u"&&(y=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var R=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),w=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,C=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),S=!w&&!R&&!!navigator.webkitGetUserMedia||z()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,H=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);H&&!S&&navigator.userAgent.indexOf("CriOS")!==-1&&(H=!1,S=!0);var G=window.MediaStream;typeof G>"u"&&typeof webkitMediaStream<"u"&&(G=webkitMediaStream),typeof G<"u"&&typeof G.prototype.stop>"u"&&(G.prototype.stop=function(){this.getTracks().forEach(function(u){u.stop()})});function Q(u){var r=1e3,s=["Bytes","KB","MB","GB","TB"];if(u===0)return"0 Bytes";var h=parseInt(Math.floor(Math.log(u)/Math.log(r)),10);return(u/Math.pow(r,h)).toPrecision(3)+" "+s[h]}function N(u,r){if(!u)throw"Blob object is required.";if(!u.type)try{u.type="video/webm"}catch{}var s=(u.type||"video/webm").split("/")[1];if(s.indexOf(";")!==-1&&(s=s.split(";")[0]),r&&r.indexOf(".")!==-1){var h=r.split(".");r=h[0],s=h[1]}var m=(r||Math.round(Math.random()*9999999999)+888888888)+"."+s;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(u,m);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(u,m);var b=document.createElement("a");b.href=y.createObjectURL(u),b.download=m,b.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(b),typeof b.click=="function"?b.click():(b.target="_blank",b.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),y.revokeObjectURL(b.href)}function z(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function L(u,r){return!u||!u.getTracks?[]:u.getTracks().filter(function(s){return s.kind===(r||"audio")})}function D(u,r){"srcObject"in r?r.srcObject=u:"mozSrcObject"in r?r.mozSrcObject=u:r.srcObject=u}function j(u,r){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var s=new EBML.Reader,h=new EBML.Decoder,m=EBML.tools,b=new FileReader;b.onload=function(x){var f=h.decode(this.result);f.forEach(function(P){s.read(P)}),s.stop();var A=m.makeMetadataSeekable(s.metadatas,s.duration,s.cues),I=this.result.slice(s.metadataSize),T=new Blob([A,I],{type:"video/webm"});r(T)},b.readAsArrayBuffer(u)}typeof t<"u"&&(t.invokeSaveAsDialog=N,t.getTracks=L,t.getSeekableBlob=j,t.bytesToSize=Q,t.isElectron=z);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var O={};typeof g<"u"?O.AudioContext=g:typeof webkitAudioContext<"u"&&(O.AudioContext=webkitAudioContext),typeof t<"u"&&(t.Storage=O);function Y(){if(C||H||R)return!0;var u=navigator.userAgent,r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10),h,m;return(S||w)&&(h=u.indexOf("Chrome"),r=u.substring(h+7)),(m=r.indexOf(";"))!==-1&&(r=r.substring(0,m)),(m=r.indexOf(" "))!==-1&&(r=r.substring(0,m)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),s>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function K(u,r){var T=this;if(typeof u>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(r=r||{mimeType:"video/webm"},r.type==="audio"){if(L(u,"video").length&&L(u,"audio").length){var s;navigator.mozGetUserMedia?(s=new G,s.addTrack(L(u,"audio")[0])):s=new G(L(u,"audio")),u=s}(!r.mimeType||r.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(r.mimeType=S?"audio/webm":"audio/ogg"),r.mimeType&&r.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(r.mimeType="audio/ogg")}var h=[];this.getArrayOfBlobs=function(){return h},this.record=function(){T.blob=null,T.clearRecordedData(),T.timestamps=[],I=[],h=[];var P=r;r.disableLogs||console.log("Passing following config over MediaRecorder API.",P),f&&(f=null),S&&!Y()&&(P="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&P.mimeType&&(MediaRecorder.isTypeSupported(P.mimeType)||(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",P.mimeType),P.mimeType=r.type==="audio"?"audio/webm":"video/webm"));try{f=new MediaRecorder(u,P),r.mimeType=P.mimeType}catch{f=new MediaRecorder(u)}P.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in f&&f.canRecordMimeType(P.mimeType)===!1&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",P.mimeType)),f.ondataavailable=function(M){if(M.data&&I.push("ondataavailable: "+Q(M.data.size)),typeof r.timeSlice=="number"){if(M.data&&M.data.size&&(h.push(M.data),m(),typeof r.ondataavailable=="function")){var U=r.getNativeBlob?M.data:new Blob([M.data],{type:b(P)});r.ondataavailable(U)}return}if(!M.data||!M.data.size||M.data.size<100||T.blob){T.recordingCallback&&(T.recordingCallback(new Blob([],{type:b(P)})),T.recordingCallback=null);return}T.blob=r.getNativeBlob?M.data:new Blob([M.data],{type:b(P)}),T.recordingCallback&&(T.recordingCallback(T.blob),T.recordingCallback=null)},f.onstart=function(){I.push("started")},f.onpause=function(){I.push("paused")},f.onresume=function(){I.push("resumed")},f.onstop=function(){I.push("stopped")},f.onerror=function(M){M&&(M.name||(M.name="UnknownError"),I.push("error: "+M),r.disableLogs||(M.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",M):M.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",P.mimeType,") is not supported.",M):M.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",M):M.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",M):M.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",M):M.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",M):M.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",M):console.error("MediaRecorder Error",M)),function(U){if(!T.manuallyStopped&&f&&f.state==="inactive"){delete r.timeslice,f.start(10*60*1e3);return}setTimeout(U,1e3)}(),f.state!=="inactive"&&f.state!=="stopped"&&f.stop())},typeof r.timeSlice=="number"?(m(),f.start(r.timeSlice)):f.start(36e5),r.initCallback&&r.initCallback()},this.timestamps=[];function m(){T.timestamps.push(new Date().getTime()),typeof r.onTimeStamp=="function"&&r.onTimeStamp(T.timestamps[T.timestamps.length-1],T.timestamps)}function b(P){return f&&f.mimeType?f.mimeType:P.mimeType||"video/webm"}this.stop=function(P){P=P||function(){},T.manuallyStopped=!0,f&&(this.recordingCallback=P,f.state==="recording"&&f.stop(),typeof r.timeSlice=="number"&&setTimeout(function(){T.blob=new Blob(h,{type:b(r)}),T.recordingCallback(T.blob)},100))},this.pause=function(){f&&f.state==="recording"&&f.pause()},this.resume=function(){f&&f.state==="paused"&&f.resume()},this.clearRecordedData=function(){f&&f.state==="recording"&&T.stop(x),x()};function x(){h=[],f=null,T.timestamps=[]}var f;this.getInternalRecorder=function(){return f};function A(){if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.blob=null,this.getState=function(){return f&&f.state||"inactive"};var I=[];this.getAllStates=function(){return I},typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!1);var T=this;(function P(){if(!(!f||r.checkForInactiveTracks===!1)){if(A()===!1){r.disableLogs||console.log("MediaStream seems stopped."),T.stop();return}setTimeout(P,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MediaStreamRecorder=K);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function $(u,r){if(!L(u,"audio").length)throw"Your stream has no audio tracks.";r=r||{};var s=this,h=[],m=[],b=!1,x=0,f,A=2,I=r.desiredSampRate;r.leftChannel===!0&&(A=1),r.numberOfAudioChannels===1&&(A=1),(!A||A<1)&&(A=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+A),typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!0);function T(){if(r.checkForInactiveTracks===!1)return!0;if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.record=function(){if(T()===!1)throw"Please make sure MediaStream is active.";V(),_=B=!1,b=!0,typeof r.timeSlice<"u"&&te()};function P(J,me){function be(de,Ct){var Pe=de.numberOfAudioChannels,Ce=de.leftBuffers.slice(0),He=de.rightBuffers.slice(0),Ae=de.sampleRate,Ye=de.internalInterleavedLength,Ie=de.desiredSampRate;Pe===2&&(Ce=pr(Ce,Ye),He=pr(He,Ye),Ie&&(Ce=kt(Ce,Ie,Ae),He=kt(He,Ie,Ae))),Pe===1&&(Ce=pr(Ce,Ye),Ie&&(Ce=kt(Ce,Ie,Ae))),Ie&&(Ae=Ie);function kt(he,je,Ee){var Me=Math.round(he.length*(je/Ee)),ye=[],Ke=Number((he.length-1)/(Me-1));ye[0]=he[0];for(var dt=1;dt<Me-1;dt++){var br=dt*Ke,Zr=Number(Math.floor(br)).toFixed(),li=Number(Math.ceil(br)).toFixed(),fi=br-Zr;ye[dt]=ii(he[Zr],he[li],fi)}return ye[Me-1]=he[he.length-1],ye}function ii(he,je,Ee){return he+(je-he)*Ee}function pr(he,je){for(var Ee=new Float64Array(je),Me=0,ye=he.length,Ke=0;Ke<ye;Ke++){var dt=he[Ke];Ee.set(dt,Me),Me+=dt.length}return Ee}function oi(he,je){for(var Ee=he.length+je.length,Me=new Float64Array(Ee),ye=0,Ke=0;Ke<Ee;)Me[Ke++]=he[ye],Me[Ke++]=je[ye],ye++;return Me}function zt(he,je,Ee){for(var Me=Ee.length,ye=0;ye<Me;ye++)he.setUint8(je+ye,Ee.charCodeAt(ye))}var qt;Pe===2&&(qt=oi(Ce,He)),Pe===1&&(qt=Ce);var Gt=qt.length,ai=44+Gt*2,mr=new ArrayBuffer(ai),we=new DataView(mr);zt(we,0,"RIFF"),we.setUint32(4,36+Gt*2,!0),zt(we,8,"WAVE"),zt(we,12,"fmt "),we.setUint32(16,16,!0),we.setUint16(20,1,!0),we.setUint16(22,Pe,!0),we.setUint32(24,Ae,!0),we.setUint32(28,Ae*Pe*2,!0),we.setUint16(32,Pe*2,!0),we.setUint16(34,16,!0),zt(we,36,"data"),we.setUint32(40,Gt*2,!0);for(var si=Gt,Xr=44,ui=1,gr=0;gr<si;gr++)we.setInt16(Xr,qt[gr]*(32767*ui),!0),Xr+=2;if(Ct)return Ct({buffer:mr,view:we});postMessage({buffer:mr,view:we})}if(J.noWorker){be(J,function(de){me(de.buffer,de.view)});return}var $e=M(be);$e.onmessage=function(de){me(de.data.buffer,de.data.view),y.revokeObjectURL($e.workerURL),$e.terminate()},$e.postMessage(J)}function M(J){var me=y.createObjectURL(new Blob([J.toString(),";this.onmessage =  function (eee) {"+J.name+"(eee.data);}"],{type:"application/javascript"})),be=new Worker(me);return be.workerURL=me,be}this.stop=function(J){J=J||function(){},b=!1,P({desiredSampRate:I,sampleRate:p,numberOfAudioChannels:A,internalInterleavedLength:x,leftBuffers:h,rightBuffers:A===1?[]:m,noWorker:r.noWorker},function(me,be){s.blob=new Blob([be],{type:"audio/wav"}),s.buffer=new ArrayBuffer(be.buffer.byteLength),s.view=be,s.sampleRate=I||p,s.bufferSize=X,s.length=x,_=!1,J&&J(s.blob)})},typeof t.Storage>"u"&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!t.Storage.AudioContextConstructor||t.Storage.AudioContextConstructor.state==="closed")&&(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var U=t.Storage.AudioContextConstructor,k=U.createMediaStreamSource(u),q=[0,256,512,1024,2048,4096,8192,16384],X=typeof r.bufferSize>"u"?4096:r.bufferSize;if(q.indexOf(X)===-1&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(q,null,"	"))),U.createJavaScriptNode)f=U.createJavaScriptNode(X,A,A);else if(U.createScriptProcessor)f=U.createScriptProcessor(X,A,A);else throw"WebAudio API has no support on this browser.";k.connect(f),r.bufferSize||(X=f.bufferSize);var p=typeof r.sampleRate<"u"?r.sampleRate:U.sampleRate||44100;(p<22050||p>96e3)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var B=!1;this.pause=function(){B=!0},this.resume=function(){if(T()===!1)throw"Please make sure MediaStream is active.";if(!b){r.disableLogs||console.log("Seems recording has been restarted."),this.record();return}B=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,b&&this.stop(d),d()};function V(){h=[],m=[],x=0,_=!1,b=!1,B=!1,U=null,s.leftchannel=h,s.rightchannel=m,s.numberOfAudioChannels=A,s.desiredSampRate=I,s.sampleRate=p,s.recordingLength=x,W={left:[],right:[],recordingLength:0}}function d(){f&&(f.onaudioprocess=null,f.disconnect(),f=null),k&&(k.disconnect(),k=null),V()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var _=!1;function F(J){if(!B){if(T()===!1&&(r.disableLogs||console.log("MediaStream seems stopped."),f.disconnect(),b=!1),!b){k&&(k.disconnect(),k=null);return}_||(_=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var me=J.inputBuffer.getChannelData(0),be=new Float32Array(me);if(h.push(be),A===2){var $e=J.inputBuffer.getChannelData(1),de=new Float32Array($e);m.push(de)}x+=X,s.recordingLength=x,typeof r.timeSlice<"u"&&(W.recordingLength+=X,W.left.push(be),A===2&&W.right.push(de))}}f.onaudioprocess=F,U.createMediaStreamDestination?f.connect(U.createMediaStreamDestination()):f.connect(U.destination),this.leftchannel=h,this.rightchannel=m,this.numberOfAudioChannels=A,this.desiredSampRate=I,this.sampleRate=p,s.recordingLength=x;var W={left:[],right:[],recordingLength:0};function te(){!b||typeof r.ondataavailable!="function"||typeof r.timeSlice>"u"||(W.left.length?(P({desiredSampRate:I,sampleRate:p,numberOfAudioChannels:A,internalInterleavedLength:W.recordingLength,leftBuffers:W.left,rightBuffers:A===1?[]:W.right},function(J,me){var be=new Blob([me],{type:"audio/wav"});r.ondataavailable(be),setTimeout(te,r.timeSlice)}),W={left:[],right:[],recordingLength:0}):setTimeout(te,r.timeSlice))}}typeof t<"u"&&(t.StereoAudioRecorder=$);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function ee(u,r){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";r=r||{},r.frameInterval||(r.frameInterval=10);var s=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(q){q in document.createElement("canvas")&&(s=!0)});var h=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,m=50,b=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);h&&b&&b[2]&&(m=parseInt(b[2],10)),h&&m<52&&(s=!1),r.useWhammyRecorder&&(s=!1);var x,f;if(s)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),u instanceof HTMLCanvasElement)x=u;else if(u instanceof CanvasRenderingContext2D)x=u.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var A;this.record=function(){if(A=!0,s&&!r.useWhammyRecorder){var q;"captureStream"in x?q=x.captureStream(25):"mozCaptureStream"in x?q=x.mozCaptureStream(25):"webkitCaptureStream"in x&&(q=x.webkitCaptureStream(25));try{var X=new G;X.addTrack(L(q,"video")[0]),q=X}catch{}if(!q)throw"captureStream API are NOT available.";f=new K(q,{mimeType:r.mimeType||"video/webm"}),f.record()}else k.frames=[],U=new Date().getTime(),M();r.initCallback&&r.initCallback()},this.getWebPImages=function(q){if(u.nodeName.toLowerCase()!=="canvas"){q();return}var X=k.frames.length;k.frames.forEach(function(p,B){var V=X-B;r.disableLogs||console.log(V+"/"+X+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(V,X);var d=p.image.toDataURL("image/webp",1);k.frames[B].image=d}),r.disableLogs||console.log("Generating WebM"),q()},this.stop=function(q){A=!1;var X=this;if(s&&f){f.stop(q);return}this.getWebPImages(function(){k.compile(function(p){r.disableLogs||console.log("Recording finished!"),X.blob=p,X.blob.forEach&&(X.blob=new Blob([],{type:"video/webm"})),q&&q(X.blob),k.frames=[]})})};var I=!1;this.pause=function(){if(I=!0,f instanceof K){f.pause();return}},this.resume=function(){if(I=!1,f instanceof K){f.resume();return}A||this.record()},this.clearRecordedData=function(){A&&this.stop(T),T()};function T(){k.frames=[],A=!1,I=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function P(){var q=document.createElement("canvas"),X=q.getContext("2d");return q.width=u.width,q.height=u.height,X.drawImage(u,0,0),q}function M(){if(I)return U=new Date().getTime(),setTimeout(M,500);if(u.nodeName.toLowerCase()==="canvas"){var q=new Date().getTime()-U;U=new Date().getTime(),k.frames.push({image:P(),duration:q}),A&&setTimeout(M,r.frameInterval);return}html2canvas(u,{grabMouse:typeof r.showMousePointer>"u"||r.showMousePointer,onrendered:function(X){var p=new Date().getTime()-U;if(!p)return setTimeout(M,r.frameInterval);U=new Date().getTime(),k.frames.push({image:X.toDataURL("image/webp",1),duration:p}),A&&setTimeout(M,r.frameInterval)}})}var U=new Date().getTime(),k=new Se.Video(100)}typeof t<"u"&&(t.CanvasRecorder=ee);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function le(u,r){r=r||{},r.frameInterval||(r.frameInterval=10),r.disableLogs||console.log("Using frames-interval:",r.frameInterval),this.record=function(){r.width||(r.width=320),r.height||(r.height=240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),A.width=r.canvas.width||320,A.height=r.canvas.height||240,I=A.getContext("2d"),r.video&&r.video instanceof HTMLVideoElement?(T=r.video.cloneNode(),r.initCallback&&r.initCallback()):(T=document.createElement("video"),D(u,T),T.onloadedmetadata=function(){r.initCallback&&r.initCallback()},T.width=r.video.width,T.height=r.video.height),T.muted=!0,T.play(),P=new Date().getTime(),M=new Se.Video,r.disableLogs||(console.log("canvas resolutions",A.width,"*",A.height),console.log("video width/height",T.width||A.width,"*",T.height||A.height)),s(r.frameInterval)};function s(U){U=typeof U<"u"?U:10;var k=new Date().getTime()-P;if(!k)return setTimeout(s,U,U);if(x)return P=new Date().getTime(),setTimeout(s,100);P=new Date().getTime(),T.paused&&T.play(),I.drawImage(T,0,0,A.width,A.height),M.frames.push({duration:k,image:A.toDataURL("image/webp")}),b||setTimeout(s,U,U)}function h(U){var k=-1,q=U.length;(function X(){if(k++,k===q){U.callback();return}setTimeout(function(){U.functionToLoop(X,k)},1)})()}function m(U,k,q,X,p){var B=document.createElement("canvas");B.width=A.width,B.height=A.height;var V=B.getContext("2d"),d=[],_=U.length,F={r:0,g:0,b:0},W=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),te=0,J=0,me=!1;h({length:_,functionToLoop:function(be,$e){var de,Ct,Pe,Ce=function(){!me&&Pe-de<=Pe*J||(me=!0,d.push(U[$e])),be()};if(me)Ce();else{var He=new Image;He.onload=function(){V.drawImage(He,0,0,A.width,A.height);var Ae=V.getImageData(0,0,A.width,A.height);de=0,Ct=Ae.data.length,Pe=Ae.data.length/4;for(var Ye=0;Ye<Ct;Ye+=4){var Ie={r:Ae.data[Ye],g:Ae.data[Ye+1],b:Ae.data[Ye+2]},kt=Math.sqrt(Math.pow(Ie.r-F.r,2)+Math.pow(Ie.g-F.g,2)+Math.pow(Ie.b-F.b,2));kt<=W*te&&de++}Ce()},He.src=U[$e].image}},callback:function(){d=d.concat(U.slice(_)),d.length<=0&&d.push(U[U.length-1]),p(d)}})}var b=!1;this.stop=function(U){U=U||function(){},b=!0;var k=this;setTimeout(function(){m(M.frames,-1,null,null,function(q){M.frames=q,r.advertisement&&r.advertisement.length&&(M.frames=r.advertisement.concat(M.frames)),M.compile(function(X){k.blob=X,k.blob.forEach&&(k.blob=new Blob([],{type:"video/webm"})),U&&U(k.blob)})})},10)};var x=!1;this.pause=function(){x=!0},this.resume=function(){x=!1,b&&this.record()},this.clearRecordedData=function(){b||this.stop(f),f()};function f(){M.frames=[],b=!0,x=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var A=document.createElement("canvas"),I=A.getContext("2d"),T,P,M}typeof t<"u"&&(t.WhammyRecorder=le);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Se=function(){function u(h){this.frames=[],this.duration=h||1,this.quality=.8}u.prototype.add=function(h,m){if("canvas"in h&&(h=h.canvas),"toDataURL"in h&&(h=h.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(h))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:h,duration:m||this.duration})};function r(h){var m=y.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),b=new Worker(m);return y.revokeObjectURL(m),b}function s(h){function m(p){var B=x(p);if(!B)return[];for(var V=3e4,d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:q(B.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:B.width,id:176},{data:B.height,id:186}]}]}]}]}],_=0,F=0;_<p.length;){var W=[],te=0;do W.push(p[_]),te+=p[_].duration,_++;while(_<p.length&&te<V);var J=0,me={id:524531317,data:b(F,J,W)};d[1].data.push(me),F+=te}return T(d)}function b(p,B,V){return[{data:p,id:231}].concat(V.map(function(d){var _=P({frame:d.data.slice(4),trackNum:1,timecode:Math.round(B)});return B+=d.duration,{data:_,id:163}}))}function x(p){if(!p[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var B=p[0].width,V=p[0].height,d=p[0].duration,_=1;_<p.length;_++)d+=p[_].duration;return{duration:d,width:B,height:V}}function f(p){for(var B=[];p>0;)B.push(p&255),p=p>>8;return new Uint8Array(B.reverse())}function A(p){return new Uint8Array(p.split("").map(function(B){return B.charCodeAt(0)}))}function I(p){var B=[],V=p.length%8?new Array(9-p.length%8).join("0"):"";p=V+p;for(var d=0;d<p.length;d+=8)B.push(parseInt(p.substr(d,8),2));return new Uint8Array(B)}function T(p){for(var B=[],V=0;V<p.length;V++){var d=p[V].data;typeof d=="object"&&(d=T(d)),typeof d=="number"&&(d=I(d.toString(2))),typeof d=="string"&&(d=A(d));var _=d.size||d.byteLength||d.length,F=Math.ceil(Math.ceil(Math.log(_)/Math.log(2))/8),W=_.toString(2),te=new Array(F*7+7+1-W.length).join("0")+W,J=new Array(F).join("0")+"1"+te;B.push(f(p[V].id)),B.push(I(J)),B.push(d)}return new Blob(B,{type:"video/webm"})}function P(p){var B=0;B|=128;var V=[p.trackNum|128,p.timecode>>8,p.timecode&255,B].map(function(d){return String.fromCharCode(d)}).join("")+p.frame;return V}function M(p){for(var B=p.RIFF[0].WEBP[0],V=B.indexOf("Â*"),d=0,_=[];d<4;d++)_[d]=B.charCodeAt(V+3+d);var F,W,te;return te=_[1]<<8|_[0],F=te&16383,te=_[3]<<8|_[2],W=te&16383,{width:F,height:W,data:B,riff:p}}function U(p,B){return parseInt(p.substr(B+4,4).split("").map(function(V){var d=V.charCodeAt(0).toString(2);return new Array(8-d.length+1).join("0")+d}).join(""),2)}function k(p){for(var B=0,V={};B<p.length;){var d=p.substr(B,4),_=U(p,B),F=p.substr(B+4+4,_);B+=8+_,V[d]=V[d]||[],d==="RIFF"||d==="LIST"?V[d].push(k(F)):V[d].push(F)}return V}function q(p){return[].slice.call(new Uint8Array(new Float64Array([p]).buffer),0).map(function(B){return String.fromCharCode(B)}).reverse().join("")}var X=new m(h.map(function(p){var B=M(k(atob(p.image.slice(23))));return B.duration=p.duration,B}));postMessage(X)}return u.prototype.compile=function(h){var m=r(s);m.onmessage=function(b){if(b.data.error){console.error(b.data.error);return}h(b.data)},m.postMessage(this.frames)},{Video:u}}();typeof t<"u"&&(t.Whammy=Se);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var fe={init:function(){var u=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var r=1,s=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h,m=indexedDB.open(s,r);function b(f){f.createObjectStore(u.dataStoreName)}function x(){var f=h.transaction([u.dataStoreName],"readwrite");u.videoBlob&&f.objectStore(u.dataStoreName).put(u.videoBlob,"videoBlob"),u.gifBlob&&f.objectStore(u.dataStoreName).put(u.gifBlob,"gifBlob"),u.audioBlob&&f.objectStore(u.dataStoreName).put(u.audioBlob,"audioBlob");function A(I){f.objectStore(u.dataStoreName).get(I).onsuccess=function(T){u.callback&&u.callback(T.target.result,I)}}A("audioBlob"),A("videoBlob"),A("gifBlob")}m.onerror=u.onError,m.onsuccess=function(){if(h=m.result,h.onerror=u.onError,h.setVersion)if(h.version!==r){var f=h.setVersion(r);f.onsuccess=function(){b(h),x()}}else x();else x()},m.onupgradeneeded=function(f){b(f.target.result)}},Fetch:function(u){return this.callback=u,this.init(),this},Store:function(u){return this.audioBlob=u.audioBlob,this.videoBlob=u.videoBlob,this.gifBlob=u.gifBlob,this.init(),this},onError:function(u){console.error(JSON.stringify(u,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof t<"u"&&(t.DiskStorage=fe);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function ce(u,r){if(typeof GIFEncoder>"u"){var s=document.createElement("script");s.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(s)}r=r||{};var h=u instanceof CanvasRenderingContext2D||u instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(U.record,1e3);return}if(!A){setTimeout(U.record,1e3);return}h||(r.width||(r.width=I.offsetWidth||320),r.height||(r.height=I.offsetHeight||240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),x.width=r.canvas.width||320,x.height=r.canvas.height||240,I.width=r.video.width||320,I.height=r.video.height||240),M=new GIFEncoder,M.setRepeat(0),M.setDelay(r.frameRate||200),M.setQuality(r.quality||10),M.start(),typeof r.onGifRecordingStarted=="function"&&r.onGifRecordingStarted();function k(q){if(U.clearedRecordedData!==!0){if(m)return setTimeout(function(){k(q)},100);T=v(k),typeof P===void 0&&(P=q),!(q-P<90)&&(!h&&I.paused&&I.play(),h||f.drawImage(I,0,0,x.width,x.height),r.onGifPreview&&r.onGifPreview(x.toDataURL("image/png")),M.addFrame(f),P=q)}}T=v(k),r.initCallback&&r.initCallback()},this.stop=function(k){k=k||function(){},T&&c(T),this.blob=new Blob([new Uint8Array(M.stream().bin)],{type:"image/gif"}),k(this.blob),M.stream().bin=[]};var m=!1;this.pause=function(){m=!0},this.resume=function(){m=!1},this.clearRecordedData=function(){U.clearedRecordedData=!0,b()};function b(){M&&(M.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var x=document.createElement("canvas"),f=x.getContext("2d");h&&(u instanceof CanvasRenderingContext2D?(f=u,x=f.canvas):u instanceof HTMLCanvasElement&&(f=u.getContext("2d"),x=u));var A=!0;if(!h){var I=document.createElement("video");I.muted=!0,I.autoplay=!0,I.playsInline=!0,A=!1,I.onloadedmetadata=function(){A=!0},D(u,I),I.play()}var T=null,P,M,U=this}typeof t<"u"&&(t.GifRecorder=ce);function se(u,r){var s="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(d){typeof t<"u"||d&&(typeof window<"u"||typeof ae>"u"||(ae.navigator={userAgent:s,getUserMedia:function(){}},ae.console||(ae.console={}),(typeof ae.console.log>"u"||typeof ae.console.error>"u")&&(ae.console.error=ae.console.log=ae.console.log||function(){console.log(arguments)}),typeof document>"u"&&(d.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var _={getContext:function(){return _},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return _},d.HTMLVideoElement=function(){}),typeof location>"u"&&(d.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(d.screen={width:0,height:0}),typeof I>"u"&&(d.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),d.window=ae))})(typeof ae<"u"?ae:null),r=r||"multi-streams-mixer";var h=[],m=!1,b=document.createElement("canvas"),x=b.getContext("2d");b.style.opacity=0,b.style.position="absolute",b.style.zIndex=-1,b.style.top="-1000em",b.style.left="-1000em",b.className=r,(document.body||document.documentElement).appendChild(b),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var f=this,A=window.AudioContext;typeof A>"u"&&(typeof webkitAudioContext<"u"&&(A=webkitAudioContext),typeof mozAudioContext<"u"&&(A=mozAudioContext));var I=window.URL;typeof I>"u"&&typeof webkitURL<"u"&&(I=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var T=window.MediaStream;typeof T>"u"&&typeof webkitMediaStream<"u"&&(T=webkitMediaStream),typeof T<"u"&&typeof T.prototype.stop>"u"&&(T.prototype.stop=function(){this.getTracks().forEach(function(d){d.stop()})});var P={};typeof A<"u"?P.AudioContext=A:typeof webkitAudioContext<"u"&&(P.AudioContext=webkitAudioContext);function M(d,_){"srcObject"in _?_.srcObject=d:"mozSrcObject"in _?_.mozSrcObject=d:_.srcObject=d}this.startDrawingFrames=function(){U()};function U(){if(!m){var d=h.length,_=!1,F=[];if(h.forEach(function(te){te.stream||(te.stream={}),te.stream.fullcanvas?_=te:F.push(te)}),_)b.width=_.stream.width,b.height=_.stream.height;else if(F.length){b.width=d>1?F[0].width*2:F[0].width;var W=1;(d===3||d===4)&&(W=2),(d===5||d===6)&&(W=3),(d===7||d===8)&&(W=4),(d===9||d===10)&&(W=5),b.height=F[0].height*W}else b.width=f.width||360,b.height=f.height||240;_&&_ instanceof HTMLVideoElement&&k(_),F.forEach(function(te,J){k(te,J)}),setTimeout(U,f.frameInterval)}}function k(d,_){if(!m){var F=0,W=0,te=d.width,J=d.height;_===1&&(F=d.width),_===2&&(W=d.height),_===3&&(F=d.width,W=d.height),_===4&&(W=d.height*2),_===5&&(F=d.width,W=d.height*2),_===6&&(W=d.height*3),_===7&&(F=d.width,W=d.height*3),typeof d.stream.left<"u"&&(F=d.stream.left),typeof d.stream.top<"u"&&(W=d.stream.top),typeof d.stream.width<"u"&&(te=d.stream.width),typeof d.stream.height<"u"&&(J=d.stream.height),x.drawImage(d,F,W,te,J),typeof d.stream.onRender=="function"&&d.stream.onRender(x,F,W,te,J,_)}}function q(){m=!1;var d=X(),_=p();return _&&_.getTracks().filter(function(F){return F.kind==="audio"}).forEach(function(F){d.addTrack(F)}),u.forEach(function(F){F.fullcanvas}),d}function X(){V();var d;"captureStream"in b?d=b.captureStream():"mozCaptureStream"in b?d=b.mozCaptureStream():f.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var _=new T;return d.getTracks().filter(function(F){return F.kind==="video"}).forEach(function(F){_.addTrack(F)}),b.stream=_,_}function p(){P.AudioContextConstructor||(P.AudioContextConstructor=new P.AudioContext),f.audioContext=P.AudioContextConstructor,f.audioSources=[],f.useGainNode===!0&&(f.gainNode=f.audioContext.createGain(),f.gainNode.connect(f.audioContext.destination),f.gainNode.gain.value=0);var d=0;if(u.forEach(function(_){if(_.getTracks().filter(function(W){return W.kind==="audio"}).length){d++;var F=f.audioContext.createMediaStreamSource(_);f.useGainNode===!0&&F.connect(f.gainNode),f.audioSources.push(F)}}),!!d)return f.audioDestination=f.audioContext.createMediaStreamDestination(),f.audioSources.forEach(function(_){_.connect(f.audioDestination)}),f.audioDestination.stream}function B(d){var _=document.createElement("video");return M(d,_),_.className=r,_.muted=!0,_.volume=0,_.width=d.width||f.width||360,_.height=d.height||f.height||240,_.play(),_}this.appendStreams=function(d){if(!d)throw"First parameter is required.";d instanceof Array||(d=[d]),d.forEach(function(_){var F=new T;if(_.getTracks().filter(function(J){return J.kind==="video"}).length){var W=B(_);W.stream=_,h.push(W),F.addTrack(_.getTracks().filter(function(J){return J.kind==="video"})[0])}if(_.getTracks().filter(function(J){return J.kind==="audio"}).length){var te=f.audioContext.createMediaStreamSource(_);f.audioDestination=f.audioContext.createMediaStreamDestination(),te.connect(f.audioDestination),F.addTrack(f.audioDestination.stream.getTracks().filter(function(J){return J.kind==="audio"})[0])}u.push(F)})},this.releaseStreams=function(){h=[],m=!0,f.gainNode&&(f.gainNode.disconnect(),f.gainNode=null),f.audioSources.length&&(f.audioSources.forEach(function(d){d.disconnect()}),f.audioSources=[]),f.audioDestination&&(f.audioDestination.disconnect(),f.audioDestination=null),f.audioContext&&f.audioContext.close(),f.audioContext=null,x.clearRect(0,0,b.width,b.height),b.stream&&(b.stream.stop(),b.stream=null)},this.resetVideoStreams=function(d){d&&!(d instanceof Array)&&(d=[d]),V(d)};function V(d){h=[],d=d||u,d.forEach(function(_){if(_.getTracks().filter(function(W){return W.kind==="video"}).length){var F=B(_);F.stream=_,h.push(F)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=q}typeof t>"u"&&(e.exports=se);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function ve(u,r){u=u||[];var s=this,h,m;r=r||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},r.frameInterval||(r.frameInterval=10),r.video||(r.video={}),r.video.width||(r.video.width=360),r.video.height||(r.video.height=240),this.record=function(){h=new se(u,r.elementClass||"multi-streams-mixer"),b().length&&(h.frameInterval=r.frameInterval||10,h.width=r.video.width||360,h.height=r.video.height||240,h.startDrawingFrames()),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()),m=new K(h.getMixedStream(),r),m.record()};function b(){var x=[];return u.forEach(function(f){L(f,"video").forEach(function(A){x.push(A)})}),x}this.stop=function(x){m&&m.stop(function(f){s.blob=f,x(f),s.clearRecordedData()})},this.pause=function(){m&&m.pause()},this.resume=function(){m&&m.resume()},this.clearRecordedData=function(){m&&(m.clearRecordedData(),m=null),h&&(h.releaseStreams(),h=null)},this.addStreams=function(x){if(!x)throw"First parameter is required.";x instanceof Array||(x=[x]),u.concat(x),!(!m||!h)&&(h.appendStreams(x),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()))},this.resetVideoStreams=function(x){h&&(x&&!(x instanceof Array)&&(x=[x]),h.resetVideoStreams(x))},this.getMixer=function(){return h},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MultiStreamRecorder=ve);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function Be(u,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof u>"u")throw'First argument "MediaStream" is required.';var s=this;s.recordRTC=new t(u,r),this.startRecording=function(){return new Promise(function(h,m){try{s.recordRTC.startRecording(),h()}catch(b){m(b)}})},this.stopRecording=function(){return new Promise(function(h,m){try{s.recordRTC.stopRecording(function(b){if(s.blob=s.recordRTC.getBlob(),!s.blob||!s.blob.size){m("Empty blob.",s.blob);return}h(b)})}catch(b){m(b)}})},this.pauseRecording=function(){return new Promise(function(h,m){try{s.recordRTC.pauseRecording(),h()}catch(b){m(b)}})},this.resumeRecording=function(){return new Promise(function(h,m){try{s.recordRTC.resumeRecording(),h()}catch(b){m(b)}})},this.getDataURL=function(h){return new Promise(function(m,b){try{s.recordRTC.getDataURL(function(x){m(x)})}catch(x){b(x)}})},this.getBlob=function(){return new Promise(function(h,m){try{h(s.recordRTC.getBlob())}catch(b){m(b)}})},this.getInternalRecorder=function(){return new Promise(function(h,m){try{h(s.recordRTC.getInternalRecorder())}catch(b){m(b)}})},this.reset=function(){return new Promise(function(h,m){try{h(s.recordRTC.reset())}catch(b){m(b)}})},this.destroy=function(){return new Promise(function(h,m){try{h(s.recordRTC.destroy())}catch(b){m(b)}})},this.getState=function(){return new Promise(function(h,m){try{h(s.recordRTC.getState())}catch(b){m(b)}})},this.blob=null,this.version="5.6.2"}typeof t<"u"&&(t.RecordRTCPromisesHandler=Be);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function Ge(u,r){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),r=r||{},r.width=r.width||640,r.height=r.height||480,r.frameRate=r.frameRate||30,r.bitrate=r.bitrate||1200,r.realtime=r.realtime||!0;var s;function h(){return new ReadableStream({start:function(I){var T=document.createElement("canvas"),P=document.createElement("video"),M=!0;P.srcObject=u,P.muted=!0,P.height=r.height,P.width=r.width,P.volume=0,P.onplaying=function(){T.width=r.width,T.height=r.height;var U=T.getContext("2d"),k=1e3/r.frameRate,q=setInterval(function(){if(s&&(clearInterval(q),I.close()),M&&(M=!1,r.onVideoProcessStarted&&r.onVideoProcessStarted()),U.drawImage(P,0,0),I._controlledReadableStream.state!=="closed")try{I.enqueue(U.getImageData(0,0,r.width,r.height))}catch{}},k)},P.play()}})}var m;function b(I,T){if(!r.workerPath&&!T){s=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(M){M.arrayBuffer().then(function(U){b(I,U)})});return}if(!r.workerPath&&T instanceof ArrayBuffer){var P=new Blob([T],{type:"text/javascript"});r.workerPath=y.createObjectURL(P)}r.workerPath||console.error("workerPath parameter is missing."),m=new Worker(r.workerPath),m.postMessage(r.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),m.addEventListener("message",function(M){M.data==="READY"?(m.postMessage({width:r.width,height:r.height,bitrate:r.bitrate||1200,timebaseDen:r.frameRate||30,realtime:r.realtime}),h().pipeTo(new WritableStream({write:function(U){if(s){console.error("Got image, but recorder is finished!");return}m.postMessage(U.data.buffer,[U.data.buffer])}}))):M.data&&(x||A.push(M.data))})}this.record=function(){A=[],x=!1,this.blob=null,b(u),typeof r.initCallback=="function"&&r.initCallback()};var x;this.pause=function(){x=!0},this.resume=function(){x=!1};function f(I){if(!m){I&&I();return}m.addEventListener("message",function(T){T.data===null&&(m.terminate(),m=null,I&&I())}),m.postMessage(null)}var A=[];this.stop=function(I){s=!0;var T=this;f(function(){T.blob=new Blob(A,{type:"video/webm"}),I(T.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){A=[],x=!1,this.blob=null},this.blob=null}typeof t<"u"&&(t.WebAssemblyRecorder=Ge)}(xr)),xr.exports}var ni=la();const fa=ua(ni);var da=pe("<div> </div>"),ca=pe('<audio controls></audio> <a download="test.wav" class="px-2 text-xs text-blue-500 underline">WAV ë‹¤ìš´ë¡œë“œ</a>',1),va=pe('<div class="h-screen flex flex-col max-w-md mx-auto"><div class="flex-1 overflow-auto p-2 space-y-2"></div> <div class="flex gap-2 p-2 border-t"><button class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200"> </button> <!></div></div>');function ha(e,t){vt(t,!1);let n=null,i=null,o=Oe(null),a=Oe(!1),v=null,l=Oe([]);async function c(){if(!E(a))try{i=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}}),n=new fa(i,{type:"audio",mimeType:"audio/wav",recorderType:ni.StereoAudioRecorder,desiredSampRate:16e3,numberOfAudioChannels:1,timeSlice:5e3}),n.startRecording(),Z(a,!0),v=setTimeout(()=>g(),5e3)}catch(N){Z(l,[...E(l),{role:"system",content:"ë…¹ìŒ ì˜¤ë¥˜: "+N}])}}async function g(){!n||!E(a)||n.stopRecording(async()=>{const N=n.getBlob();Z(o,URL.createObjectURL(N)),await y(N),Z(a,!1),v&&clearTimeout(v),i&&(i.getTracks().forEach(z=>z.stop()),i=null)})}async function y(N){const z=new FormData;z.append("file",N,"recording.wav");try{(await fetch("/set-voice-reference",{method:"POST",body:z})).ok?Z(l,[...E(l),{role:"system",content:"ìŒì„± ì—…ë¡œë“œ ì„±ê³µ"}]):Z(l,[...E(l),{role:"system",content:"ì—…ë¡œë“œ ì‹¤íŒ¨"}])}catch{Z(l,[...E(l),{role:"system",content:"ì—…ë¡œë“œ ì˜¤ë¥˜"}])}}ti(()=>{i&&i.getTracks().forEach(N=>N.stop())}),Wt();var R=va(),w=oe(R);Yr(w,5,()=>E(l),Hr,(N,z)=>{var L=da(),D=oe(L);Xe(()=>{Xn(L,1,`max-w-[85%] px-3 py-2 text-sm break-words
        ${E(z).role==="user"?"ml-auto bg-gray-100":"mr-auto"}`),lt(D,E(z).content)}),ue(N,L)});var C=ge(w,2),S=oe(C),H=oe(S),G=ge(S,2);{var Q=N=>{var z=ca(),L=gt(z),D=ge(L,2);Xe(()=>{ln(L,"src",E(o)),ln(D,"href",E(o))}),ue(N,z)};Ve(G,N=>{E(o)&&N(Q)})}Xe(()=>{S.disabled=E(a),lt(H,E(a)?"ë…¹ìŒ ì¤‘... (5ì´ˆ)":"ë…¹ìŒ ì‹œì‘")}),yt("click",S,function(...N){var z;(z=E(a)?g:c)==null||z.apply(this,N)}),ue(e,R),ht()}var pa=pe('<div class="w-[360px] h-[640px] bg-white border rounded-3xl shadow-lg p-4 flex flex-col"><!></div>'),ma=pe('<main class="w-screen h-screen flex"><nav class="flex-1 flex flex-col items-center justify-center space-y-6 bg-gray-50"><a href="#/" class="text-xl hover:underline svelte-xnbhzl">í™ˆ</a> <a href="#/LLM" class="text-xl hover:underline svelte-xnbhzl">ì±„íŒ…</a> <a href="#/voice_reference" class="text-xl hover:underline svelte-xnbhzl">ìŒì„±ì°¸ì¡°</a></nav> <div class="flex-1 flex items-center justify-center bg-gray-100"><!></div> <div class="flex-1 flex items-center justify-center bg-gray-50">pintech-team01</div></main>');function ga(e){const t={"/":Wo,"/LLM":sa,"/voice_reference":ha};var n=ma(),i=ge(oe(n),2),o=oe(i);No(o,{routes:t,useHash:!0,children:ji,$$slots:{default:(a,v)=>{const l=jr(()=>v.Component);var c=pa(),g=oe(c);Mr(g,()=>E(l),(y,R)=>{R(y,{})}),ue(a,c)}}}),ue(e,n)}po(ga,{target:document.getElementById("app")});
